/*! For license information please see main.d36e3561.js.LICENSE.txt */
!function(){var e={383:function(e){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},358:function(e){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(i>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}};e.exports=n}()},567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFSA=o,t.isError=function(e){return o(e)&&!0===e.error};var r=a(n(519)),i=a(n(988));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return(0,r.default)(e)&&(0,i.default)(e.type)&&Object.keys(e).every(s)}function s(e){return["type","payload","error","meta"].indexOf(e)>-1}},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case u:return e;default:return t}}case i:return t}}}function b(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return b(e)||w(e)===l},t.isConcurrentMode=b,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===_||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},586:function(e){function t(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},950:function(e){function t(e){return!!e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof e.then}e.exports=t,e.exports.default=t},519:function(e){var t,n,r=Function.prototype,i=Object.prototype,a=r.toString,o=i.hasOwnProperty,s=a.call(Object),u=i.toString,c=(t=Object.getPrototypeOf,n=Object,function(e){return t(n(e))});e.exports=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=u.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e))return!1;var t=c(e);if(null===t)return!0;var n=o.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&a.call(n)==s}},988:function(e){var t=Object.prototype.toString,n=Array.isArray;e.exports=function(e){return"string"==typeof e||!n(e)&&function(e){return!!e&&"object"==typeof e}(e)&&"[object String]"==t.call(e)}},329:function(e,t,n){!function(){var t=n(358),r=n(383).utf8,i=n(586),a=n(383).bin,o=function e(n,o){n.constructor==String?n=o&&"binary"===o.encoding?a.stringToBytes(n):r.stringToBytes(n):i(n)?n=Array.prototype.slice.call(n,0):Array.isArray(n)||n.constructor===Uint8Array||(n=n.toString());for(var s=t.bytesToWords(n),u=8*n.length,c=1732584193,l=-271733879,f=-1732584194,h=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[u>>>5]|=128<<u%32,s[14+(u+64>>>9<<4)]=u;var p=e._ff,v=e._gg,m=e._hh,y=e._ii;for(d=0;d<s.length;d+=16){var g=c,k=l,_=f,w=h;c=p(c,l,f,h,s[d+0],7,-680876936),h=p(h,c,l,f,s[d+1],12,-389564586),f=p(f,h,c,l,s[d+2],17,606105819),l=p(l,f,h,c,s[d+3],22,-1044525330),c=p(c,l,f,h,s[d+4],7,-176418897),h=p(h,c,l,f,s[d+5],12,1200080426),f=p(f,h,c,l,s[d+6],17,-1473231341),l=p(l,f,h,c,s[d+7],22,-45705983),c=p(c,l,f,h,s[d+8],7,1770035416),h=p(h,c,l,f,s[d+9],12,-1958414417),f=p(f,h,c,l,s[d+10],17,-42063),l=p(l,f,h,c,s[d+11],22,-1990404162),c=p(c,l,f,h,s[d+12],7,1804603682),h=p(h,c,l,f,s[d+13],12,-40341101),f=p(f,h,c,l,s[d+14],17,-1502002290),c=v(c,l=p(l,f,h,c,s[d+15],22,1236535329),f,h,s[d+1],5,-165796510),h=v(h,c,l,f,s[d+6],9,-1069501632),f=v(f,h,c,l,s[d+11],14,643717713),l=v(l,f,h,c,s[d+0],20,-373897302),c=v(c,l,f,h,s[d+5],5,-701558691),h=v(h,c,l,f,s[d+10],9,38016083),f=v(f,h,c,l,s[d+15],14,-660478335),l=v(l,f,h,c,s[d+4],20,-405537848),c=v(c,l,f,h,s[d+9],5,568446438),h=v(h,c,l,f,s[d+14],9,-1019803690),f=v(f,h,c,l,s[d+3],14,-187363961),l=v(l,f,h,c,s[d+8],20,1163531501),c=v(c,l,f,h,s[d+13],5,-1444681467),h=v(h,c,l,f,s[d+2],9,-51403784),f=v(f,h,c,l,s[d+7],14,1735328473),c=m(c,l=v(l,f,h,c,s[d+12],20,-1926607734),f,h,s[d+5],4,-378558),h=m(h,c,l,f,s[d+8],11,-2022574463),f=m(f,h,c,l,s[d+11],16,1839030562),l=m(l,f,h,c,s[d+14],23,-35309556),c=m(c,l,f,h,s[d+1],4,-1530992060),h=m(h,c,l,f,s[d+4],11,1272893353),f=m(f,h,c,l,s[d+7],16,-155497632),l=m(l,f,h,c,s[d+10],23,-1094730640),c=m(c,l,f,h,s[d+13],4,681279174),h=m(h,c,l,f,s[d+0],11,-358537222),f=m(f,h,c,l,s[d+3],16,-722521979),l=m(l,f,h,c,s[d+6],23,76029189),c=m(c,l,f,h,s[d+9],4,-640364487),h=m(h,c,l,f,s[d+12],11,-421815835),f=m(f,h,c,l,s[d+15],16,530742520),c=y(c,l=m(l,f,h,c,s[d+2],23,-995338651),f,h,s[d+0],6,-198630844),h=y(h,c,l,f,s[d+7],10,1126891415),f=y(f,h,c,l,s[d+14],15,-1416354905),l=y(l,f,h,c,s[d+5],21,-57434055),c=y(c,l,f,h,s[d+12],6,1700485571),h=y(h,c,l,f,s[d+3],10,-1894986606),f=y(f,h,c,l,s[d+10],15,-1051523),l=y(l,f,h,c,s[d+1],21,-2054922799),c=y(c,l,f,h,s[d+8],6,1873313359),h=y(h,c,l,f,s[d+15],10,-30611744),f=y(f,h,c,l,s[d+6],15,-1560198380),l=y(l,f,h,c,s[d+13],21,1309151649),c=y(c,l,f,h,s[d+4],6,-145523070),h=y(h,c,l,f,s[d+11],10,-1120210379),f=y(f,h,c,l,s[d+2],15,718787259),l=y(l,f,h,c,s[d+9],21,-343485551),c=c+g>>>0,l=l+k>>>0,f=f+_>>>0,h=h+w>>>0}return t.endian([c,l,f,h])};o._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},o._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},o._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},o._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(o(e,n));return n&&n.asBytes?r:n&&n.asString?a.bytesToString(r):t.bytesToHex(r)}}()},426:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){t=e}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function c(e){return void 0===e}function l(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function f(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function d(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Yn(e,t,n,r,!0).utc()}function v(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(e){return null==e._pf&&(e._pf=v()),e._pf}function y(e){if(null==e._isValid){var t=m(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function g(e){var t=p(NaN);return null!=e?d(m(t),e):m(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var k=r.momentProperties=[],_=!1;function w(e,t){var n,r,i,a=k.length;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=m(t)),c(t._locale)||(e._locale=t._locale),a>0)for(n=0;n<a;n++)c(i=t[r=k[n]])||(e[r]=i);return e}function b(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===_&&(_=!0,r.updateOffset(this),_=!1)}function x(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function E(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var n=!0;return d((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,a,o,u=[],c=arguments.length;for(a=0;a<c;a++){if(i="","object"===typeof arguments[a]){for(o in i+="\n["+a+"] ",arguments[0])s(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[a];u.push(i)}E(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var T,C={};function I(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),C[e]||(E(t),C[e]=!0)}function N(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function R(e){var t,n;for(n in e)s(e,n)&&(N(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function P(e,t){var n,r=d({},e);for(n in t)s(t,n)&&(o(e[n])&&o(t[n])?(r[n]={},d(r[n],e[n]),d(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)s(e,n)&&!s(t,n)&&o(e[n])&&(r[n]=d({},r[n]));return r}function D(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,T=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var O={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function A(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return N(r)?r.call(t,n):r}function M(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var L=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,j={},U={};function V(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(U[e]=i),t&&(U[t[0]]=function(){return M(i.apply(this,arguments),t[1],t[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function B(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function q(e){var t,n,r=e.match(L);for(t=0,n=r.length;t<n;t++)U[r[t]]?r[t]=U[r[t]]:r[t]=B(r[t]);return function(t){var i,a="";for(i=0;i<n;i++)a+=N(r[i])?r[i].call(t,e):r[i];return a}}function z(e,t){return e.isValid()?(t=W(t,e.localeData()),j[t]=j[t]||q(t),j[t](e)):e.localeData().invalidDate()}function W(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(F.lastIndex=0;n>=0&&F.test(e);)e=e.replace(F,r),F.lastIndex=0,n-=1;return e}var H={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function G(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(L).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var K="Invalid date";function Y(){return this._invalidDate}var Q="%d",$=/\d{1,2}/;function X(e){return this._ordinal.replace("%d",e)}var J={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Z(e,t,n,r){var i=this._relativeTime[n];return N(i)?i(e,t,n,r):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return N(n)?n(t):n.replace(/%s/i,t)}var te={};function ne(e,t){var n=e.toLowerCase();te[n]=te[n+"s"]=te[t]=e}function re(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function ie(e){var t,n,r={};for(n in e)s(e,n)&&(t=re(n))&&(r[t]=e[n]);return r}var ae={};function oe(e,t){ae[e]=t}function se(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:ae[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function ue(e){return e%4===0&&e%100!==0||e%400===0}function ce(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function le(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=ce(t)),n}function fe(e,t){return function(n){return null!=n?(de(this,e,n),r.updateOffset(this,t),this):he(this,e)}}function he(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function de(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ue(e.year())&&1===e.month()&&29===e.date()?(n=le(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Ze(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function pe(e){return N(this[e=re(e)])?this[e]():this}function ve(e,t){if("object"===typeof e){var n,r=se(e=ie(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(N(this[e=re(e)]))return this[e](t);return this}var me,ye=/\d/,ge=/\d\d/,ke=/\d{3}/,_e=/\d{4}/,we=/[+-]?\d{6}/,be=/\d\d?/,xe=/\d\d\d\d?/,Ee=/\d\d\d\d\d\d?/,Se=/\d{1,3}/,Te=/\d{1,4}/,Ce=/[+-]?\d{1,6}/,Ie=/\d+/,Ne=/[+-]?\d+/,Re=/Z|[+-]\d\d:?\d\d/gi,Pe=/Z|[+-]\d\d(?::?\d\d)?/gi,De=/[+-]?\d+(\.\d{1,3})?/,Oe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Ae(e,t,n){me[e]=N(t)?t:function(e,r){return e&&n?n:t}}function Me(e,t){return s(me,e)?me[e](t._strict,t._locale):new RegExp(Le(e))}function Le(e){return Fe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function Fe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}me={};var je={};function Ue(e,t){var n,r,i=t;for("string"===typeof e&&(e=[e]),l(t)&&(i=function(e,n){n[t]=le(e)}),r=e.length,n=0;n<r;n++)je[e[n]]=i}function Ve(e,t){Ue(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function Be(e,t,n){null!=t&&s(je,e)&&je[e](t,n._a,n,e)}var qe,ze=0,We=1,He=2,Ge=3,Ke=4,Ye=5,Qe=6,$e=7,Xe=8;function Je(e,t){return(e%t+t)%t}function Ze(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Je(t,12);return e+=(t-n)/12,1===n?ue(e)?29:28:31-n%7%2}qe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},V("M",["MM",2],"Mo",(function(){return this.month()+1})),V("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),V("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),ne("month","M"),oe("month",8),Ae("M",be),Ae("MM",be,ge),Ae("MMM",(function(e,t){return t.monthsShortRegex(e)})),Ae("MMMM",(function(e,t){return t.monthsRegex(e)})),Ue(["M","MM"],(function(e,t){t[We]=le(e)-1})),Ue(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[We]=i:m(n).invalidMonth=e}));var et="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),tt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),nt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,rt=Oe,it=Oe;function at(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||nt).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone}function ot(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[nt.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function st(e,t,n){var r,i,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=qe.call(this._shortMonthsParse,o))?i:null:-1!==(i=qe.call(this._longMonthsParse,o))?i:null:"MMM"===t?-1!==(i=qe.call(this._shortMonthsParse,o))||-1!==(i=qe.call(this._longMonthsParse,o))?i:null:-1!==(i=qe.call(this._longMonthsParse,o))||-1!==(i=qe.call(this._shortMonthsParse,o))?i:null}function ut(e,t,n){var r,i,a;if(this._monthsParseExact)return st.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ct(e,t){var n;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=le(t);else if(!l(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Ze(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function lt(e){return null!=e?(ct(this,e),r.updateOffset(this,!0),this):he(this,"Month")}function ft(){return Ze(this.year(),this.month())}function ht(e){return this._monthsParseExact?(s(this,"_monthsRegex")||pt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=rt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function dt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||pt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=it),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function pt(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],a=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),a.sort(e),t=0;t<12;t++)r[t]=Fe(r[t]),i[t]=Fe(i[t]);for(t=0;t<24;t++)a[t]=Fe(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function vt(e){return ue(e)?366:365}V("Y",0,0,(function(){var e=this.year();return e<=9999?M(e,4):"+"+e})),V(0,["YY",2],0,(function(){return this.year()%100})),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),ne("year","y"),oe("year",1),Ae("Y",Ne),Ae("YY",be,ge),Ae("YYYY",Te,_e),Ae("YYYYY",Ce,we),Ae("YYYYYY",Ce,we),Ue(["YYYYY","YYYYYY"],ze),Ue("YYYY",(function(e,t){t[ze]=2===e.length?r.parseTwoDigitYear(e):le(e)})),Ue("YY",(function(e,t){t[ze]=r.parseTwoDigitYear(e)})),Ue("Y",(function(e,t){t[ze]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return le(e)+(le(e)>68?1900:2e3)};var mt=fe("FullYear",!0);function yt(){return ue(this.year())}function gt(e,t,n,r,i,a,o){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,i,a,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,i,a,o),s}function kt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function _t(e,t,n){var r=7+t-n;return-(7+kt(e,0,r).getUTCDay()-t)%7+r-1}function wt(e,t,n,r,i){var a,o,s=1+7*(t-1)+(7+n-r)%7+_t(e,r,i);return s<=0?o=vt(a=e-1)+s:s>vt(e)?(a=e+1,o=s-vt(e)):(a=e,o=s),{year:a,dayOfYear:o}}function bt(e,t,n){var r,i,a=_t(e.year(),t,n),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?r=o+xt(i=e.year()-1,t,n):o>xt(e.year(),t,n)?(r=o-xt(e.year(),t,n),i=e.year()+1):(i=e.year(),r=o),{week:r,year:i}}function xt(e,t,n){var r=_t(e,t,n),i=_t(e+1,t,n);return(vt(e)-r+i)/7}function Et(e){return bt(e,this._week.dow,this._week.doy).week}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),ne("week","w"),ne("isoWeek","W"),oe("week",5),oe("isoWeek",5),Ae("w",be),Ae("ww",be,ge),Ae("W",be),Ae("WW",be,ge),Ve(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=le(e)}));var St={dow:0,doy:6};function Tt(){return this._week.dow}function Ct(){return this._week.doy}function It(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Nt(e){var t=bt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Rt(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Pt(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Dt(e,t){return e.slice(t,7).concat(e.slice(0,t))}V("d",0,"do","day"),V("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),V("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),V("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),ne("day","d"),ne("weekday","e"),ne("isoWeekday","E"),oe("day",11),oe("weekday",11),oe("isoWeekday",11),Ae("d",be),Ae("e",be),Ae("E",be),Ae("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Ae("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Ae("dddd",(function(e,t){return t.weekdaysRegex(e)})),Ve(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:m(n).invalidWeekday=e})),Ve(["d","e","E"],(function(e,t,n,r){t[r]=le(e)}));var Ot="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),At="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Mt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Lt=Oe,Ft=Oe,jt=Oe;function Ut(e,t){var n=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Dt(n,this._week.dow):e?n[e.day()]:n}function Vt(e){return!0===e?Dt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Bt(e){return!0===e?Dt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function qt(e,t,n){var r,i,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=qe.call(this._weekdaysParse,o))?i:null:"ddd"===t?-1!==(i=qe.call(this._shortWeekdaysParse,o))?i:null:-1!==(i=qe.call(this._minWeekdaysParse,o))?i:null:"dddd"===t?-1!==(i=qe.call(this._weekdaysParse,o))||-1!==(i=qe.call(this._shortWeekdaysParse,o))||-1!==(i=qe.call(this._minWeekdaysParse,o))?i:null:"ddd"===t?-1!==(i=qe.call(this._shortWeekdaysParse,o))||-1!==(i=qe.call(this._weekdaysParse,o))||-1!==(i=qe.call(this._minWeekdaysParse,o))?i:null:-1!==(i=qe.call(this._minWeekdaysParse,o))||-1!==(i=qe.call(this._weekdaysParse,o))||-1!==(i=qe.call(this._shortWeekdaysParse,o))?i:null}function zt(e,t,n){var r,i,a;if(this._weekdaysParseExact)return qt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Wt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Rt(e,this.localeData()),this.add(e-t,"d")):t}function Ht(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Gt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Pt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Kt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Lt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Yt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ft),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Qt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=jt),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function $t(){function e(e,t){return t.length-e.length}var t,n,r,i,a,o=[],s=[],u=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=Fe(this.weekdaysMin(n,"")),i=Fe(this.weekdaysShort(n,"")),a=Fe(this.weekdays(n,"")),o.push(r),s.push(i),u.push(a),c.push(r),c.push(i),c.push(a);o.sort(e),s.sort(e),u.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Xt(){return this.hours()%12||12}function Jt(){return this.hours()||24}function Zt(e,t){V(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Xt),V("k",["kk",2],0,Jt),V("hmm",0,0,(function(){return""+Xt.apply(this)+M(this.minutes(),2)})),V("hmmss",0,0,(function(){return""+Xt.apply(this)+M(this.minutes(),2)+M(this.seconds(),2)})),V("Hmm",0,0,(function(){return""+this.hours()+M(this.minutes(),2)})),V("Hmmss",0,0,(function(){return""+this.hours()+M(this.minutes(),2)+M(this.seconds(),2)})),Zt("a",!0),Zt("A",!1),ne("hour","h"),oe("hour",13),Ae("a",en),Ae("A",en),Ae("H",be),Ae("h",be),Ae("k",be),Ae("HH",be,ge),Ae("hh",be,ge),Ae("kk",be,ge),Ae("hmm",xe),Ae("hmmss",Ee),Ae("Hmm",xe),Ae("Hmmss",Ee),Ue(["H","HH"],Ge),Ue(["k","kk"],(function(e,t,n){var r=le(e);t[Ge]=24===r?0:r})),Ue(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Ue(["h","hh"],(function(e,t,n){t[Ge]=le(e),m(n).bigHour=!0})),Ue("hmm",(function(e,t,n){var r=e.length-2;t[Ge]=le(e.substr(0,r)),t[Ke]=le(e.substr(r)),m(n).bigHour=!0})),Ue("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ge]=le(e.substr(0,r)),t[Ke]=le(e.substr(r,2)),t[Ye]=le(e.substr(i)),m(n).bigHour=!0})),Ue("Hmm",(function(e,t,n){var r=e.length-2;t[Ge]=le(e.substr(0,r)),t[Ke]=le(e.substr(r))})),Ue("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ge]=le(e.substr(0,r)),t[Ke]=le(e.substr(r,2)),t[Ye]=le(e.substr(i))}));var nn=/[ap]\.?m?\.?/i,rn=fe("Hours",!0);function an(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var on,sn={calendar:O,longDateFormat:H,invalidDate:K,ordinal:Q,dayOfMonthOrdinalParse:$,relativeTime:J,months:et,monthsShort:tt,week:St,weekdays:Ot,weekdaysMin:Mt,weekdaysShort:At,meridiemParse:nn},un={},cn={};function ln(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function fn(e){return e?e.toLowerCase().replace("_","-"):e}function hn(e){for(var t,n,r,i,a=0;a<e.length;){for(t=(i=fn(e[a]).split("-")).length,n=(n=fn(e[a+1]))?n.split("-"):null;t>0;){if(r=pn(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&ln(i,n)>=t-1)break;t--}a++}return on}function dn(e){return null!=e.match("^[^/\\\\]*$")}function pn(t){var n=null;if(void 0===un[t]&&e&&e.exports&&dn(t))try{n=on._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),vn(n)}catch(r){un[t]=null}return un[t]}function vn(e,t){var n;return e&&((n=c(t)?gn(e):mn(e,t))?on=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),on._abbr}function mn(e,t){if(null!==t){var n,r=sn;if(t.abbr=e,null!=un[e])I("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[e]._config;else if(null!=t.parentLocale)if(null!=un[t.parentLocale])r=un[t.parentLocale]._config;else{if(null==(n=pn(t.parentLocale)))return cn[t.parentLocale]||(cn[t.parentLocale]=[]),cn[t.parentLocale].push({name:e,config:t}),null;r=n._config}return un[e]=new D(P(r,t)),cn[e]&&cn[e].forEach((function(e){mn(e.name,e.config)})),vn(e),un[e]}return delete un[e],null}function yn(e,t){if(null!=t){var n,r,i=sn;null!=un[e]&&null!=un[e].parentLocale?un[e].set(P(un[e]._config,t)):(null!=(r=pn(e))&&(i=r._config),t=P(i,t),null==r&&(t.abbr=e),(n=new D(t)).parentLocale=un[e],un[e]=n),vn(e)}else null!=un[e]&&(null!=un[e].parentLocale?(un[e]=un[e].parentLocale,e===vn()&&vn(e)):null!=un[e]&&delete un[e]);return un[e]}function gn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return on;if(!a(e)){if(t=pn(e))return t;e=[e]}return hn(e)}function kn(){return T(un)}function _n(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[We]<0||n[We]>11?We:n[He]<1||n[He]>Ze(n[ze],n[We])?He:n[Ge]<0||n[Ge]>24||24===n[Ge]&&(0!==n[Ke]||0!==n[Ye]||0!==n[Qe])?Ge:n[Ke]<0||n[Ke]>59?Ke:n[Ye]<0||n[Ye]>59?Ye:n[Qe]<0||n[Qe]>999?Qe:-1,m(e)._overflowDayOfYear&&(t<ze||t>He)&&(t=He),m(e)._overflowWeeks&&-1===t&&(t=$e),m(e)._overflowWeekday&&-1===t&&(t=Xe),m(e).overflow=t),e}var wn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xn=/Z|[+-]\d\d(?::?\d\d)?/,En=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Sn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Tn=/^\/?Date\((-?\d+)/i,Cn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,In={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Nn(e){var t,n,r,i,a,o,s=e._i,u=wn.exec(s)||bn.exec(s),c=En.length,l=Sn.length;if(u){for(m(e).iso=!0,t=0,n=c;t<n;t++)if(En[t][1].exec(u[1])){i=En[t][0],r=!1!==En[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=l;t<n;t++)if(Sn[t][1].exec(u[3])){a=(u[2]||" ")+Sn[t][0];break}if(null==a)return void(e._isValid=!1)}if(!r&&null!=a)return void(e._isValid=!1);if(u[4]){if(!xn.exec(u[4]))return void(e._isValid=!1);o="Z"}e._f=i+(a||"")+(o||""),Bn(e)}else e._isValid=!1}function Rn(e,t,n,r,i,a){var o=[Pn(e),tt.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return a&&o.push(parseInt(a,10)),o}function Pn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Dn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function On(e,t,n){return!e||At.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}function An(e,t,n){if(e)return In[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Mn(e){var t,n=Cn.exec(Dn(e._i));if(n){if(t=Rn(n[4],n[3],n[2],n[5],n[6],n[7]),!On(n[1],t,e))return;e._a=t,e._tzm=An(n[8],n[9],n[10]),e._d=kt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function Ln(e){var t=Tn.exec(e._i);null===t?(Nn(e),!1===e._isValid&&(delete e._isValid,Mn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Fn(e,t,n){return null!=e?e:null!=t?t:n}function jn(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Un(e){var t,n,r,i,a,o=[];if(!e._d){for(r=jn(e),e._w&&null==e._a[He]&&null==e._a[We]&&Vn(e),null!=e._dayOfYear&&(a=Fn(e._a[ze],r[ze]),(e._dayOfYear>vt(a)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),n=kt(a,0,e._dayOfYear),e._a[We]=n.getUTCMonth(),e._a[He]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=o[t]=r[t];for(;t<7;t++)e._a[t]=o[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ge]&&0===e._a[Ke]&&0===e._a[Ye]&&0===e._a[Qe]&&(e._nextDay=!0,e._a[Ge]=0),e._d=(e._useUTC?kt:gt).apply(null,o),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ge]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(m(e).weekdayMismatch=!0)}}function Vn(e){var t,n,r,i,a,o,s,u,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(a=1,o=4,n=Fn(t.GG,e._a[ze],bt(Qn(),1,4).year),r=Fn(t.W,1),((i=Fn(t.E,1))<1||i>7)&&(u=!0)):(a=e._locale._week.dow,o=e._locale._week.doy,c=bt(Qn(),a,o),n=Fn(t.gg,e._a[ze],c.year),r=Fn(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+a,(t.e<0||t.e>6)&&(u=!0)):i=a),r<1||r>xt(n,a,o)?m(e)._overflowWeeks=!0:null!=u?m(e)._overflowWeekday=!0:(s=wt(n,r,i,a,o),e._a[ze]=s.year,e._dayOfYear=s.dayOfYear)}function Bn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],m(e).empty=!0;var t,n,i,a,o,s,u,c=""+e._i,l=c.length,f=0;for(u=(i=W(e._f,e._locale).match(L)||[]).length,t=0;t<u;t++)a=i[t],(n=(c.match(Me(a,e))||[])[0])&&((o=c.substr(0,c.indexOf(n))).length>0&&m(e).unusedInput.push(o),c=c.slice(c.indexOf(n)+n.length),f+=n.length),U[a]?(n?m(e).empty=!1:m(e).unusedTokens.push(a),Be(a,n,e)):e._strict&&!n&&m(e).unusedTokens.push(a);m(e).charsLeftOver=l-f,c.length>0&&m(e).unusedInput.push(c),e._a[Ge]<=12&&!0===m(e).bigHour&&e._a[Ge]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[Ge]=qn(e._locale,e._a[Ge],e._meridiem),null!==(s=m(e).era)&&(e._a[ze]=e._locale.erasConvertYear(s,e._a[ze])),Un(e),_n(e)}else Mn(e);else Nn(e)}function qn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function zn(e){var t,n,r,i,a,o,s=!1,u=e._f.length;if(0===u)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<u;i++)a=0,o=!1,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Bn(t),y(t)&&(o=!0),a+=m(t).charsLeftOver,a+=10*m(t).unusedTokens.length,m(t).score=a,s?a<r&&(r=a,n=t):(null==r||a<r||o)&&(r=a,n=t,o&&(s=!0));d(e,n||t)}function Wn(e){if(!e._d){var t=ie(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Un(e)}}function Hn(e){var t=new b(_n(Gn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Gn(e){var t=e._i,n=e._f;return e._locale=e._locale||gn(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),x(t)?new b(_n(t)):(f(t)?e._d=t:a(n)?zn(e):n?Bn(e):Kn(e),y(e)||(e._d=null),e))}function Kn(e){var t=e._i;c(t)?e._d=new Date(r.now()):f(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Ln(e):a(t)?(e._a=h(t.slice(0),(function(e){return parseInt(e,10)})),Un(e)):o(t)?Wn(e):l(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Yn(e,t,n,r,i){var s={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(o(e)&&u(e)||a(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,Hn(s)}function Qn(e,t,n,r){return Yn(e,t,n,r,!1)}r.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var $n=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Qn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()})),Xn=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Qn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}));function Jn(e,t){var n,r;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return Qn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Zn(){return Jn("isBefore",[].slice.call(arguments,0))}function er(){return Jn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,i=nr.length;for(t in e)if(s(e,t)&&(-1===qe.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==le(e[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function ar(){return Ir(NaN)}function or(e){var t=ie(e),n=t.year||0,r=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,o=t.day||0,s=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*s*60*60,this._days=+o+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=gn(),this._bubble()}function sr(e){return e instanceof or}function ur(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function cr(e,t,n){var r,i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&le(e[r])!==le(t[r]))&&o++;return o+a}function lr(e,t){V(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+M(~~(e/60),2)+t+M(~~e%60,2)}))}lr("Z",":"),lr("ZZ",""),Ae("Z",Pe),Ae("ZZ",Pe),Ue(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=hr(Pe,e)}));var fr=/([\+\-]|\d\d)/gi;function hr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(fr)||["-",0,0])[1]+le(n[2]))?0:"+"===n[0]?r:-r}function dr(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(x(e)||f(e)?e.valueOf():Qn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Qn(e).local()}function pr(e){return-Math.round(e._d.getTimezoneOffset())}function vr(e,t,n){var i,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=hr(Pe,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=pr(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==e&&(!t||this._changeInProgress?Or(this,Ir(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:pr(this)}function mr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function yr(e){return this.utcOffset(0,e)}function gr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pr(this),"m")),this}function kr(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=hr(Re,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function _r(e){return!!this.isValid()&&(e=e?Qn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function wr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function br(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return w(t,this),(t=Gn(t))._a?(e=t._isUTC?p(t._a):Qn(t._a),this._isDSTShifted=this.isValid()&&cr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function xr(){return!!this.isValid()&&!this._isUTC}function Er(){return!!this.isValid()&&this._isUTC}function Sr(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Tr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Cr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ir(e,t){var n,r,i,a=e,o=null;return sr(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:l(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(o=Tr.exec(e))?(n="-"===o[1]?-1:1,a={y:0,d:le(o[He])*n,h:le(o[Ge])*n,m:le(o[Ke])*n,s:le(o[Ye])*n,ms:le(ur(1e3*o[Qe]))*n}):(o=Cr.exec(e))?(n="-"===o[1]?-1:1,a={y:Nr(o[2],n),M:Nr(o[3],n),w:Nr(o[4],n),d:Nr(o[5],n),h:Nr(o[6],n),m:Nr(o[7],n),s:Nr(o[8],n)}):null==a?a={}:"object"===typeof a&&("from"in a||"to"in a)&&(i=Pr(Qn(a.from),Qn(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),r=new or(a),sr(e)&&s(e,"_locale")&&(r._locale=e._locale),sr(e)&&s(e,"_isValid")&&(r._isValid=e._isValid),r}function Nr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Rr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Pr(e,t){var n;return e.isValid()&&t.isValid()?(t=dr(t,e),e.isBefore(t)?n=Rr(e,t):((n=Rr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Dr(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(I(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Or(this,Ir(n,r),e),this}}function Or(e,t,n,i){var a=t._milliseconds,o=ur(t._days),s=ur(t._months);e.isValid()&&(i=null==i||i,s&&ct(e,he(e,"Month")+s*n),o&&de(e,"Date",he(e,"Date")+o*n),a&&e._d.setTime(e._d.valueOf()+a*n),i&&r.updateOffset(e,o||s))}Ir.fn=or.prototype,Ir.invalid=ar;var Ar=Dr(1,"add"),Mr=Dr(-1,"subtract");function Lr(e){return"string"===typeof e||e instanceof String}function Fr(e){return x(e)||f(e)||Lr(e)||l(e)||Ur(e)||jr(e)||null===e||void 0===e}function jr(e){var t,n,r=o(e)&&!u(e),i=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=a.length;for(t=0;t<c;t+=1)n=a[t],i=i||s(e,n);return r&&i}function Ur(e){var t=a(e),n=!1;return t&&(n=0===e.filter((function(t){return!l(t)&&Lr(e)})).length),t&&n}function Vr(e){var t,n,r=o(e)&&!u(e),i=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<a.length;t+=1)n=a[t],i=i||s(e,n);return r&&i}function Br(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function qr(e,t){1===arguments.length&&(arguments[0]?Fr(arguments[0])?(e=arguments[0],t=void 0):Vr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Qn(),i=dr(n,this).startOf("day"),a=r.calendarFormat(this,i)||"sameElse",o=t&&(N(t[a])?t[a].call(this,n):t[a]);return this.format(o||this.localeData().calendar(a,this,Qn(n)))}function zr(){return new b(this)}function Wr(e,t){var n=x(e)?e:Qn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Hr(e,t){var n=x(e)?e:Qn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Gr(e,t,n,r){var i=x(e)?e:Qn(e),a=x(t)?t:Qn(t);return!!(this.isValid()&&i.isValid()&&a.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n))}function Kr(e,t){var n,r=x(e)?e:Qn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Yr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Qr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function $r(e,t,n){var r,i,a;if(!this.isValid())return NaN;if(!(r=dr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=re(t)){case"year":a=Xr(this,r)/12;break;case"month":a=Xr(this,r);break;case"quarter":a=Xr(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-i)/864e5;break;case"week":a=(this-r-i)/6048e5;break;default:a=this-r}return n?a:ce(a)}function Xr(e,t){if(e.date()<t.date())return-Xr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Jr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Zr(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?z(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):N(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",z(n,"Z")):z(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",a="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=a+'[")]',this.format(e+t+n+r)}function ti(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=z(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(x(e)&&e.isValid()||Qn(e).isValid())?Ir({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ri(e){return this.from(Qn(),e)}function ii(e,t){return this.isValid()&&(x(e)&&e.isValid()||Qn(e).isValid())?Ir({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ai(e){return this.to(Qn(),e)}function oi(e){var t;return void 0===e?this._locale._abbr:(null!=(t=gn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var si=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ui(){return this._locale}var ci=1e3,li=60*ci,fi=60*li,hi=3506328*fi;function di(e,t){return(e%t+t)%t}function pi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-hi:new Date(e,t,n).valueOf()}function vi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-hi:Date.UTC(e,t,n)}function mi(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vi:pi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=di(t+(this._isUTC?0:this.utcOffset()*li),fi);break;case"minute":t=this._d.valueOf(),t-=di(t,li);break;case"second":t=this._d.valueOf(),t-=di(t,ci)}return this._d.setTime(t),r.updateOffset(this,!0),this}function yi(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vi:pi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=fi-di(t+(this._isUTC?0:this.utcOffset()*li),fi)-1;break;case"minute":t=this._d.valueOf(),t+=li-di(t,li)-1;break;case"second":t=this._d.valueOf(),t+=ci-di(t,ci)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function gi(){return this._d.valueOf()-6e4*(this._offset||0)}function ki(){return Math.floor(this.valueOf()/1e3)}function _i(){return new Date(this.valueOf())}function wi(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function bi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function xi(){return this.isValid()?this.toISOString():null}function Ei(){return y(this)}function Si(){return d({},m(this))}function Ti(){return m(this).overflow}function Ci(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ii(e,t){var n,i,a,o=this._eras||gn("en")._eras;for(n=0,i=o.length;n<i;++n)switch("string"===typeof o[n].since&&(a=r(o[n].since).startOf("day"),o[n].since=a.valueOf()),typeof o[n].until){case"undefined":o[n].until=1/0;break;case"string":a=r(o[n].until).startOf("day").valueOf(),o[n].until=a.valueOf()}return o}function Ni(e,t,n){var r,i,a,o,s,u=this.eras();for(e=e.toUpperCase(),r=0,i=u.length;r<i;++r)if(a=u[r].name.toUpperCase(),o=u[r].abbr.toUpperCase(),s=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return u[r];break;case"NNNN":if(a===e)return u[r];break;case"NNNNN":if(s===e)return u[r]}else if([a,o,s].indexOf(e)>=0)return u[r]}function Ri(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Pi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Di(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Oi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Ai(){var e,t,n,i,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=a[e].since<=a[e].until?1:-1,i=this.clone().startOf("day").valueOf(),a[e].since<=i&&i<=a[e].until||a[e].until<=i&&i<=a[e].since)return(this.year()-r(a[e].since).year())*n+a[e].offset;return this.year()}function Mi(e){return s(this,"_erasNameRegex")||qi.call(this),e?this._erasNameRegex:this._erasRegex}function Li(e){return s(this,"_erasAbbrRegex")||qi.call(this),e?this._erasAbbrRegex:this._erasRegex}function Fi(e){return s(this,"_erasNarrowRegex")||qi.call(this),e?this._erasNarrowRegex:this._erasRegex}function ji(e,t){return t.erasAbbrRegex(e)}function Ui(e,t){return t.erasNameRegex(e)}function Vi(e,t){return t.erasNarrowRegex(e)}function Bi(e,t){return t._eraYearOrdinalRegex||Ie}function qi(){var e,t,n=[],r=[],i=[],a=[],o=this.eras();for(e=0,t=o.length;e<t;++e)r.push(Fe(o[e].name)),n.push(Fe(o[e].abbr)),i.push(Fe(o[e].narrow)),a.push(Fe(o[e].name)),a.push(Fe(o[e].abbr)),a.push(Fe(o[e].narrow));this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function zi(e,t){V(0,[e,e.length],0,t)}function Wi(e){return $i.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Hi(e){return $i.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Gi(){return xt(this.year(),1,4)}function Ki(){return xt(this.isoWeekYear(),1,4)}function Yi(){var e=this.localeData()._week;return xt(this.year(),e.dow,e.doy)}function Qi(){var e=this.localeData()._week;return xt(this.weekYear(),e.dow,e.doy)}function $i(e,t,n,r,i){var a;return null==e?bt(this,r,i).year:(t>(a=xt(e,r,i))&&(t=a),Xi.call(this,e,t,n,r,i))}function Xi(e,t,n,r,i){var a=wt(e,t,n,r,i),o=kt(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Ji(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}V("N",0,0,"eraAbbr"),V("NN",0,0,"eraAbbr"),V("NNN",0,0,"eraAbbr"),V("NNNN",0,0,"eraName"),V("NNNNN",0,0,"eraNarrow"),V("y",["y",1],"yo","eraYear"),V("y",["yy",2],0,"eraYear"),V("y",["yyy",3],0,"eraYear"),V("y",["yyyy",4],0,"eraYear"),Ae("N",ji),Ae("NN",ji),Ae("NNN",ji),Ae("NNNN",Ui),Ae("NNNNN",Vi),Ue(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?m(n).era=i:m(n).invalidEra=e})),Ae("y",Ie),Ae("yy",Ie),Ae("yyy",Ie),Ae("yyyy",Ie),Ae("yo",Bi),Ue(["y","yy","yyy","yyyy"],ze),Ue(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[ze]=n._locale.eraYearOrdinalParse(e,i):t[ze]=parseInt(e,10)})),V(0,["gg",2],0,(function(){return this.weekYear()%100})),V(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),zi("gggg","weekYear"),zi("ggggg","weekYear"),zi("GGGG","isoWeekYear"),zi("GGGGG","isoWeekYear"),ne("weekYear","gg"),ne("isoWeekYear","GG"),oe("weekYear",1),oe("isoWeekYear",1),Ae("G",Ne),Ae("g",Ne),Ae("GG",be,ge),Ae("gg",be,ge),Ae("GGGG",Te,_e),Ae("gggg",Te,_e),Ae("GGGGG",Ce,we),Ae("ggggg",Ce,we),Ve(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=le(e)})),Ve(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),V("Q",0,"Qo","quarter"),ne("quarter","Q"),oe("quarter",7),Ae("Q",ye),Ue("Q",(function(e,t){t[We]=3*(le(e)-1)})),V("D",["DD",2],"Do","date"),ne("date","D"),oe("date",9),Ae("D",be),Ae("DD",be,ge),Ae("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Ue(["D","DD"],He),Ue("Do",(function(e,t){t[He]=le(e.match(be)[0])}));var Zi=fe("Date",!0);function ea(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}V("DDD",["DDDD",3],"DDDo","dayOfYear"),ne("dayOfYear","DDD"),oe("dayOfYear",4),Ae("DDD",Se),Ae("DDDD",ke),Ue(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=le(e)})),V("m",["mm",2],0,"minute"),ne("minute","m"),oe("minute",14),Ae("m",be),Ae("mm",be,ge),Ue(["m","mm"],Ke);var ta=fe("Minutes",!1);V("s",["ss",2],0,"second"),ne("second","s"),oe("second",15),Ae("s",be),Ae("ss",be,ge),Ue(["s","ss"],Ye);var na,ra,ia=fe("Seconds",!1);for(V("S",0,0,(function(){return~~(this.millisecond()/100)})),V(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),V(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),V(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),V(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),V(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),V(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),ne("millisecond","ms"),oe("millisecond",16),Ae("S",Se,ye),Ae("SS",Se,ge),Ae("SSS",Se,ke),na="SSSS";na.length<=9;na+="S")Ae(na,Ie);function aa(e,t){t[Qe]=le(1e3*("0."+e))}for(na="S";na.length<=9;na+="S")Ue(na,aa);function oa(){return this._isUTC?"UTC":""}function sa(){return this._isUTC?"Coordinated Universal Time":""}ra=fe("Milliseconds",!1),V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var ua=b.prototype;function ca(e){return Qn(1e3*e)}function la(){return Qn.apply(null,arguments).parseZone()}function fa(e){return e}ua.add=Ar,ua.calendar=qr,ua.clone=zr,ua.diff=$r,ua.endOf=yi,ua.format=ti,ua.from=ni,ua.fromNow=ri,ua.to=ii,ua.toNow=ai,ua.get=pe,ua.invalidAt=Ti,ua.isAfter=Wr,ua.isBefore=Hr,ua.isBetween=Gr,ua.isSame=Kr,ua.isSameOrAfter=Yr,ua.isSameOrBefore=Qr,ua.isValid=Ei,ua.lang=si,ua.locale=oi,ua.localeData=ui,ua.max=Xn,ua.min=$n,ua.parsingFlags=Si,ua.set=ve,ua.startOf=mi,ua.subtract=Mr,ua.toArray=wi,ua.toObject=bi,ua.toDate=_i,ua.toISOString=Zr,ua.inspect=ei,"undefined"!==typeof Symbol&&null!=Symbol.for&&(ua[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ua.toJSON=xi,ua.toString=Jr,ua.unix=ki,ua.valueOf=gi,ua.creationData=Ci,ua.eraName=Pi,ua.eraNarrow=Di,ua.eraAbbr=Oi,ua.eraYear=Ai,ua.year=mt,ua.isLeapYear=yt,ua.weekYear=Wi,ua.isoWeekYear=Hi,ua.quarter=ua.quarters=Ji,ua.month=lt,ua.daysInMonth=ft,ua.week=ua.weeks=It,ua.isoWeek=ua.isoWeeks=Nt,ua.weeksInYear=Yi,ua.weeksInWeekYear=Qi,ua.isoWeeksInYear=Gi,ua.isoWeeksInISOWeekYear=Ki,ua.date=Zi,ua.day=ua.days=Wt,ua.weekday=Ht,ua.isoWeekday=Gt,ua.dayOfYear=ea,ua.hour=ua.hours=rn,ua.minute=ua.minutes=ta,ua.second=ua.seconds=ia,ua.millisecond=ua.milliseconds=ra,ua.utcOffset=vr,ua.utc=yr,ua.local=gr,ua.parseZone=kr,ua.hasAlignedHourOffset=_r,ua.isDST=wr,ua.isLocal=xr,ua.isUtcOffset=Er,ua.isUtc=Sr,ua.isUTC=Sr,ua.zoneAbbr=oa,ua.zoneName=sa,ua.dates=S("dates accessor is deprecated. Use date instead.",Zi),ua.months=S("months accessor is deprecated. Use month instead",lt),ua.years=S("years accessor is deprecated. Use year instead",mt),ua.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",mr),ua.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",br);var ha=D.prototype;function da(e,t,n,r){var i=gn(),a=p().set(r,t);return i[n](a,e)}function pa(e,t,n){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return da(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=da(e,r,n,"month");return i}function va(e,t,n,r){"boolean"===typeof e?(l(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,l(t)&&(n=t,t=void 0),t=t||"");var i,a=gn(),o=e?a._week.dow:0,s=[];if(null!=n)return da(t,(n+o)%7,r,"day");for(i=0;i<7;i++)s[i]=da(t,(i+o)%7,r,"day");return s}function ma(e,t){return pa(e,t,"months")}function ya(e,t){return pa(e,t,"monthsShort")}function ga(e,t,n){return va(e,t,n,"weekdays")}function ka(e,t,n){return va(e,t,n,"weekdaysShort")}function _a(e,t,n){return va(e,t,n,"weekdaysMin")}ha.calendar=A,ha.longDateFormat=G,ha.invalidDate=Y,ha.ordinal=X,ha.preparse=fa,ha.postformat=fa,ha.relativeTime=Z,ha.pastFuture=ee,ha.set=R,ha.eras=Ii,ha.erasParse=Ni,ha.erasConvertYear=Ri,ha.erasAbbrRegex=Li,ha.erasNameRegex=Mi,ha.erasNarrowRegex=Fi,ha.months=at,ha.monthsShort=ot,ha.monthsParse=ut,ha.monthsRegex=dt,ha.monthsShortRegex=ht,ha.week=Et,ha.firstDayOfYear=Ct,ha.firstDayOfWeek=Tt,ha.weekdays=Ut,ha.weekdaysMin=Bt,ha.weekdaysShort=Vt,ha.weekdaysParse=zt,ha.weekdaysRegex=Kt,ha.weekdaysShortRegex=Yt,ha.weekdaysMinRegex=Qt,ha.isPM=tn,ha.meridiem=an,vn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===le(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=S("moment.lang is deprecated. Use moment.locale instead.",vn),r.langData=S("moment.langData is deprecated. Use moment.localeData instead.",gn);var wa=Math.abs;function ba(){var e=this._data;return this._milliseconds=wa(this._milliseconds),this._days=wa(this._days),this._months=wa(this._months),e.milliseconds=wa(e.milliseconds),e.seconds=wa(e.seconds),e.minutes=wa(e.minutes),e.hours=wa(e.hours),e.months=wa(e.months),e.years=wa(e.years),this}function xa(e,t,n,r){var i=Ir(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Ea(e,t){return xa(this,e,t,1)}function Sa(e,t){return xa(this,e,t,-1)}function Ta(e){return e<0?Math.floor(e):Math.ceil(e)}function Ca(){var e,t,n,r,i,a=this._milliseconds,o=this._days,s=this._months,u=this._data;return a>=0&&o>=0&&s>=0||a<=0&&o<=0&&s<=0||(a+=864e5*Ta(Na(s)+o),o=0,s=0),u.milliseconds=a%1e3,e=ce(a/1e3),u.seconds=e%60,t=ce(e/60),u.minutes=t%60,n=ce(t/60),u.hours=n%24,o+=ce(n/24),s+=i=ce(Ia(o)),o-=Ta(Na(i)),r=ce(s/12),s%=12,u.days=o,u.months=s,u.years=r,this}function Ia(e){return 4800*e/146097}function Na(e){return 146097*e/4800}function Ra(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=re(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Ia(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Na(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Pa(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*le(this._months/12):NaN}function Da(e){return function(){return this.as(e)}}var Oa=Da("ms"),Aa=Da("s"),Ma=Da("m"),La=Da("h"),Fa=Da("d"),ja=Da("w"),Ua=Da("M"),Va=Da("Q"),Ba=Da("y");function qa(){return Ir(this)}function za(e){return e=re(e),this.isValid()?this[e+"s"]():NaN}function Wa(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ha=Wa("milliseconds"),Ga=Wa("seconds"),Ka=Wa("minutes"),Ya=Wa("hours"),Qa=Wa("days"),$a=Wa("months"),Xa=Wa("years");function Ja(){return ce(this.days()/7)}var Za=Math.round,eo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function to(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function no(e,t,n,r){var i=Ir(e).abs(),a=Za(i.as("s")),o=Za(i.as("m")),s=Za(i.as("h")),u=Za(i.as("d")),c=Za(i.as("M")),l=Za(i.as("w")),f=Za(i.as("y")),h=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(h=h||l<=1&&["w"]||l<n.w&&["ww",l]),(h=h||c<=1&&["M"]||c<n.M&&["MM",c]||f<=1&&["y"]||["yy",f])[2]=t,h[3]=+e>0,h[4]=r,to.apply(null,h)}function ro(e){return void 0===e?Za:"function"===typeof e&&(Za=e,!0)}function io(e,t){return void 0!==eo[e]&&(void 0===t?eo[e]:(eo[e]=t,"s"===e&&(eo.ss=t-1),!0))}function ao(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,a=eo;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(a=Object.assign({},eo,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),r=no(this,!i,a,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var oo=Math.abs;function so(e){return(e>0)-(e<0)||+e}function uo(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,a,o,s,u=oo(this._milliseconds)/1e3,c=oo(this._days),l=oo(this._months),f=this.asSeconds();return f?(e=ce(u/60),t=ce(e/60),u%=60,e%=60,n=ce(l/12),l%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=f<0?"-":"",a=so(this._months)!==so(f)?"-":"",o=so(this._days)!==so(f)?"-":"",s=so(this._milliseconds)!==so(f)?"-":"",i+"P"+(n?a+n+"Y":"")+(l?a+l+"M":"")+(c?o+c+"D":"")+(t||e||u?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(u?s+r+"S":"")):"P0D"}var co=or.prototype;return co.isValid=ir,co.abs=ba,co.add=Ea,co.subtract=Sa,co.as=Ra,co.asMilliseconds=Oa,co.asSeconds=Aa,co.asMinutes=Ma,co.asHours=La,co.asDays=Fa,co.asWeeks=ja,co.asMonths=Ua,co.asQuarters=Va,co.asYears=Ba,co.valueOf=Pa,co._bubble=Ca,co.clone=qa,co.get=za,co.milliseconds=Ha,co.seconds=Ga,co.minutes=Ka,co.hours=Ya,co.days=Qa,co.weeks=Ja,co.months=$a,co.years=Xa,co.humanize=ao,co.toISOString=uo,co.toString=uo,co.toJSON=uo,co.locale=oi,co.localeData=ui,co.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",uo),co.lang=si,V("X",0,0,"unix"),V("x",0,0,"valueOf"),Ae("x",Ne),Ae("X",De),Ue("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Ue("x",(function(e,t,n){n._d=new Date(le(e))})),r.version="2.29.4",i(Qn),r.fn=ua,r.min=Zn,r.max=er,r.now=tr,r.utc=p,r.unix=ca,r.months=ma,r.isDate=f,r.locale=vn,r.invalid=g,r.duration=Ir,r.isMoment=x,r.weekdays=ga,r.parseZone=la,r.localeData=gn,r.isDuration=sr,r.monthsShort=ya,r.weekdaysMin=_a,r.defineLocale=mn,r.updateLocale=yn,r.locales=kn,r.weekdaysShort=ka,r.normalizeUnits=re,r.relativeTimeRounding=ro,r.relativeTimeThreshold=io,r.calendarFormat=Br,r.prototype=ua,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=60103,x=60106,E=60107,S=60108,T=60114,C=60109,I=60110,N=60112,R=60113,P=60120,D=60115,O=60116,A=60121,M=60128,L=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;b=U("react.element"),x=U("react.portal"),E=U("react.fragment"),S=U("react.strict_mode"),T=U("react.profiler"),C=U("react.provider"),I=U("react.context"),N=U("react.forward_ref"),R=U("react.suspense"),P=U("react.suspense_list"),D=U("react.memo"),O=U("react.lazy"),A=U("react.block"),U("react.scope"),M=U("react.opaque.id"),L=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var V,B="function"===typeof Symbol&&Symbol.iterator;function q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var W=!1;function H(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function G(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case T:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case D:return K(e.type);case A:return K(e._render);case O:t=e._payload,e=e._init;try{return K(e(t))}catch(n){}}return null}function Y(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Y(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Y(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Y(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Y(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Y(n)}}function ce(e,t){var n=Y(t.value),r=Y(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ie=null,Ne=null;function Re(e){if(e=ri(e)){if("function"!==typeof Ce)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Ce(e.stateNode,e.type,t))}}function Pe(e){Ie?Ne?Ne.push(e):Ne=[e]:Ie=e}function De(){if(Ie){var e=Ie,t=Ne;if(Ne=Ie=null,Re(e),t)for(e=0;e<t.length;e++)Re(t[e])}}function Oe(e,t){return e(t)}function Ae(e,t,n,r,i){return e(t,n,r,i)}function Me(){}var Le=Oe,Fe=!1,je=!1;function Ue(){null===Ie&&null===Ne||(Me(),De())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Be=!1;if(f)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Be=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(me){Be=!1}function ze(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,He=null,Ge=!1,Ke=null,Ye={onError:function(e){We=!0,He=e}};function Qe(e,t,n,r,i,a,o,s,u){We=!1,He=null,ze.apply(Ye,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if($e(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function _t(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,_t)))}function bt(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},St={},Tt={};function Ct(e){if(St[e])return St[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return St[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var It=Ct("animationend"),Nt=Ct("animationiteration"),Rt=Ct("animationstart"),Pt=Ct("transitionend"),Dt=new Map,Ot=new Map,At=["abort","abort",It,"animationEnd",Nt,"animationIteration",Rt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Pt,"transitionEnd","waiting","waiting"];function Mt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Dt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Lt=8;function Ft(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function jt(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Lt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Ft(u),i=Lt):0!==(s&=a)&&(r=Ft(s),i=Lt)}else 0!==(a=n&~o)?(r=Ft(a),i=Lt):0!==s&&(r=Ft(s),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Bt(24&~t))?Vt(10,t):e;case 10:return 0===(e=Bt(192&~t))?Vt(8,t):e;case 8:return 0===(e=Bt(3584&~t))&&(0===(e=Bt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Bt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Bt(e){return e&-e}function qt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Gt|0)|0},Ht=Math.log,Gt=Math.LN2;var Kt=a.unstable_UserBlockingPriority,Yt=a.unstable_runWithPriority,Qt=!0;function $t(e,t,n,r){Fe||Me();var i=Jt,a=Fe;Fe=!0;try{Ae(i,e,t,n,r)}finally{(Fe=a)||Ue()}}function Xt(e,t,n,r){Yt(Kt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Qt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,mt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Mr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=$e(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Mr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(hn),pn=i({},hn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=un(mn),gn=un(i({},mn,{dataTransfer:0})),kn=un(i({},pn,{relatedTarget:0})),_n=un(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=un(wn),xn=un(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function In(){return Cn}var Nn=i({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=un(Nn),Pn=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),On=un(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=un(An),Ln=[9,13,27,32],Fn=f&&"CompositionEvent"in window,jn=null;f&&"documentMode"in document&&(jn=document.documentMode);var Un=f&&"TextEvent"in window&&!jn,Vn=f&&(!Fn||jn&&8<jn&&11>=jn),Bn=String.fromCharCode(32),qn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Yn(e,t,n,r){Pe(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,$n=null;function Xn(e){Nr(e,0)}function Jn(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Qn&&(Qn.detachEvent("onpropertychange",ar),$n=Qn=null)}function ar(e){if("value"===e.propertyName&&Jn($n)){var t=[];if(Yn(t,$n,e,Te(e)),e=Xn,Fe)e(t);else{Fe=!0;try{Oe(e,t)}finally{Fe=!1,Ue()}}}}function or(e,t,n){"focusin"===e?(ir(),$n=n,(Qn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn($n)}function ur(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,_r=null,wr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==kr||kr!==J(r)||("selectionStart"in(r=kr)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Fr(_r,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Mt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Mt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Mt(At,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<Er.length;Sr++)Ot.set(Er[Sr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Ir(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Qe.apply(this,arguments),We){if(!We)throw Error(o(198));var l=He;We=!1,He=null,Ge||(Ge=!0,Ke=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Ir(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Ir(i,s,c),a=u}}}if(Ge)throw e=Ke,Ge=!1,Ke=null,e}function Rr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Ar(t,e,2,!1),n.add(r))}var Pr="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Pr]||(e[Pr]=!0,s.forEach((function(t){Cr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Cr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Ar(a,e,i,t),o.add(s))}function Ar(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Be||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(je)return e(t,n);je=!0;try{Le(e,t,n)}finally{je=!1,Ue()}}((function(){var r=a,i=Te(n),o=[];e:{var s=Dt.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Rn;break;case"focusin":c="focus",u=kn;break;case"focusout":c="blur",u=kn;break;case"beforeblur":case"afterblur":u=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Dn;break;case It:case Nt:case Rt:u=_n;break;case Pt:u=On;break;case"scroll":u=vn;break;case"wheel":u=Mn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Pn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Lr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Pn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=jr(d))p++;for(d=0,v=h;v;v=jr(v))d++;for(;0<p-d;)l=jr(l),p--;for(;0<d-p;)h=jr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=jr(l),h=jr(h)}l=null}else l=null;null!==u&&Ur(o,s,u,l,!1),null!==c&&null!==f&&Ur(o,f,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Zn;else if(Kn(s))if(er)m=cr;else{m=sr;var y=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Yn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?ii(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(kr=y,_r=r,wr=null);break;case"focusout":wr=_r=kr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Hn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Hn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(y=Fr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Wn(n))&&(k.data=g))),(g=Un?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(qn=!0,Bn);case"textInput":return(e=t.data)===Bn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Lr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Lr(e,a,i))),e=e.return}return r}function jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ve(n,a))&&o.unshift(Lr(n,u,s)):i||null!=(u=Ve(n,a))&&o.push(Lr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var Br=null,qr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Kr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Yr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Qr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Qr(e);null!==e;){if(n=e[Jr])return n;e=Qr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function fi(e,t){ui++,si[ui]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,K(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=_i(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var xi=null,Ei=null,Si=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Ci=a.unstable_cancelCallback,Ii=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ri=a.unstable_now,Pi=a.unstable_getCurrentPriorityLevel,Di=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Ai=a.unstable_NormalPriority,Mi=a.unstable_LowPriority,Li=a.unstable_IdlePriority,Fi={},ji=void 0!==Ni?Ni:function(){},Ui=null,Vi=null,Bi=!1,qi=Ri(),zi=1e4>qi?Ri:function(){return Ri()-qi};function Wi(){switch(Pi()){case Di:return 99;case Oi:return 98;case Ai:return 97;case Mi:return 96;case Li:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Di;case 98:return Oi;case 97:return Ai;case 96:return Mi;case 95:return Li;default:throw Error(o(332))}}function Gi(e,t){return e=Hi(e),Si(e,t)}function Ki(e,t,n){return e=Hi(e),Ti(e,t,n)}function Yi(){if(null!==Vi){var e=Vi;Vi=null,Ci(e)}Qi()}function Qi(){if(!Bi&&null!==Ui){Bi=!0;var e=0;try{var t=Ui;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ti(Di,Yi),n}finally{Bi=!1}}}var $i=w.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Ji.current;li(Ji),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,s=0,f=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,h,u):p)||void 0===u)break e;h=i({},h,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Bs|=s,e.lanes=s,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=du(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function _a(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var ba=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ea(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Sa(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Gu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Ku(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Yu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ku(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=Xu(t,e.mode,n)).return=e,t}if(ba(t)||q(t))return(t=Yu(t,e.mode,n,null)).return=e,t;Ea(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?n.type===E?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(ba(n)||q(n))return null!==i?null:f(e,t,n,r,null);Ea(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return e=e.get(null===r.key?n:r.key)||null,r.type===E?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(ba(r)||q(r))return f(t,e=e.get(n)||null,r,i,null);Ea(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,s,u,c){var l=q(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var f=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,c))&&(s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===E&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case b:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===E){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===E?((r=Yu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Ku(a.type,a.key,a.props,null,e.mode,u)).ref=xa(e,r,a),u.return=e,e=u)}return s(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xu(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=$u(a,e.mode,u)).return=e,e=r),s(e);if(ba(a))return v(e,r,a,u);if(q(a))return m(e,r,a,u);if(l&&Ea(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,K(e.type)||"Component"))}return n(e,r)}}var Ta=Sa(!0),Ca=Sa(!1),Ia={},Na=ci(Ia),Ra=ci(Ia),Pa=ci(Ia);function Da(e){if(e===Ia)throw Error(o(174));return e}function Oa(e,t){switch(fi(Pa,t),fi(Ra,e),fi(Na,Ia),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Aa(){li(Na),li(Ra),li(Pa)}function Ma(e){Da(Pa.current);var t=Da(Na.current),n=pe(t,e.type);t!==n&&(fi(Ra,e),fi(Na,n))}function La(e){Ra.current===e&&(li(Na),li(Ra))}var Fa=ci(0);function ja(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,Va=null,Ba=!1;function qa(e,t){var n=Wu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(Ba){var t=Va;if(t){var n=t;if(!za(e,t)){if(!(t=Yr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Ba=!1,void(Ua=e);qa(Ua,n)}Ua=e,Va=Yr(t.firstChild)}else e.flags=-1025&e.flags|2,Ba=!1,Ua=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Ga(e){if(e!==Ua)return!1;if(!Ba)return Ha(e),Ba=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=Va;t;)qa(e,t),t=Yr(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Yr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=Ua?Yr(e.stateNode.nextSibling):null;return!0}function Ka(){Va=Ua=null,Ba=!1}var Ya=[];function Qa(){for(var e=0;e<Ya.length;e++)Ya[e]._workInProgressVersionPrimary=null;Ya.length=0}var $a=w.ReactCurrentDispatcher,Xa=w.ReactCurrentBatchConfig,Ja=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Ja=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Oo:Ao,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,$a.current=Mo,e=n(r,i)}while(ro)}if($a.current=Do,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Ja&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,a=r):u=u.next=f,Za.lanes|=l,Bs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Ya.push(t))),e)return n(t._source);throw Ya.push(t),Error(o(350))}function po(e,t,n,r){var i=Os;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=$a.current,c=u.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=Za;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(l(e),e=du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Wt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Po.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(uo(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Po.bind(null,Za,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function ko(){return uo().memoizedState}function _o(e,t,n,r){var i=so();Za.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}Za.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function bo(e,t){return _o(516,4,e,t)}function xo(e,t){return wo(516,4,e,t)}function Eo(e,t){return wo(4,2,e,t)}function So(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,So.bind(null,t,e),n)}function Co(){}function Io(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ro(e,t){var n=Wi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Po(e,t,n){var r=hu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Do={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_o(4,2,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Po.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:Co,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return bo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Ro.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(Ba){var e=!1,t=function(e){return{$$typeof:M,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,yo(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return mo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Ao={readContext:oa,useCallback:Io,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:Co,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Mo={readContext:oa,useCallback:Io,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:Co,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Lo=w.ReactCurrentOwner,Fo=!1;function jo(e,t,n,r){t.child=null===e?Ca(t,null,n,r):Ta(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,jo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ku(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Bo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Gu(o,r)).ref=t.ref,e.return=t,t.child=e)}function Bo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Wo(e,t,n,r,a)}function qo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},bu(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bu(t,e),null;t.memoizedState={baseLanes:0},bu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,bu(t,r);return jo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,jo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Ho(e,t,n,r,i){if(yi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&_a(t,o,r,c),sa=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),u=t.memoizedState,s!==r||h!==u||pi.current||sa?("function"===typeof l&&(ma(t,n,l,r),u=t.memoizedState),(s=sa||ga(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Xi(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=mi(t,u=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&_a(t,o,r,u),sa=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||pi.current||sa?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=sa||ga(t,n,c,r,h,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,a,i)}function Go(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&bi(t,n,!1),as(e,t,a);r=t.stateNode,Lo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,s,a)):jo(e,t,s,a),t.memoizedState=r.state,i&&bi(t,n,!0),t.child}function Ko(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Oa(e,t.containerInfo)}var Yo,Qo,$o,Xo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Wa(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Qu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Qu(t,i,0,null),n=Yu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Gu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gu(o,s),null!==e?r=Gu(e,r):(r=Yu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(jo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ja(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ja(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Ba)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Aa(),li(pi),li(di),Qa(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ga(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:La(t);var a=Da(Pa.current);if(n=t.type,null!==e&&null!=t.stateNode)Qo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Da(Na.current),Ga(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[Zr]=s,n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Rr(Tr[e],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":ee(r,s),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Rr("invalid",r);break;case"textarea":ue(r,s),Rr("invalid",r)}for(var c in Ee(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Rr("scroll",r));switch(n){case"input":$(r),re(r,s,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Yo(e,t),t.stateNode=e,c=Se(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),a=r;break;case"iframe":case"object":case"embed":Rr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Rr(Tr[a],e);a=r;break;case"source":Rr("error",e),a=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),a=r;break;case"details":Rr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Rr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Rr("invalid",e);break;default:a=r}Ee(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?be(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Rr("scroll",e):null!=f&&_(e,s,f,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Y(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Da(Pa.current),Da(Na.current),Ga(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ga(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===js&&(js=3):(0!==js&&3!==js||(js=4),null===Os||0===(134217727&Bs)&&0===(134217727&qs)||gu(Os,Ms))),(r||n)&&(t.flags|=4),null);case 4:return Aa(),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==js||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=ja(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Gs&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=ja(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Ba)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Gs&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,s?1&t|2:1&t),n):null;case 23:case 24:return xu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Aa(),li(pi),li(di),Qa(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return La(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Aa(),null;case 10:return ra(e),null;case 23:case 24:return xu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Yo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Qo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Da(Na.current);var o,s=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in Ee(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Rr("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===M?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$s||($s=!0,Xs=r),ls(0,t)},n}function ds(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Kr(t.stateNode.containerInfo))}throw Error(o(163))}function ys(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,e),Lu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&bt(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(t,n);else{r=t;try{i()}catch(a){Vu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vu(t,a)}break;case 5:vs(t);break;case 4:Ss(e,t)}}function _s(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xs(e,n,t):Es(e,n,t)}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Ss(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ks(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,i),t=Se(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?be(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ge(n,u):_(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,bt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hs=zi(),gs(t.child,!0)),void Cs(t);case 19:return void Cs(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Cs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=qu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Is(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,Rs=w.ReactCurrentDispatcher,Ps=w.ReactCurrentOwner,Ds=0,Os=null,As=null,Ms=0,Ls=0,Fs=ci(0),js=0,Us=null,Vs=0,Bs=0,qs=0,zs=0,Ws=null,Hs=0,Gs=1/0;function Ks(){Gs=zi()+500}var Ys,Qs=null,$s=!1,Xs=null,Js=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,fu=!1;function hu(){return 0!==(48&Ds)?zi():-1!==su?su:su=zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===uu&&(uu=Vs),0!==$i.transition){0!==cu&&(cu=null!==Ws?Ws.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&Ds)&&98===e?e=Vt(12,uu):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Os&&(qs|=t,4===js&&gu(e,Ms));var r=Wi();1===t?0!==(8&Ds)&&0===(48&Ds)?ku(e):(mu(e,n),0===Ds&&(Ks(),Yi())):(0===(4&Ds)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Ws=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Wt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Lt;a[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=jt(e,e===Os?Ms:0),t=Lt,0===r)null!==n&&(n!==Fi&&Ci(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Ci(n)}15===t?(n=ku.bind(null,e),null===Ui?(Ui=[n],Vi=Ti(Di,Qi)):Ui.push(n),n=Fi):14===t?n=Ki(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Ki(n,yu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yu(e){if(su=-1,cu=uu=0,0!==(48&Ds))throw Error(o(327));var t=e.callbackNode;if(Mu()&&e.callbackNode!==t)return null;var n=jt(e,e===Os?Ms:0);if(0===n)return null;var r=n,i=Ds;Ds|=16;var a=Tu();for(Os===e&&Ms===r||(Ks(),Eu(e,r));;)try{Nu();break}catch(u){Su(e,u)}if(na(),Rs.current=a,Ds=i,null!==As?r=0:(Os=null,Ms=0,r=js),0!==(Vs&qs))Eu(e,0);else if(0!==r){if(2===r&&(Ds|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(n=Ut(e))&&(r=Cu(e,n))),1===r)throw t=Us,Eu(e,0),gu(e,n),mu(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Du(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Hs+500-zi())){if(0!==jt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Du.bind(null,e),r);break}Du(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Wt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Hr(Du.bind(null,e),n);break}Du(e);break;default:throw Error(o(329))}}return mu(e,zi()),e.callbackNode===t?yu.bind(null,e):null}function gu(e,t){for(t&=~zs,t&=~qs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&Ds))throw Error(o(327));if(Mu(),e===Os&&0!==(e.expiredLanes&Ms)){var t=Ms,n=Cu(e,t);0!==(Vs&qs)&&(n=Cu(e,t=jt(e,t)))}else n=Cu(e,t=jt(e,0));if(0!==e.tag&&2===n&&(Ds|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(t=Ut(e))&&(n=Cu(e,t))),1===n)throw n=Us,Eu(e,0),gu(e,t),mu(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Du(e),mu(e,zi()),null}function _u(e,t){var n=Ds;Ds|=1;try{return e(t)}finally{0===(Ds=n)&&(Ks(),Yi())}}function wu(e,t){var n=Ds;Ds&=-2,Ds|=8;try{return e(t)}finally{0===(Ds=n)&&(Ks(),Yi())}}function bu(e,t){fi(Fs,Ls),Ls|=t,Vs|=t}function xu(){Ls=Fs.current,li(Fs)}function Eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Aa(),li(pi),li(di),Qa();break;case 5:La(r);break;case 4:Aa();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:xu()}n=n.return}Os=e,As=Gu(e.current,null),Ms=Ls=Vs=t,js=0,Us=null,zs=qs=Bs=0}function Su(e,t){for(;;){var n=As;try{if(na(),$a.current=Do,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Ja=0,to=eo=Za=null,ro=!1,Ps.current=null,null===n||null===n.return){js=1,Us=t,As=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ms,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=la(-1,1);g.tag=2,fa(s,g)}s.lanes|=1;break e}u=void 0,s=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fs,u=new Set,k.set(c,u)):void 0===(u=k.get(c))&&(u=new Set,k.set(c,u)),!u.has(s)){u.add(s);var _=Bu.bind(null,a,c,s);c.then(_,_)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((K(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==js&&(js=2),u=cs(u,s),h=o;do{switch(h.tag){case 3:a=u,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hs(0,a,t));break e;case 1:a=u;var w=h.type,b=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Js||!Js.has(b)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,ds(h,a,t));break e}}h=h.return}while(null!==h)}Pu(n)}catch(x){t=x,As===n&&null!==n&&(As=n=n.return);continue}break}}function Tu(){var e=Rs.current;return Rs.current=Do,null===e?Do:e}function Cu(e,t){var n=Ds;Ds|=16;var r=Tu();for(Os===e&&Ms===t||Eu(e,t);;)try{Iu();break}catch(i){Su(e,i)}if(na(),Ds=n,Rs.current=r,null!==As)throw Error(o(261));return Os=null,Ms=0,js}function Iu(){for(;null!==As;)Ru(As)}function Nu(){for(;null!==As&&!Ii();)Ru(As)}function Ru(e){var t=Ys(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?Pu(e):As=t,Ps.current=null}function Pu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ls)))return void(As=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ls)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(As=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===js&&(js=5)}function Du(e){var t=Wi();return Gi(99,Ou.bind(null,e,t)),null}function Ou(e,t){do{Mu()}while(null!==eu);if(0!==(48&Ds))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Wt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Os&&(As=Os=null,Ms=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ds,Ds|=32,Ps.current=null,Br=Qt,yr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(T){u=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=s,y=null;t:for(;;){for(var g;m!==u||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===s)break t;if(y===u&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}u=-1===h||-1===d?null:{start:h,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;qr={focusedElem:s,selectionRange:u},Qt=!1,lu=null,fu=!1,Qs=r;do{try{Au()}catch(T){if(null===Qs)throw Error(o(330));Vu(Qs,T),Qs=Qs.nextEffect}}while(null!==Qs);lu=null,Qs=r;do{try{for(s=e;null!==Qs;){var k=Qs.flags;if(16&k&&ge(Qs.stateNode,""),128&k){var _=Qs.alternate;if(null!==_){var w=_.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:bs(Qs),Qs.flags&=-3;break;case 6:bs(Qs),Qs.flags&=-3,Ts(Qs.alternate,Qs);break;case 1024:Qs.flags&=-1025;break;case 1028:Qs.flags&=-1025,Ts(Qs.alternate,Qs);break;case 4:Ts(Qs.alternate,Qs);break;case 8:Ss(s,u=Qs);var b=u.alternate;_s(u),null!==b&&_s(b)}Qs=Qs.nextEffect}}catch(T){if(null===Qs)throw Error(o(330));Vu(Qs,T),Qs=Qs.nextEffect}}while(null!==Qs);if(w=qr,_=mr(),k=w.focusedElem,s=w.selectionRange,_!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==s&&yr(k)&&(_=s.start,void 0===(w=s.end)&&(w=_),"selectionStart"in k?(k.selectionStart=_,k.selectionEnd=Math.min(w,k.value.length)):(w=(_=k.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),u=k.textContent.length,b=Math.min(s.start,u),s=void 0===s.end?b:Math.min(s.end,u),!w.extend&&b>s&&(u=s,s=b,b=u),u=pr(k,b),a=pr(k,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((_=_.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),b>s?(w.addRange(_),w.extend(a.node,a.offset)):(_.setEnd(a.node,a.offset),w.addRange(_))))),_=[];for(w=k;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<_.length;k++)(w=_[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Qt=!!Br,qr=Br=null,e.current=n,Qs=r;do{try{for(k=e;null!==Qs;){var x=Qs.flags;if(36&x&&ys(k,Qs.alternate,Qs),128&x){_=void 0;var E=Qs.ref;if(null!==E){var S=Qs.stateNode;Qs.tag,_=S,"function"===typeof E?E(_):E.current=_}}Qs=Qs.nextEffect}}catch(T){if(null===Qs)throw Error(o(330));Vu(Qs,T),Qs=Qs.nextEffect}}while(null!==Qs);Qs=null,ji(),Ds=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Qs=r;null!==Qs;)t=Qs.nextEffect,Qs.nextEffect=null,8&Qs.flags&&((x=Qs).sibling=null,x.stateNode=null),Qs=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(T){}if(mu(e,zi()),$s)throw $s=!1,e=Xs,Xs=null,e;return 0!==(8&Ds)||Yi(),null}function Au(){for(;null!==Qs;){var e=Qs.alternate;fu||null===lu||(0!==(8&Qs.flags)?et(Qs,lu)&&(fu=!0):13===Qs.tag&&Is(e,Qs)&&et(Qs,lu)&&(fu=!0));var t=Qs.flags;0!==(256&t)&&ms(e,Qs),0===(512&t)||Zs||(Zs=!0,Ki(97,(function(){return Mu(),null}))),Qs=Qs.nextEffect}}function Mu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Gi(e,ju)}return!1}function Lu(e,t){nu.push(t,e),Zs||(Zs=!0,Ki(97,(function(){return Mu(),null})))}function Fu(e,t){ru.push(t,e),Zs||(Zs=!0,Ki(97,(function(){return Mu(),null})))}function ju(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ds))throw Error(o(331));var t=Ds;Ds|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ds=t,Yi(),!0}function Uu(e,t,n){fa(e,t=hs(0,t=cs(n,t),1)),t=hu(),null!==(e=vu(e,1))&&(zt(e,1,t),mu(e,t))}function Vu(e,t){if(3===e.tag)Uu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var i=ds(n,e=cs(t,e),1);if(fa(n,i),i=hu(),null!==(n=vu(n,1)))zt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Bu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hu(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(Ms&n)===n&&(4===js||3===js&&(62914560&Ms)===Ms&&500>zi()-Hs?Eu(e,0):zs|=n),mu(e,t)}function qu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===uu&&(uu=Vs),0===(t=Bt(62914560&~uu))&&(t=4194304))),n=hu(),null!==(e=vu(e,t))&&(zt(e,t,n),mu(e,n))}function zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wu(e,t,n,r){return new zu(e,t,n,r)}function Hu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gu(e,t){var n=e.alternate;return null===n?((n=Wu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ku(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Hu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Yu(n.children,i,a,t);case L:s=8,i|=16;break;case S:s=8,i|=1;break;case T:return(e=Wu(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case R:return(e=Wu(13,n,t,i)).type=R,e.elementType=R,e.lanes=a,e;case P:return(e=Wu(19,n,t,i)).elementType=P,e.lanes=a,e;case F:return Qu(n,i,a,t);case j:return(e=Wu(24,n,t,i)).elementType=j,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case I:s=9;break e;case N:s=11;break e;case D:s=14;break e;case O:s=16,r=null;break e;case A:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Wu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Yu(e,t,n,r){return(e=Wu(7,e,r,t)).lanes=n,e}function Qu(e,t,n,r){return(e=Wu(23,e,r,t)).elementType=F,e.lanes=n,e}function $u(e,t,n){return(e=Wu(6,e,null,t)).lanes=n,e}function Xu(e,t,n){return(t=Wu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ju(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hu(),s=du(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(yi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=_i(n,c,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),pu(i,s,a),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(e,t,null!=n&&!0===n.hydrate),t=Wu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}wu((function(){ec(t,o,e,i)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zu(e,t,null,n)}Ys=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ko(t),Ka();break;case 5:Ma(t);break;case 1:yi(t.type)&&wi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=as(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,qo(e,t,n)}return as(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ma(t,r,s,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Go(null,t,r,!0,a,n)}else t.tag=0,jo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Hu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===D)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Ko(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ka(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Yr(t.stateNode.containerInfo.firstChild),Ua=t,a=Ba=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Ya.push(a);for(n=Ca(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else jo(e,t,r,n),Ka();t=t.child}return t;case 5:return Ma(t),null===e&&Wa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Wr(r,i)?s=null:null!==a&&Wr(r,a)&&(t.flags|=16),zo(e,t),jo(e,t,s,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return Jo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):jo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return jo(e,t,t.pendingProps,n),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(fi(Ji,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=la(-1,n&-n)).tag=2,fa(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ia(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}jo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,jo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Vo(e,t,i,a=Xi(i.type,a),r,n);case 15:return Bo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Go(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return qo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,hu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,hu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Ce=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=_u,Ae=function(e,t,n,r,i){var a=Ds;Ds|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Ds=a)&&(Ks(),Yi())}},Me=function(){0===(49&Ds)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,zi())}))}Yi()}(),Mu())},Le=function(e,t){var n=Ds;Ds|=2;try{return e(t)}finally{0===(Ds=n)&&(Ks(),Yi())}};var uc={Events:[ri,ii,ai,Pe,De,Mu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{xi=fc.inject(lc),Ei=fc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ds;if(0!==(48&n))return e(t);Ds|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Ds=n,Yi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=_u,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,s=60109,u=60110,c=60112,l=60113,f=60120,h=60115,d=60116,p=60121,v=60122,m=60117,y=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;n=k("react.element"),r=k("react.portal"),i=k("react.fragment"),a=k("react.strict_mode"),o=k("react.profiler"),s=k("react.provider"),u=k("react.context"),c=k("react.forward_ref"),l=k("react.suspense"),f=k("react.suspense_list"),h=k("react.memo"),d=k("react.lazy"),p=k("react.block"),v=k("react.server.block"),m=k("react.fundamental"),y=k("react.debug_trace_mode"),g=k("react.legacy_hidden")}function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case h:case s:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return _(e)===u}},441:function(e,t,n){"use strict";e.exports=n(372)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var _={current:null},w=Object.prototype.hasOwnProperty,b={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!b.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+T(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(s=e[c],c);u+=C(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=C(s=s.value,t,n,l=r+T(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function I(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var R={current:null};function P(){var e=R.current;if(null===e)throw Error(d(321));return e}var D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:I,forEach:function(e,t,n){I(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!b.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return P().useCallback(e,t)},t.useContext=function(e,t){return P().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return P().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return P().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},t.useMemo=function(e,t){return P().useMemo(e,t)},t.useReducer=function(e,t,n){return P().useReducer(e,t,n)},t.useRef=function(e){return P().useRef(e)},t.useState=function(e){return P().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},975:function(e,t,n){"use strict";t.Z=function(e){var t=e.dispatch;return function(e){return function(n){return(0,a.isFSA)(n)?(0,i.default)(n.payload)?n.payload.then((function(e){return t(o({},n,{payload:e}))})).catch((function(e){return t(o({},n,{payload:e,error:!0})),Promise.reject(e)})):e(n):(0,i.default)(n)?n.then(t):e(n)}}};var r,i=(r=n(950))&&r.__esModule?r:{default:r},a=n(567);function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var _=new MessageChannel,w=_.port2;_.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?w.postMessage(null):(v=!1,m=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,w.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function b(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>S(o,n))void 0!==u&&0>S(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>S(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],C=[],I=1,N=null,R=3,P=!1,D=!1,O=!1;function A(e){for(var t=x(C);null!==t;){if(null===t.callback)E(C);else{if(!(t.startTime<=e))break;E(C),t.sortIndex=t.expirationTime,b(T,t)}t=x(C)}}function M(e){if(O=!1,A(e),!D)if(null!==x(T))D=!0,n(L);else{var t=x(C);null!==t&&r(M,t.startTime-e)}}function L(e,n){D=!1,O&&(O=!1,i()),P=!0;var a=R;try{for(A(n),N=x(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,R=N.priorityLevel;var s=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===x(T)&&E(T),A(n)}else E(T);N=x(T)}if(null!==N)var u=!0;else{var c=x(C);null!==c&&r(M,c.startTime-n),u=!1}return u}finally{N=null,R=a,P=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){D||P||(D=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return x(T)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:I++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,b(C,e),null===x(T)&&e===x(C)&&(O?i():O=!0,r(M,o-s))):(e.sortIndex=u,b(T,e),D||P||(D=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".6bf1b952.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="react-firebase-chat-app:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/react-firebase-chatting-app/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkreact_firebase_chat_app=self.webpackChunkreact_firebase_chat_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ya},SDK_VERSION:function(){return ps},_DEFAULT_ENTRY_NAME:function(){return ts},_addComponent:function(){return as},_addOrOverwriteComponent:function(){return os},_apps:function(){return rs},_clearComponents:function(){return ls},_components:function(){return is},_getProvider:function(){return us},_registerComponent:function(){return ss},_removeServiceInstance:function(){return cs},deleteApp:function(){return gs},getApp:function(){return ms},getApps:function(){return ys},initializeApp:function(){return vs},onLog:function(){return ws},registerVersion:function(){return _s},setLogLevel:function(){return bs}});var t,r=n(791),i=n(164);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(e){return function(e){if(Array.isArray(e))return a(e)}(e)||o(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"===m(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function k(e){var t=v();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function _(e){if(Array.isArray(e))return e}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){return _(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||s(e,t)||w()}function x(e,t,n){return x=v()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&h(i,n.prototype),i},x.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return x(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,e)},E(e)}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var T,C="popstate";function I(e){return{usr:e.state,key:e.key}}function N(e,t,n,r){return void 0===n&&(n=null),S({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?P(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function R(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function P(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function D(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,s=void 0===o?document.defaultView:o,u=a.v5Compat,c=void 0!==u&&u,l=s.history,f=t.Pop,h=null;function d(){f=t.Pop,h&&h({action:f,location:p.location})}var p={get action(){return f},get location(){return e(s,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(C,d),h=e,function(){s.removeEventListener(C,d),h=null}},createHref:function(e){return n(s,e)},push:function(e,n){f=t.Push;var i=N(p.location,e,n);r&&r(i,e);var a=I(i),o=p.createHref(i);try{l.pushState(a,"",o)}catch(CO){s.location.assign(o)}c&&h&&h({action:f,location:i})},replace:function(e,n){f=t.Replace;var i=N(p.location,e,n);r&&r(i,e);var a=I(i),o=p.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:i})},go:function(e){return l.go(e)}};return p}function O(e,t,n){void 0===n&&(n="/");var r=V(("string"===typeof t?P(t):t).pathname||"/",n);if(null==r)return null;var i=A(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=j(i[o],r);return a}function A(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(B(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));var o=H([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(B(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),A(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:F(o,e.index),routesMeta:s})})),t}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(T||(T={}));var M=/^:\w+$/,L=function(e){return"*"===e};function F(e,t){var n=e.split("/"),r=n.length;return n.some(L)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!L(e)})).reduce((function(e,t){return e+(M.test(t)?3:""===t?1:10)}),r)}function j(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=U({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:H([i,l.pathname]),pathnameBase:G(H([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=H([i,l.pathnameBase]))}return a}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);q("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=b(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1),l=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(CO){return q(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+CO+")."),e}}(c[n]||"",t),e}),{});return{params:l,pathname:s,pathnameBase:u,pattern:e}}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function B(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function q(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function z(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function W(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=P(e):(B(!(i=S({},e)).pathname||!i.pathname.includes("?"),z("?","pathname","search",i)),B(!i.pathname||!i.pathname.includes("#"),z("#","pathname","hash",i)),B(!i.search||!i.search.includes("#"),z("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?P(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:K(a),hash:Y(s)}}(i,a),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var H=function(e){return e.join("/").replace(/\/\/+/g,"/")},G=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},K=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},Y=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},Q=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n)}(E(Error));var $=f((function e(t,n,r){c(this,e),this.status=t,this.statusText=n||"",this.data=r}));function X(e){return e instanceof $}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}var Z="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},ee=r.useState,te=r.useEffect,ne=r.useLayoutEffect,re=r.useDebugValue;function ie(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!Z(n,r)}catch(CO){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement;var ae=r.createContext(null);var oe=r.createContext(null);var se=r.createContext(null);var ue=r.createContext(null);var ce=r.createContext(null);var le=r.createContext(null);var fe=r.createContext({outlet:null,matches:[]});var he=r.createContext(null);function de(){return null!=r.useContext(le)}function pe(){return de()||B(!1),r.useContext(le).location}function ve(e){return e.filter((function(t,n){return 0===n||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase}))}function me(){de()||B(!1);var e=r.useContext(ce),t=e.basename,n=e.navigator,i=r.useContext(fe).matches,a=pe().pathname,o=JSON.stringify(ve(i).map((function(e){return e.pathnameBase}))),s=r.useRef(!1);r.useEffect((function(){s.current=!0}));var u=r.useCallback((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var i=W(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:H([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return u}function ye(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(fe).matches,a=pe().pathname,o=JSON.stringify(ve(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return W(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function ge(){var e=function(){var e,t=r.useContext(he),n=Ee(_e.UseRouteError),i=r.useContext(fe),a=i.matches[i.matches.length-1];if(t)return t;return i||B(!1),!a.route.id&&B(!1),null==(e=n.errors)?void 0:e[a.route.id]}(),t=X(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unhandled Thrown Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",r.createElement("code",{style:o},"errorElement")," props on\xa0",r.createElement("code",{style:o},"<Route>")))}var ke,_e,we=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return f(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(he.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function be(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(ae);return a&&n.route.errorElement&&(a._deepestRenderedBoundaryId=n.route.id),r.createElement(fe.Provider,{value:t},i)}function xe(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,a=null==n?void 0:n.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||B(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,s){var u=o.route.id?null==a?void 0:a[o.route.id]:null,c=n?o.route.errorElement||r.createElement(ge,null):null,l=function(){return r.createElement(be,{match:o,routeContext:{outlet:e,matches:t.concat(i.slice(0,s+1))}},u?c:void 0!==o.route.element?o.route.element:e)};return n&&(o.route.errorElement||0===s)?r.createElement(we,{location:n.location,component:c,error:u,children:l()}):l()}),null)}function Ee(e){var t=r.useContext(se);return t||B(!1),t}!function(e){e.UseRevalidator="useRevalidator"}(ke||(ke={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(_e||(_e={}));var Se;function Te(e){B(!1)}function Ce(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,c=void 0===u?t.Pop:u,l=e.navigator,f=e.static,h=void 0!==f&&f;de()&&B(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof s&&(s=P(s));var v=s,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,_=v.hash,w=void 0===_?"":_,b=v.state,x=void 0===b?null:b,E=v.key,S=void 0===E?"default":E,T=r.useMemo((function(){var e=V(y,d);return null==e?null:{pathname:e,search:k,hash:w,state:x,key:S}}),[d,y,k,w,x,S]);return null==T?null:r.createElement(ce.Provider,{value:p},r.createElement(le.Provider,{children:o,value:{location:T,navigationType:c}}))}function Ie(e){var n=e.children,i=e.location,a=r.useContext(oe);return function(e,n){de()||B(!1);var i,a=r.useContext(se),o=r.useContext(fe).matches,s=o[o.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),l=(s&&s.route,pe());if(n){var f,h="string"===typeof n?P(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||B(!1),i=h}else i=l;var d=i.pathname||"/",p=O(e,{pathname:"/"===c?d:d.slice(c.length)||"/"}),v=xe(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:H([c,e.pathname]),pathnameBase:"/"===e.pathnameBase?c:H([c,e.pathnameBase])})})),o,a||void 0);return n?r.createElement(le.Provider,{value:{location:J({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:t.Pop}},v):v}(a&&!n?a.router.routes:Re(n),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Se||(Se={}));var Ne=new Promise((function(){}));r.Component;function Re(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e))if(e.type!==r.Fragment){e.type!==Te&&B(!1),e.props.index&&e.props.children&&B(!1);var a=[].concat(u(t),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=Re(e.props.children,a)),n.push(o)}else n.push.apply(n,Re(e.props.children,t))})),n}function Pe(){Pe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(N){u=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),s=new T(i||[]);return r(o,"_invoke",{value:b(e,n,s)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var f={};function h(){}function d(){}function p(){}var v={};u(v,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(C([])));g&&g!==t&&n.call(g,a)&&(v=g);var k=p.prototype=h.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,s){var u=l(e[r],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==m(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(u.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function b(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return I()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return d.prototype=p,r(k,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},_(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(k),u(k,s,"Generator"),u(k,a,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function De(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(CO){return void n(CO)}s.done?t(u):Promise.resolve(u).then(r,i)}function Oe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){De(a,r,i,o,s,"next",e)}function s(e){De(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Ae={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Me=r.createContext&&r.createContext(Ae),Le=function(){return Le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Le.apply(this,arguments)},Fe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function je(e){return e&&e.map((function(e,t){return r.createElement(e.tag,Le({key:t},e.attr),je(e.child))}))}function Ue(e){return function(t){return r.createElement(Ve,Le({attr:Le({},e.attr)},t),je(e.child))}}function Ve(e){var t=function(t){var n,i=e.attr,a=e.size,o=e.title,s=Fe(e,["attr","size","title"]),u=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",Le({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,s,{className:n,style:Le(Le({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&r.createElement("title",null,o),e.children)};return void 0!==Me?r.createElement(Me.Consumer,null,(function(e){return t(e)})):t(Ae)}function Be(e){return Ue({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M425.9 170.4H204.3c-21 0-38.1 17.1-38.1 38.1v154.3c0 21 17.1 38 38.1 38h126.8c2.8 0 5.6 1.2 7.6 3.2l63 58.1c3.5 3.4 9.3 2 9.3-2.9v-50.6c0-6 3.8-7.9 9.8-7.9h1c21 0 42.1-16.9 42.1-38V208.5c.1-21.1-17-38.1-38-38.1z"}},{tag:"path",attr:{d:"M174.4 145.9h177.4V80.6c0-18-14.6-32.6-32.6-32.6H80.6C62.6 48 48 62.6 48 80.6v165.2c0 18 14.6 32.6 32.6 32.6h61.1v-99.9c.1-18 14.7-32.6 32.7-32.6z"}}]})(e)}var qe=r.createContext(null);var ze=function(e){e()},We=function(){return ze};var He={notify:function(){},get:function(){return[]}};function Ge(e,t){var n,r=He;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=We(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=He)},getListeners:function(){return r}};return o}var Ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;var Ye=function(e){var t=e.store,n=e.context,i=e.children,a=(0,r.useMemo)((function(){var e=Ge(t);return{store:t,subscription:e}}),[t]),o=(0,r.useMemo)((function(){return t.getState()}),[t]);Ke((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,o]);var s=n||qe;return r.createElement(s.Provider,{value:a},i)};function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe.apply(this,arguments)}function $e(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Xe=n(110),Je=n.n(Xe),Ze=n(441),et=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],tt=["reactReduxForwardedRef"],nt=[],rt=[null,null];function it(e,t){var n=e[1];return[t.payload,n+1]}function at(e,t,n){Ke((function(){return e.apply(void 0,t)}),n)}function ot(e,t,n,r,i,a,o){e.current=r,t.current=i,n.current=!1,a.current&&(a.current=null,o())}function st(e,t,n,r,i,a,o,s,u,c){if(e){var l=!1,f=null,h=function(){if(!l){var e,n,h=t.getState();try{e=r(h,i.current)}catch(d){n=d,f=d}n||(f=null),e===a.current?o.current||u():(a.current=e,s.current=e,o.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var ut=function(){return[null,0]};function ct(e,t){void 0===t&&(t={});var n=t,i=n.getDisplayName,a=void 0===i?function(e){return"ConnectAdvanced("+e+")"}:i,o=n.methodName,s=void 0===o?"connectAdvanced":o,u=n.renderCountProp,c=void 0===u?void 0:u,l=n.shouldHandleStateChanges,f=void 0===l||l,h=n.storeKey,d=void 0===h?"store":h,p=(n.withRef,n.forwardRef),v=void 0!==p&&p,m=n.context,y=void 0===m?qe:m,g=$e(n,et),k=y;return function(t){var n=t.displayName||t.name||"Component",i=a(n),o=Qe({},g,{getDisplayName:a,methodName:s,renderCountProp:c,shouldHandleStateChanges:f,storeKey:d,displayName:i,wrappedComponentName:n,WrappedComponent:t}),u=g.pure;var l=u?r.useMemo:function(e){return e()};function h(n){var i=(0,r.useMemo)((function(){var e=n.reactReduxForwardedRef,t=$e(n,tt);return[n.context,e,t]}),[n]),a=i[0],s=i[1],u=i[2],c=(0,r.useMemo)((function(){return a&&a.Consumer&&(0,Ze.isContextConsumer)(r.createElement(a.Consumer,null))?a:k}),[a,k]),h=(0,r.useContext)(c),d=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(h)&&Boolean(h.store);var p=d?n.store:h.store,v=(0,r.useMemo)((function(){return function(t){return e(t.dispatch,o)}(p)}),[p]),m=(0,r.useMemo)((function(){if(!f)return rt;var e=Ge(p,d?null:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[p,d,h]),y=m[0],g=m[1],_=(0,r.useMemo)((function(){return d?h:Qe({},h,{subscription:y})}),[d,h,y]),w=(0,r.useReducer)(it,nt,ut),b=w[0][0],x=w[1];if(b&&b.error)throw b.error;var E=(0,r.useRef)(),S=(0,r.useRef)(u),T=(0,r.useRef)(),C=(0,r.useRef)(!1),I=l((function(){return T.current&&u===S.current?T.current:v(p.getState(),u)}),[p,b,u]);at(ot,[S,E,C,u,I,T,g]),at(st,[f,p,y,v,S,E,C,T,g,x],[p,y,v]);var N=(0,r.useMemo)((function(){return r.createElement(t,Qe({},I,{ref:s}))}),[s,t,I]);return(0,r.useMemo)((function(){return f?r.createElement(c.Provider,{value:_},N):N}),[c,N,_])}var p=u?r.memo(h):h;if(p.WrappedComponent=t,p.displayName=h.displayName=i,v){var m=r.forwardRef((function(e,t){return r.createElement(p,Qe({},e,{reactReduxForwardedRef:t}))}));return m.displayName=i,m.WrappedComponent=t,Je()(m,t)}return Je()(p,t)}}function lt(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function ft(e,t){if(lt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!lt(e[n[i]],t[n[i]]))return!1;return!0}function ht(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function dt(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function pt(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=dt(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=dt(i),i=r(t,n)),i},r}}var vt=[function(e){return"function"===typeof e?pt(e):void 0},function(e){return e?void 0:ht((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?ht((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}];var mt=[function(e){return"function"===typeof e?pt(e):void 0},function(e){return e?void 0:ht((function(){return{}}))}];function yt(e,t,n){return Qe({},n,e,t)}var gt=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,s){var u=e(t,n,s);return o?i&&a(u,r)||(r=u):(o=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return yt}}],kt=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function _t(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function wt(e,t,n,r,i){var a,o,s,u,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,h=i.areStatePropsEqual,d=!1;function p(i,d){var p=!f(d,o),v=!l(i,a,d,o);return a=i,o=d,p&&v?(s=e(a,o),t.dependsOnOwnProps&&(u=t(r,o)),c=n(s,u,o)):p?(e.dependsOnOwnProps&&(s=e(a,o)),t.dependsOnOwnProps&&(u=t(r,o)),c=n(s,u,o)):v?function(){var t=e(a,o),r=!h(t,s);return s=t,r&&(c=n(s,u,o)),c}():c}return function(i,l){return d?p(i,l):(s=e(a=i,o=l),u=t(r,o),c=n(s,u,o),d=!0,c)}}function bt(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=$e(t,kt),o=n(e,a),s=r(e,a),u=i(e,a);return(a.pure?wt:_t)(o,s,u,e,a)}var xt=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Et(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function St(e,t){return e===t}function Tt(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?ct:n,i=t.mapStateToPropsFactories,a=void 0===i?mt:i,o=t.mapDispatchToPropsFactories,s=void 0===o?vt:o,u=t.mergePropsFactories,c=void 0===u?gt:u,l=t.selectorFactory,f=void 0===l?bt:l;return function(e,t,n,i){void 0===i&&(i={});var o=i,u=o.pure,l=void 0===u||u,h=o.areStatesEqual,d=void 0===h?St:h,p=o.areOwnPropsEqual,v=void 0===p?ft:p,m=o.areStatePropsEqual,y=void 0===m?ft:m,g=o.areMergedPropsEqual,k=void 0===g?ft:g,_=$e(o,xt),w=Et(e,a,"mapStateToProps"),b=Et(t,s,"mapDispatchToProps"),x=Et(n,c,"mergeProps");return r(f,Qe({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:w,initMapDispatchToProps:b,initMergeProps:x,pure:l,areStatesEqual:d,areOwnPropsEqual:v,areStatePropsEqual:y,areMergedPropsEqual:k},_))}}var Ct=Tt();function It(){return(0,r.useContext)(qe)}function Nt(e){void 0===e&&(e=qe);var t=e===qe?It:function(){return(0,r.useContext)(e)};return function(){return t().store}}var Rt=Nt();function Pt(e){void 0===e&&(e=qe);var t=e===qe?Rt:Nt(e);return function(){return t().dispatch}}var Dt=Pt(),Ot=function(e,t){return e===t};function At(e){void 0===e&&(e=qe);var t=e===qe?It:function(){return(0,r.useContext)(e)};return function(e,n){void 0===n&&(n=Ot);var i=t(),a=function(e,t,n,i){var a,o=(0,r.useReducer)((function(e){return e+1}),0)[1],s=(0,r.useMemo)((function(){return Ge(n,i)}),[n,i]),u=(0,r.useRef)(),c=(0,r.useRef)(),l=(0,r.useRef)(),f=(0,r.useRef)(),h=n.getState();try{if(e!==c.current||h!==l.current||u.current){var d=e(h);a=void 0!==f.current&&t(d,f.current)?f.current:d}else a=f.current}catch(p){throw u.current&&(p.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),p}return Ke((function(){c.current=e,l.current=h,f.current=a,u.current=void 0})),Ke((function(){function e(){try{var e=n.getState();if(e===l.current)return;var r=c.current(e);if(t(r,f.current))return;f.current=r,l.current=e}catch(p){u.current=p}o()}return s.onStateChange=e,s.trySubscribe(),e(),function(){return s.tryUnsubscribe()}}),[n,s]),a}(e,n,i.store,i.subscription);return(0,r.useDebugValue)(a),a}}var Mt,Lt=At();function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){Ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vt(e,t){if(null==e)return{};var n,r,i=$e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}Mt=i.unstable_batchedUpdates,ze=Mt;var Bt=n(694),qt=n.n(Bt),zt=Function.prototype.bind.call(Function.prototype.call,[].slice);function Wt(e,t){return zt(e.querySelectorAll(t))}var Ht=!("undefined"===typeof window||!window.document||!window.document.createElement),Gt=!1,Kt=!1;try{var Yt={get passive(){return Gt=!0},get once(){return Kt=Gt=!0}};Ht&&(window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,!0))}catch(kY){}var Qt=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Kt){var i=r.once,a=r.capture,o=n;!Kt&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,Gt?r:a)}e.addEventListener(t,n,r)};n(176);function $t(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Xt(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Jt(e,t,n){var i=(0,r.useRef)(void 0!==e),a=(0,r.useState)(t),o=a[0],s=a[1],u=void 0!==e,c=i.current;return i.current=u,!u&&c&&o!==t&&s(t),[u?e:o,(0,r.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),s(e)}),[n])]}function Zt(e,t){return Object.keys(t).reduce((function(n,r){var i,a=n,o=a[$t(r)],s=a[r],u=$e(a,[$t(r),r].map(Xt)),c=t[r],l=Jt(s,o,e[c]),f=l[0],h=l[1];return Qe({},u,((i={})[r]=f,i[c]=h,i))}),e)}function en(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function tn(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function nn(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}en.__suppressDeprecationWarning=!0,tn.__suppressDeprecationWarning=!0,nn.__suppressDeprecationWarning=!0;function rn(e){var t=(0,r.useRef)(null);return(0,r.useEffect)((function(){t.current=e})),t.current}var an=function(e){var t=(0,r.useRef)(e);return(0,r.useEffect)((function(){t.current=e}),[e]),t};function on(e){var t=an(e);return(0,r.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}var sn=r.createContext(null);function un(){return(0,r.useState)(null)}function cn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}var ln=Object.prototype.hasOwnProperty;function fn(e,t,n){var r,i=cn(e.keys());try{for(i.s();!(r=i.n()).done;)if(hn(n=r.value,t))return n}catch(a){i.e(a)}finally{i.f()}}function hn(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&hn(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;var a,o=cn(e);try{for(o.s();!(a=o.n()).done;){if((i=r=a.value)&&"object"===typeof i&&!(i=fn(t,i)))return!1;if(!t.has(i))return!1}}catch(c){o.e(c)}finally{o.f()}return!0}if(n===Map){if(e.size!==t.size)return!1;var s,u=cn(e);try{for(u.s();!(s=u.n()).done;){if((i=(r=s.value)[0])&&"object"===typeof i&&!(i=fn(t,i)))return!1;if(!hn(r[1],t.get(i)))return!1}}catch(c){u.e(c)}finally{u.f()}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(ln.call(e,n)&&++r&&!ln.call(t,n))return!1;if(!(n in t)||!hn(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}function dn(){var e=(0,r.useRef)(!0),t=(0,r.useRef)((function(){return e.current}));return(0,r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t.current}var pn=function(e){var t=dn();return[e[0],(0,r.useCallback)((function(n){if(t())return e[1](n)}),[t,e[1]])]};function vn(e){return e.split("-")[0]}function mn(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function yn(e){return e instanceof mn(e).Element||e instanceof Element}function gn(e){return e instanceof mn(e).HTMLElement||e instanceof HTMLElement}function kn(e){return"undefined"!==typeof ShadowRoot&&(e instanceof mn(e).ShadowRoot||e instanceof ShadowRoot)}var _n=Math.max,wn=Math.min,bn=Math.round;function xn(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function En(){return!/^((?!chrome|android).)*safari/i.test(xn())}function Sn(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,a=1;t&&gn(e)&&(i=e.offsetWidth>0&&bn(r.width)/e.offsetWidth||1,a=e.offsetHeight>0&&bn(r.height)/e.offsetHeight||1);var o=(yn(e)?mn(e):window).visualViewport,s=!En()&&n,u=(r.left+(s&&o?o.offsetLeft:0))/i,c=(r.top+(s&&o?o.offsetTop:0))/a,l=r.width/i,f=r.height/a;return{width:l,height:f,top:c,right:u+l,bottom:c+f,left:u,x:u,y:c}}function Tn(e){var t=Sn(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function Cn(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&kn(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function In(e){return e?(e.nodeName||"").toLowerCase():null}function Nn(e){return mn(e).getComputedStyle(e)}function Rn(e){return["table","td","th"].indexOf(In(e))>=0}function Pn(e){return((yn(e)?e.ownerDocument:e.document)||window.document).documentElement}function Dn(e){return"html"===In(e)?e:e.assignedSlot||e.parentNode||(kn(e)?e.host:null)||Pn(e)}function On(e){return gn(e)&&"fixed"!==Nn(e).position?e.offsetParent:null}function An(e){for(var t=mn(e),n=On(e);n&&Rn(n)&&"static"===Nn(n).position;)n=On(n);return n&&("html"===In(n)||"body"===In(n)&&"static"===Nn(n).position)?t:n||function(e){var t=/firefox/i.test(xn());if(/Trident/i.test(xn())&&gn(e)&&"fixed"===Nn(e).position)return null;var n=Dn(e);for(kn(n)&&(n=n.host);gn(n)&&["html","body"].indexOf(In(n))<0;){var r=Nn(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function Mn(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ln(e,t,n){return _n(e,wn(t,n))}function Fn(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function jn(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}var Un="top",Vn="bottom",Bn="right",qn="left",zn="auto",Wn=[Un,Vn,Bn,qn],Hn="start",Gn="end",Kn="viewport",Yn="popper",Qn=Wn.reduce((function(e,t){return e.concat([t+"-"+Hn,t+"-"+Gn])}),[]),$n=[].concat(Wn,[zn]).reduce((function(e,t){return e.concat([t,t+"-"+Hn,t+"-"+Gn])}),[]),Xn=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];var Jn={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,i=e.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,s=vn(n.placement),u=Mn(s),c=[qn,Bn].indexOf(s)>=0?"height":"width";if(a&&o){var l=function(e,t){return Fn("number"!==typeof(e="function"===typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:jn(e,Wn))}(i.padding,n),f=Tn(a),h="y"===u?Un:qn,d="y"===u?Vn:Bn,p=n.rects.reference[c]+n.rects.reference[u]-o[u]-n.rects.popper[c],v=o[u]-n.rects.reference[u],m=An(a),y=m?"y"===u?m.clientHeight||0:m.clientWidth||0:0,g=p/2-v/2,k=l[h],_=y-f[c]-l[d],w=y/2-f[c]/2+g,b=Ln(k,w,_),x=u;n.modifiersData[r]=((t={})[x]=b,t.centerOffset=b-w,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=t.elements.popper.querySelector(r)))&&Cn(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Zn(e){return e.split("-")[1]}var er={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tr(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.variation,o=e.offsets,s=e.position,u=e.gpuAcceleration,c=e.adaptive,l=e.roundOffsets,f=e.isFixed,h=o.x,d=void 0===h?0:h,p=o.y,v=void 0===p?0:p,m="function"===typeof l?l({x:d,y:v}):{x:d,y:v};d=m.x,v=m.y;var y=o.hasOwnProperty("x"),g=o.hasOwnProperty("y"),k=qn,_=Un,w=window;if(c){var b=An(n),x="clientHeight",E="clientWidth";if(b===mn(n)&&"static"!==Nn(b=Pn(n)).position&&"absolute"===s&&(x="scrollHeight",E="scrollWidth"),i===Un||(i===qn||i===Bn)&&a===Gn)_=Vn,v-=(f&&b===w&&w.visualViewport?w.visualViewport.height:b[x])-r.height,v*=u?1:-1;if(i===qn||(i===Un||i===Vn)&&a===Gn)k=Bn,d-=(f&&b===w&&w.visualViewport?w.visualViewport.width:b[E])-r.width,d*=u?1:-1}var S,T=Object.assign({position:s},c&&er),C=!0===l?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:bn(t*r)/r||0,y:bn(n*r)/r||0}}({x:d,y:v}):{x:d,y:v};return d=C.x,v=C.y,u?Object.assign({},T,((S={})[_]=g?"0":"",S[k]=y?"0":"",S.transform=(w.devicePixelRatio||1)<=1?"translate("+d+"px, "+v+"px)":"translate3d("+d+"px, "+v+"px, 0)",S)):Object.assign({},T,((t={})[_]=g?v+"px":"",t[k]=y?d+"px":"",t.transform="",t))}var nr={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,a=n.adaptive,o=void 0===a||a,s=n.roundOffsets,u=void 0===s||s,c={placement:vn(t.placement),variation:Zn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,tr(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:u})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,tr(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},rr={passive:!0};var ir={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,o=r.resize,s=void 0===o||o,u=mn(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach((function(e){e.addEventListener("scroll",n.update,rr)})),s&&u.addEventListener("resize",n.update,rr),function(){a&&c.forEach((function(e){e.removeEventListener("scroll",n.update,rr)})),s&&u.removeEventListener("resize",n.update,rr)}},data:{}},ar={left:"right",right:"left",bottom:"top",top:"bottom"};function or(e){return e.replace(/left|right|bottom|top/g,(function(e){return ar[e]}))}var sr={start:"end",end:"start"};function ur(e){return e.replace(/start|end/g,(function(e){return sr[e]}))}function cr(e){var t=mn(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function lr(e){return Sn(Pn(e)).left+cr(e).scrollLeft}function fr(e){var t=Nn(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function hr(e){return["html","body","#document"].indexOf(In(e))>=0?e.ownerDocument.body:gn(e)&&fr(e)?e:hr(Dn(e))}function dr(e,t){var n;void 0===t&&(t=[]);var r=hr(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=mn(r),o=i?[a].concat(a.visualViewport||[],fr(r)?r:[]):r,s=t.concat(o);return i?s:s.concat(dr(Dn(o)))}function pr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function vr(e,t,n){return t===Kn?pr(function(e,t){var n=mn(e),r=Pn(e),i=n.visualViewport,a=r.clientWidth,o=r.clientHeight,s=0,u=0;if(i){a=i.width,o=i.height;var c=En();(c||!c&&"fixed"===t)&&(s=i.offsetLeft,u=i.offsetTop)}return{width:a,height:o,x:s+lr(e),y:u}}(e,n)):yn(t)?function(e,t){var n=Sn(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):pr(function(e){var t,n=Pn(e),r=cr(e),i=null==(t=e.ownerDocument)?void 0:t.body,a=_n(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=_n(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+lr(e),u=-r.scrollTop;return"rtl"===Nn(i||n).direction&&(s+=_n(n.clientWidth,i?i.clientWidth:0)-a),{width:a,height:o,x:s,y:u}}(Pn(e)))}function mr(e,t,n,r){var i="clippingParents"===t?function(e){var t=dr(Dn(e)),n=["absolute","fixed"].indexOf(Nn(e).position)>=0&&gn(e)?An(e):e;return yn(n)?t.filter((function(e){return yn(e)&&Cn(e,n)&&"body"!==In(e)})):[]}(e):[].concat(t),a=[].concat(i,[n]),o=a[0],s=a.reduce((function(t,n){var i=vr(e,n,r);return t.top=_n(i.top,t.top),t.right=wn(i.right,t.right),t.bottom=wn(i.bottom,t.bottom),t.left=_n(i.left,t.left),t}),vr(e,o,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function yr(e){var t,n=e.reference,r=e.element,i=e.placement,a=i?vn(i):null,o=i?Zn(i):null,s=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(a){case Un:t={x:s,y:n.y-r.height};break;case Vn:t={x:s,y:n.y+n.height};break;case Bn:t={x:n.x+n.width,y:u};break;case qn:t={x:n.x-r.width,y:u};break;default:t={x:n.x,y:n.y}}var c=a?Mn(a):null;if(null!=c){var l="y"===c?"height":"width";switch(o){case Hn:t[c]=t[c]-(n[l]/2-r[l]/2);break;case Gn:t[c]=t[c]+(n[l]/2-r[l]/2)}}return t}function gr(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=void 0===r?e.placement:r,a=n.strategy,o=void 0===a?e.strategy:a,s=n.boundary,u=void 0===s?"clippingParents":s,c=n.rootBoundary,l=void 0===c?Kn:c,f=n.elementContext,h=void 0===f?Yn:f,d=n.altBoundary,p=void 0!==d&&d,v=n.padding,m=void 0===v?0:v,y=Fn("number"!==typeof m?m:jn(m,Wn)),g=h===Yn?"reference":Yn,k=e.rects.popper,_=e.elements[p?g:h],w=mr(yn(_)?_:_.contextElement||Pn(e.elements.popper),u,l,o),b=Sn(e.elements.reference),x=yr({reference:b,element:k,strategy:"absolute",placement:i}),E=pr(Object.assign({},k,x)),S=h===Yn?E:b,T={top:w.top-S.top+y.top,bottom:S.bottom-w.bottom+y.bottom,left:w.left-S.left+y.left,right:S.right-w.right+y.right},C=e.modifiersData.offset;if(h===Yn&&C){var I=C[i];Object.keys(T).forEach((function(e){var t=[Bn,Vn].indexOf(e)>=0?1:-1,n=[Un,Vn].indexOf(e)>=0?"y":"x";T[e]+=I[n]*t}))}return T}var kr={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0===o||o,u=n.fallbackPlacements,c=n.padding,l=n.boundary,f=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,p=void 0===d||d,v=n.allowedAutoPlacements,m=t.options.placement,y=vn(m),g=u||(y===m||!p?[or(m)]:function(e){if(vn(e)===zn)return[];var t=or(e);return[ur(e),t,ur(t)]}(m)),k=[m].concat(g).reduce((function(e,n){return e.concat(vn(n)===zn?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,a=n.rootBoundary,o=n.padding,s=n.flipVariations,u=n.allowedAutoPlacements,c=void 0===u?$n:u,l=Zn(r),f=l?s?Qn:Qn.filter((function(e){return Zn(e)===l})):Wn,h=f.filter((function(e){return c.indexOf(e)>=0}));0===h.length&&(h=f);var d=h.reduce((function(t,n){return t[n]=gr(e,{placement:n,boundary:i,rootBoundary:a,padding:o})[vn(n)],t}),{});return Object.keys(d).sort((function(e,t){return d[e]-d[t]}))}(t,{placement:n,boundary:l,rootBoundary:f,padding:c,flipVariations:p,allowedAutoPlacements:v}):n)}),[]),_=t.rects.reference,w=t.rects.popper,b=new Map,x=!0,E=k[0],S=0;S<k.length;S++){var T=k[S],C=vn(T),I=Zn(T)===Hn,N=[Un,Vn].indexOf(C)>=0,R=N?"width":"height",P=gr(t,{placement:T,boundary:l,rootBoundary:f,altBoundary:h,padding:c}),D=N?I?Bn:qn:I?Vn:Un;_[R]>w[R]&&(D=or(D));var O=or(D),A=[];if(a&&A.push(P[C]<=0),s&&A.push(P[D]<=0,P[O]<=0),A.every((function(e){return e}))){E=T,x=!1;break}b.set(T,A)}if(x)for(var M=function(e){var t=k.find((function(t){var n=b.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return E=t,"break"},L=p?3:1;L>0;L--){if("break"===M(L))break}t.placement!==E&&(t.modifiersData[r]._skip=!0,t.placement=E,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function _r(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function wr(e){return[Un,Bn,Vn,qn].some((function(t){return e[t]>=0}))}var br={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.offset,a=void 0===i?[0,0]:i,o=$n.reduce((function(e,n){return e[n]=function(e,t,n){var r=vn(e),i=[qn,Un].indexOf(r)>=0?-1:1,a="function"===typeof n?n(Object.assign({},t,{placement:e})):n,o=a[0],s=a[1];return o=o||0,s=(s||0)*i,[qn,Bn].indexOf(r)>=0?{x:s,y:o}:{x:o,y:s}}(n,t.rects,a),e}),{}),s=o[t.placement],u=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=u,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=o}};var xr={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,a=void 0===i||i,o=n.altAxis,s=void 0!==o&&o,u=n.boundary,c=n.rootBoundary,l=n.altBoundary,f=n.padding,h=n.tether,d=void 0===h||h,p=n.tetherOffset,v=void 0===p?0:p,m=gr(t,{boundary:u,rootBoundary:c,padding:f,altBoundary:l}),y=vn(t.placement),g=Zn(t.placement),k=!g,_=Mn(y),w="x"===_?"y":"x",b=t.modifiersData.popperOffsets,x=t.rects.reference,E=t.rects.popper,S="function"===typeof v?v(Object.assign({},t.rects,{placement:t.placement})):v,T="number"===typeof S?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),C=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(b){if(a){var N,R="y"===_?Un:qn,P="y"===_?Vn:Bn,D="y"===_?"height":"width",O=b[_],A=O+m[R],M=O-m[P],L=d?-E[D]/2:0,F=g===Hn?x[D]:E[D],j=g===Hn?-E[D]:-x[D],U=t.elements.arrow,V=d&&U?Tn(U):{width:0,height:0},B=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},q=B[R],z=B[P],W=Ln(0,x[D],V[D]),H=k?x[D]/2-L-W-q-T.mainAxis:F-W-q-T.mainAxis,G=k?-x[D]/2+L+W+z+T.mainAxis:j+W+z+T.mainAxis,K=t.elements.arrow&&An(t.elements.arrow),Y=K?"y"===_?K.clientTop||0:K.clientLeft||0:0,Q=null!=(N=null==C?void 0:C[_])?N:0,$=O+G-Q,X=Ln(d?wn(A,O+H-Q-Y):A,O,d?_n(M,$):M);b[_]=X,I[_]=X-O}if(s){var J,Z="x"===_?Un:qn,ee="x"===_?Vn:Bn,te=b[w],ne="y"===w?"height":"width",re=te+m[Z],ie=te-m[ee],ae=-1!==[Un,qn].indexOf(y),oe=null!=(J=null==C?void 0:C[w])?J:0,se=ae?re:te-x[ne]-E[ne]-oe+T.altAxis,ue=ae?te+x[ne]+E[ne]-oe-T.altAxis:ie,ce=d&&ae?function(e,t,n){var r=Ln(e,t,n);return r>n?n:r}(se,te,ue):Ln(d?se:re,te,d?ue:ie);b[w]=ce,I[w]=ce-te}t.modifiersData[r]=I}},requiresIfExists:["offset"]};function Er(e,t,n){void 0===n&&(n=!1);var r=gn(t),i=gn(t)&&function(e){var t=e.getBoundingClientRect(),n=bn(t.width)/e.offsetWidth||1,r=bn(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=Pn(t),o=Sn(e,i,n),s={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(r||!r&&!n)&&(("body"!==In(t)||fr(a))&&(s=function(e){return e!==mn(e)&&gn(e)?{scrollLeft:(t=e).scrollLeft,scrollTop:t.scrollTop}:cr(e);var t}(t)),gn(t)?((u=Sn(t,!0)).x+=t.clientLeft,u.y+=t.clientTop):a&&(u.x=lr(a))),{x:o.left+s.scrollLeft-u.x,y:o.top+s.scrollTop-u.y,width:o.width,height:o.height}}function Sr(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}function Tr(e){var t;return function(){return t||(t=new Promise((function(n){Promise.resolve().then((function(){t=void 0,n(e())}))}))),t}}var Cr={placement:"bottom",modifiers:[],strategy:"absolute"};function Ir(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"===typeof e.getBoundingClientRect)}))}function Nr(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,a=void 0===i?Cr:i;return function(e,t,n){void 0===n&&(n=a);var i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Cr,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},o=[],s=!1,u={state:i,setOptions:function(n){var s="function"===typeof n?n(i.options):n;c(),i.options=Object.assign({},a,i.options,s),i.scrollParents={reference:yn(e)?dr(e):e.contextElement?dr(e.contextElement):[],popper:dr(t)};var l=function(e){var t=Sr(e);return Xn.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,i.options.modifiers)));return i.orderedModifiers=l.filter((function(e){return e.enabled})),i.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,a=e.effect;if("function"===typeof a){var s=a({state:i,name:t,instance:u,options:r}),c=function(){};o.push(s||c)}})),u.update()},forceUpdate:function(){if(!s){var e=i.elements,t=e.reference,n=e.popper;if(Ir(t,n)){i.rects={reference:Er(t,An(n),"fixed"===i.options.strategy),popper:Tn(n)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach((function(e){return i.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<i.orderedModifiers.length;r++)if(!0!==i.reset){var a=i.orderedModifiers[r],o=a.fn,c=a.options,l=void 0===c?{}:c,f=a.name;"function"===typeof o&&(i=o({state:i,options:l,name:f,instance:u})||i)}else i.reset=!1,r=-1}}},update:Tr((function(){return new Promise((function(e){u.forceUpdate(),e(i)}))})),destroy:function(){c(),s=!0}};if(!Ir(e,t))return u;function c(){o.forEach((function(e){return e()})),o=[]}return u.setOptions(n).then((function(e){!s&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var Rr=Nr({defaultModifiers:[{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,a=t.modifiersData.preventOverflow,o=gr(t,{elementContext:"reference"}),s=gr(t,{altBoundary:!0}),u=_r(o,r),c=_r(s,i,a),l=wr(u),f=wr(c);t.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":f})}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=yr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},nr,ir,br,kr,xr,Jn]}),Pr=["enabled","placement","strategy","modifiers"];function Dr(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Or={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:function(){}},Ar={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var e=t.elements,n=e.reference,r=e.popper;if("removeAttribute"in n){var i=(n.getAttribute("aria-describedby")||"").split(",").filter((function(e){return e.trim()!==r.id}));i.length?n.setAttribute("aria-describedby",i.join(",")):n.removeAttribute("aria-describedby")}}},fn:function(e){var t,n=e.state.elements,r=n.popper,i=n.reference,a=null==(t=r.getAttribute("role"))?void 0:t.toLowerCase();if(r.id&&"tooltip"===a&&"setAttribute"in i){var o=i.getAttribute("aria-describedby");if(o&&-1!==o.split(",").indexOf(r.id))return;i.setAttribute("aria-describedby",o?"".concat(o,",").concat(r.id):r.id)}}},Mr=[];var Lr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.enabled,a=void 0===i||i,o=n.placement,s=void 0===o?"bottom":o,c=n.strategy,l=void 0===c?"absolute":c,f=n.modifiers,h=void 0===f?Mr:f,d=Dr(n,Pr),p=(0,r.useRef)(h),v=(0,r.useRef)(),m=(0,r.useCallback)((function(){var e;null==(e=v.current)||e.update()}),[]),y=(0,r.useCallback)((function(){var e;null==(e=v.current)||e.forceUpdate()}),[]),g=pn((0,r.useState)({placement:s,update:m,forceUpdate:y,attributes:{},styles:{popper:{},arrow:{}}})),k=b(g,2),_=k[0],w=k[1],x=(0,r.useMemo)((function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var t=e.state,n={},r={};Object.keys(t.elements).forEach((function(e){n[e]=t.styles[e],r[e]=t.attributes[e]})),w({state:t,styles:n,attributes:r,update:m,forceUpdate:y,placement:t.placement})}}}),[m,y,w]),E=(0,r.useMemo)((function(){return hn(p.current,h)||(p.current=h),p.current}),[h]);return(0,r.useEffect)((function(){v.current&&a&&v.current.setOptions({placement:s,strategy:l,modifiers:[].concat(u(E),[x,Or])})}),[l,s,x,a,E]),(0,r.useEffect)((function(){if(a&&null!=e&&null!=t)return v.current=Rr(e,t,Object.assign({},d,{placement:s,strategy:l,modifiers:[].concat(u(E),[Ar,x])})),function(){null!=v.current&&(v.current.destroy(),v.current=void 0,w((function(e){return Object.assign({},e,{attributes:{},styles:{popper:{}}})})))}}),[a,e,t]),_};function Fr(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}var jr=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var Ur=function(e,t,n,r){return Qt(e,t,n,r),function(){jr(e,t,n,r)}};function Vr(e){return e&&e.ownerDocument||document}var Br=n(391),qr=n.n(Br),zr=function(){};function Wr(e){return 0===e.button}function Hr(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var Gr=function(e){return e&&("current"in e?e.current:e)},Kr={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};var Yr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zr,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.disabled,a=n.clickTrigger,o=void 0===a?"click":a,s=(0,r.useRef)(!1),u=(0,r.useRef)(!1),c=(0,r.useCallback)((function(t){var n=Gr(e);qr()(!!n,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!n||Hr(t)||!Wr(t)||!!Fr(n,t.target)||u.current,u.current=!1}),[e]),l=on((function(t){var n=Gr(e);n&&Fr(n,t.target)&&(u.current=!0)})),f=on((function(e){s.current||t(e)}));(0,r.useEffect)((function(){if(!i&&null!=e){var t=Vr(Gr(e)),n=(t.defaultView||window).event,r=null;Kr[o]&&(r=Ur(t,Kr[o],l,!0));var a=Ur(t,o,c,!0),s=Ur(t,o,(function(e){e!==n?f(e):n=void 0})),u=[];return"ontouchstart"in t.documentElement&&(u=[].slice.call(t.body.children).map((function(e){return Ur(e,"mousemove",zr)}))),function(){null==r||r(),a(),s(),u.forEach((function(e){return e()}))}}}),[e,i,o,c,l,f])};function Qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.isArray(e)?e:Object.keys(e).map((function(t){return e[t].name=t,e[t]}))}function $r(e){var t,n,r,i,a=e.enabled,o=e.enableEvents,s=e.placement,u=e.flip,c=e.offset,l=e.fixed,f=e.containerPadding,h=e.arrowElement,d=e.popperConfig,p=void 0===d?{}:d,v=function(e){var t={};return Array.isArray(e)?(null==e||e.forEach((function(e){t[e.name]=e})),t):e||t}(p.modifiers);return Object.assign({},p,{placement:s,enabled:a,strategy:l?"fixed":p.strategy,modifiers:Qr(Object.assign({},v,{eventListeners:{enabled:o},preventOverflow:Object.assign({},v.preventOverflow,{options:f?Object.assign({padding:f},null==(t=v.preventOverflow)?void 0:t.options):null==(n=v.preventOverflow)?void 0:n.options}),offset:{options:Object.assign({offset:c},null==(r=v.offset)?void 0:r.options)},arrow:Object.assign({},v.arrow,{enabled:!!h,options:Object.assign({},null==(i=v.arrow)?void 0:i.options,{element:h})}),flip:Object.assign({enabled:!!u},v.flip)}))})}var Xr=n(184),Jr=["children"];var Zr=function(){};function ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.useContext)(sn),n=un(),i=b(n,2),a=i[0],o=i[1],s=(0,r.useRef)(!1),u=e.flip,c=e.offset,l=e.rootCloseEvent,f=e.fixed,h=void 0!==f&&f,d=e.placement,p=e.popperConfig,v=void 0===p?{}:p,m=e.enableEventListeners,y=void 0===m||m,g=e.usePopper,k=void 0===g?!!t:g,_=null==(null==t?void 0:t.show)?!!e.show:t.show;_&&!s.current&&(s.current=!0);var w=function(e){null==t||t.toggle(!1,e)},x=t||{},E=x.placement,S=x.setMenu,T=x.menuElement,C=x.toggleElement,I=Lr(C,T,$r({placement:d||E||"bottom-start",enabled:k,enableEvents:null==y?_:y,offset:c,flip:u,fixed:h,arrowElement:a,popperConfig:v})),N=Object.assign({ref:S||Zr,"aria-labelledby":null==C?void 0:C.id},I.attributes.popper,{style:I.styles.popper}),R={show:_,placement:E,hasShown:s.current,toggle:null==t?void 0:t.toggle,popper:k?I:null,arrowProps:k?Object.assign({ref:o},I.attributes.arrow,{style:I.styles.arrow}):{}};return Yr(T,w,{clickTrigger:l,disabled:!_}),[N,R]}function ti(e){var t=e.children,n=b(ei(function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Jr)),2),r=n[0],i=n[1];return(0,Xr.jsx)(Xr.Fragment,{children:t(r,i)})}ti.displayName="DropdownMenu",ti.defaultProps={usePopper:!0};var ni=ti,ri={prefix:String(Math.round(1e10*Math.random())),current:0},ii=r.createContext(ri);var ai=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement);var oi=function(e){var t;return"menu"===(null==(t=e.getAttribute("role"))?void 0:t.toLowerCase())},si=function(){};function ui(){var e=function(e){var t=(0,r.useContext)(ii);return t!==ri||ai||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server."),(0,r.useMemo)((function(){return e||"react-aria".concat(t.prefix,"-").concat(++t.current)}),[e])}(),t=(0,r.useContext)(sn)||{},n=t.show,i=void 0!==n&&n,a=t.toggle,o=void 0===a?si:a,s=t.setToggle,u=t.menuElement,c=(0,r.useCallback)((function(e){o(!i,e)}),[i,o]),l={id:e,ref:s||si,onClick:c,"aria-expanded":!!i};return u&&oi(u)&&(l["aria-haspopup"]=!0),[l,{show:i,toggle:o}]}function ci(e){var t=e.children,n=b(ui(),2),r=n[0],i=n[1];return(0,Xr.jsx)(Xr.Fragment,{children:t(r,i)})}ci.displayName="DropdownToggle";var li=ci,fi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},hi=r.createContext(null),di=r.createContext(null);di.displayName="NavContext";var pi=di,vi=["as","disabled"];function mi(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.role,s=e.onClick,u=e.tabIndex,c=void 0===u?0:u,l=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var f={tagName:t};if("button"===t)return[{type:l||"button",disabled:n},f];var h=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==s||s(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:c,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:h,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),h(e))}},f]}var yi=r.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,vi),a=b(mi(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],s=a[1].tagName;return(0,Xr.jsx)(s,Object.assign({},i,o,{ref:t}))}));yi.displayName="Button";var gi=yi;function ki(e){return"".concat("data-rr-ui-").concat(e)}var _i=["eventKey","disabled","onClick","active","as"];function wi(e){var t=e.key,n=e.href,i=e.active,a=e.disabled,o=e.onClick,s=(0,r.useContext)(hi),u=((0,r.useContext)(pi)||{}).activeKey,c=fi(t,n),l=null==i&&null!=t?fi(u)===c:i;return[Ft({onClick:on((function(e){a||(null==o||o(e),s&&!e.isPropagationStopped()&&s(c,e))})),"aria-disabled":a||void 0,"aria-selected":l},ki("dropdown-item"),""),{isActive:l}]}var bi=r.forwardRef((function(e,t){var n=e.eventKey,r=e.disabled,i=e.onClick,a=e.active,o=e.as,s=void 0===o?gi:o,u=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,_i),c=b(wi({key:n,href:u.href,disabled:r,onClick:i,active:a}),1)[0];return(0,Xr.jsx)(s,Object.assign({},u,{ref:t},c))}));bi.displayName="DropdownItem";var xi=bi,Ei=(0,r.createContext)(Ht?window:void 0);Ei.Provider;function Si(){return(0,r.useContext)(Ei)}function Ti(){var e=(0,r.useReducer)((function(e){return!e}),!1)[1],t=(0,r.useRef)(null),n=(0,r.useCallback)((function(n){t.current=n,e()}),[e]);return[t,n]}function Ci(e){var t=e.defaultShow,n=e.show,i=e.onSelect,a=e.onToggle,o=e.itemSelector,s=void 0===o?"* [".concat(ki("dropdown-item"),"]"):o,u=e.focusFirstItemOnShow,c=e.placement,l=void 0===c?"bottom-start":c,f=e.children,h=Si(),d=b(Jt(n,t,a),2),p=d[0],v=d[1],m=b(Ti(),2),y=m[0],g=m[1],k=y.current,_=b(Ti(),2),w=_[0],x=_[1],E=w.current,S=rn(p),T=(0,r.useRef)(null),C=(0,r.useRef)(!1),I=(0,r.useContext)(hi),N=(0,r.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?void 0:t.type;v(e,{originalEvent:t,source:n})}),[v]),R=on((function(e,t){null==i||i(e,t),N(!1,t,"select"),t.isPropagationStopped()||null==I||I(e,t)})),P=(0,r.useMemo)((function(){return{toggle:N,placement:l,show:p,menuElement:k,toggleElement:E,setMenu:g,setToggle:x}}),[N,l,p,k,E,g,x]);k&&S&&!p&&(C.current=k.contains(k.ownerDocument.activeElement));var D=on((function(){E&&E.focus&&E.focus()})),O=on((function(){var e=T.current,t=u;if(null==t&&(t=!(!y.current||!oi(y.current))&&"keyboard"),!1!==t&&("keyboard"!==t||/^key.+$/.test(e))){var n=Wt(y.current,s)[0];n&&n.focus&&n.focus()}}));(0,r.useEffect)((function(){p?O():C.current&&(C.current=!1,D())}),[p,C,D,O]),(0,r.useEffect)((function(){T.current=null}));var A=function(e,t){if(!y.current)return null;var n=Wt(y.current,s),r=n.indexOf(e)+t;return n[r=Math.max(0,Math.min(r,n.length))]};return function(e,t,n,i){void 0===i&&(i=!1);var a=on(n);(0,r.useEffect)((function(){var n="function"===typeof e?e():e;return n.addEventListener(t,a,i),function(){return n.removeEventListener(t,a,i)}}),[e])}((0,r.useCallback)((function(){return h.document}),[h]),"keydown",(function(e){var t,n,r=e.key,i=e.target,a=null==(t=y.current)?void 0:t.contains(i),o=null==(n=w.current)?void 0:n.contains(i);if((!/input|textarea/i.test(i.tagName)||!(" "===r||"Escape"!==r&&a||"Escape"===r&&"search"===i.type))&&(a||o)&&("Tab"!==r||y.current&&p)){T.current=e.type;var s={originalEvent:e,source:e.type};switch(r){case"ArrowUp":var u=A(i,-1);return u&&u.focus&&u.focus(),void e.preventDefault();case"ArrowDown":if(e.preventDefault(),p){var c=A(i,1);c&&c.focus&&c.focus()}else v(!0,s);return;case"Tab":Qt(i.ownerDocument,"keyup",(function(e){var t;("Tab"!==e.key||e.target)&&null!=(t=y.current)&&t.contains(e.target)||v(!1,s)}),{once:!0});break;case"Escape":"Escape"===r&&(e.preventDefault(),e.stopPropagation()),v(!1,s)}}})),(0,Xr.jsx)(hi.Provider,{value:R,children:(0,Xr.jsx)(sn.Provider,{value:P,children:f})})}Ci.displayName="Dropdown",Ci.Menu=ni,Ci.Toggle=li,Ci.Item=xi;var Ii=Ci,Ni=r.createContext({});Ni.displayName="DropdownContext";var Ri=Ni;var Pi="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,Di="undefined"!==typeof document||Pi?r.useLayoutEffect:r.useEffect;new WeakMap;var Oi=["onKeyDown"];var Ai=r.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Oi),a=b(mi(Object.assign({tagName:"a"},i)),1)[0],o=on((function(e){a.onKeyDown(e),null==r||r(e)}));return(n=i.href)&&"#"!==n.trim()&&"button"!==i.role?(0,Xr.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,Xr.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));Ai.displayName="Anchor";var Mi=Ai,Li=["xxl","xl","lg","md","sm","xs"],Fi=r.createContext({prefixes:{},breakpoints:Li,minBreakpoint:"xs"});Fi.Consumer,Fi.Provider;function ji(e,t){var n=(0,r.useContext)(Fi).prefixes;return e||n[t]||t}function Ui(){return(0,r.useContext)(Fi).breakpoints}function Vi(){return(0,r.useContext)(Fi).minBreakpoint}function Bi(){return"rtl"===(0,r.useContext)(Fi).dir}var qi=["bsPrefix","className","eventKey","disabled","onClick","active","as"],zi=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.eventKey,a=e.disabled,o=void 0!==a&&a,s=e.onClick,u=e.active,c=e.as,l=void 0===c?Mi:c,f=Vt(e,qi),h=ji(n,"dropdown-item"),d=b(wi({key:i,href:f.href,disabled:o,onClick:s,active:u}),2),p=d[0],v=d[1];return(0,Xr.jsx)(l,Ut(Ut(Ut({},f),p),{},{ref:t,className:qt()(r,h,v.isActive&&"active",o&&"disabled")}))}));zi.displayName="DropdownItem";var Wi=zi,Hi=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var Gi=function(e,t){return(0,r.useMemo)((function(){return function(e,t){var n=Hi(e),r=Hi(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])},Ki=r.createContext(null);Ki.displayName="InputGroupContext";var Yi=Ki,Qi=r.createContext(null);Qi.displayName="NavbarContext";var $i=Qi;function Xi(e,t){return e}var Ji=["bsPrefix","className","align","rootCloseEvent","flip","show","renderOnMount","as","popperConfig","variant"];function Zi(e,t,n){var r=e?n?"bottom-start":"bottom-end":n?"bottom-end":"bottom-start";return"up"===t?r=e?n?"top-start":"top-end":n?"top-end":"top-start":"end"===t?r=e?n?"left-end":"right-end":n?"left-start":"right-start":"start"===t&&(r=e?n?"right-end":"left-end":n?"right-start":"left-start"),r}var ea=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,a=e.align,o=e.rootCloseEvent,s=e.flip,u=e.show,c=e.renderOnMount,l=e.as,f=void 0===l?"div":l,h=e.popperConfig,d=e.variant,p=Vt(e,Ji),v=!1,m=(0,r.useContext)($i),y=ji(n,"dropdown-menu"),g=(0,r.useContext)(Ri),k=g.align,_=g.drop,w=g.isRTL;a=a||k;var x=(0,r.useContext)(Yi),E=[];if(a)if("object"===typeof a){var S=Object.keys(a);if(S.length){var T=S[0],C=a[T];v="start"===C,E.push("".concat(y,"-").concat(T,"-").concat(C))}}else"end"===a&&(v=!0);var I=Zi(v,_,w),N=b(ei({flip:s,rootCloseEvent:o,show:u,usePopper:!m&&0===E.length,offset:[0,2],popperConfig:h,placement:I}),2),R=N[0],P=N[1],D=P.hasShown,O=P.popper,A=P.show,M=P.toggle;if(R.ref=Gi(Xi(t),R.ref),Di((function(){A&&(null==O||O.update())}),[A]),!D&&!c&&!x)return null;"string"!==typeof f&&(R.show=A,R.close=function(){return null==M?void 0:M(!1)},R.align=a);var L=p.style;return null!=O&&O.placement&&(L=Ut(Ut({},p.style),R.style),p["x-placement"]=O.placement),(0,Xr.jsx)(f,Ut(Ut(Ut(Ut({},p),R),{},{style:L},(E.length||m)&&{"data-bs-popper":"static"}),{},{className:qt().apply(void 0,[i,y,A&&"show",v&&"".concat(y,"-end"),d&&"".concat(y,"-").concat(d)].concat(E))}))}));ea.displayName="DropdownMenu",ea.defaultProps={flip:!0};var ta=ea,na=["as","bsPrefix","variant","size","active","className"],ra=r.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=e.size,o=e.active,s=e.className,u=Vt(e,na),c=ji(r,"btn"),l=b(mi(Ut({tagName:n},u)),2),f=l[0],h=l[1].tagName;return(0,Xr.jsx)(h,Ut(Ut(Ut({},f),u),{},{ref:t,className:qt()(s,c,o&&"active",i&&"".concat(c,"-").concat(i),a&&"".concat(c,"-").concat(a),u.href&&u.disabled&&"disabled")}))}));ra.displayName="Button",ra.defaultProps={variant:"primary",active:!1,disabled:!1};var ia=ra,aa=["bsPrefix","split","className","childBsPrefix","as"],oa=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.split,a=e.className,o=e.childBsPrefix,s=e.as,u=void 0===s?ia:s,c=Vt(e,aa),l=ji(n,"dropdown-toggle"),f=(0,r.useContext)(sn),h=(0,r.useContext)(Yi);void 0!==o&&(c.bsPrefix=o);var d=b(ui(),1)[0];return d.ref=Gi(d.ref,Xi(t)),(0,Xr.jsx)(u,Ut(Ut({className:qt()(a,l,i&&"".concat(l,"-split"),!!h&&(null==f?void 0:f.show)&&"show")},d),c))}));oa.displayName="DropdownToggle";var sa=oa,ua=/-(.)/g;var ca=["className","bsPrefix","as"],la=function(e){return e[0].toUpperCase()+(t=e,t.replace(ua,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function fa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.displayName,i=void 0===n?la(e):n,a=t.Component,o=t.defaultProps,s=r.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,o=t.as,s=void 0===o?a||"div":o,u=Vt(t,ca),c=ji(i,e);return(0,Xr.jsx)(s,Ut({ref:n,className:qt()(r,c)},u))}));return s.defaultProps=o,s.displayName=i,s}var ha=["bsPrefix","drop","show","className","align","onSelect","onToggle","focusFirstItemOnShow","as","navbar","autoClose"],da=fa("dropdown-header",{defaultProps:{role:"heading"}}),pa=fa("dropdown-divider",{Component:"hr",defaultProps:{role:"separator"}}),va=fa("dropdown-item-text",{Component:"span"}),ma=r.forwardRef((function(e,t){var n=Zt(e,{show:"onToggle"}),i=n.bsPrefix,a=n.drop,o=n.show,s=n.className,u=n.align,c=n.onSelect,l=n.onToggle,f=n.focusFirstItemOnShow,h=n.as,d=void 0===h?"div":h,p=(n.navbar,n.autoClose),v=Vt(n,ha),m=(0,r.useContext)(Yi),y=ji(i,"dropdown"),g=Bi(),k=on((function(e,t){var n;t.originalEvent.currentTarget!==document||"keydown"===t.source&&"Escape"!==t.originalEvent.key||(t.source="rootClose"),n=t.source,(!1===p?"click"===n:"inside"===p?"rootClose"!==n:"outside"!==p||"select"!==n)&&(null==l||l(e,t))})),_=Zi("end"===u,a,g),w=(0,r.useMemo)((function(){return{align:u,drop:a,isRTL:g}}),[u,a,g]);return(0,Xr.jsx)(Ri.Provider,{value:w,children:(0,Xr.jsx)(Ii,{placement:_,show:o,onSelect:c,onToggle:k,focusFirstItemOnShow:f,itemSelector:".".concat(y,"-item:not(.disabled):not(:disabled)"),children:m?v.children:(0,Xr.jsx)(d,Ut(Ut({},v),{},{ref:t,className:qt()(s,o&&"show",(!a||"down"===a)&&y,"up"===a&&"dropup","end"===a&&"dropend","start"===a&&"dropstart")}))})})}));ma.displayName="Dropdown",ma.defaultProps={navbar:!1,align:"start",autoClose:!0};var ya=Object.assign(ma,{Toggle:sa,Menu:ta,Item:Wi,ItemText:va,Divider:pa,Header:da}),ga=n(7),ka=n.n(ga),_a=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],wa=(ka().string,ka().bool,ka().bool,ka().bool,ka().bool,r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.fluid,a=e.rounded,o=e.roundedCircle,s=e.thumbnail,u=Vt(e,_a);return n=ji(n,"img"),(0,Xr.jsx)("img",Ut(Ut({ref:t},u),{},{className:qt()(r,i&&"".concat(n,"-fluid"),a&&"rounded",o&&"rounded-circle",s&&"".concat(n,"-thumbnail"))}))})));wa.displayName="Image",wa.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1};var ba=wa,xa=!1,Ea=!1,Sa="${JSCORE_VERSION}",Ta=function(e,t){if(!e)throw Ca(t)},Ca=function(e){return new Error("Firebase Database ("+Sa+") INTERNAL ASSERT FAILED: "+e)},Ia=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Na={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ia(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new Ra;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ra=function(e){d(n,e);var t=k(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return f(n)}(E(Error)),Pa=function(e){var t=Ia(e);return Na.encodeByteArray(t,!0)},Da=function(e){return Pa(e).replace(/\./g,"")},Oa=function(e){try{return Na.decodeString(e,!0)}catch(kY){console.error("base64Decode failed: ",kY)}return null};function Aa(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Aa(e[n],t[n]));return e}var Ma=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},La=function(){try{return Ma()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/react-firebase-chatting-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(kY){return}var t=e&&Oa(e[1]);return t&&JSON.parse(t)}}()}catch(kY){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(kY))}},Fa=function(){var e;return null===(e=La())||void 0===e?void 0:e.config},ja=function(){function e(){var t=this;c(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return f(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ua(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Da(JSON.stringify({alg:"none",type:"JWT"})),Da(JSON.stringify(a)),""].join(".")}function Va(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ba(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Va())}function qa(){var e,t=null===(e=La())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(kY){return!1}}function za(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Wa(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ha(){var e=Va();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ga(){return!0===xa||!0===Ea}function Ka(){try{return"object"===typeof indexedDB}catch(kY){return!1}}var Ya=function(e){d(n,e);var t=k(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(y(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(y(a),Qa.prototype.create),a}return f(n)}(E(Error)),Qa=function(){function e(t,n,r){c(this,e),this.service=t,this.serviceName=n,this.errors=r}return f(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?$a(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ya(n,a,t);return o}}]),e}();function $a(e,t){return e.replace(Xa,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Xa=/\{\$([^}]+)}/g;function Ja(e){return JSON.parse(e)}function Za(e){return JSON.stringify(e)}var eo=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Ja(Oa(a[0])||""),n=Ja(Oa(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(kY){}return{header:t,claims:n,data:r,signature:i}};function to(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function no(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ro(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function io(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ao(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(oo(s)&&oo(u)){if(!ao(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function oo(e){return null!==e&&"object"===typeof e}function so(e){for(var t=[],n=function(){var e=b(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function uo(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=b(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function co(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var lo=function(){function e(){c(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return f(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=h^l&(f^h),u=1518500249):(s=l^f^h,u=1859775393):p<60?(s=l&f|h&(l|f),u=2400959708):(s=l^f^h,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function fo(e,t){var n=new ho(e,t);return n.subscribe.bind(n)}var ho=function(){function e(t,n){var r=this;c(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return f(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=cn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=po),void 0===r.error&&(r.error=po),void 0===r.complete&&(r.complete=po);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(kY){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(kY){"undefined"!==typeof console&&console.error&&console.error(kY)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function po(){}var vo=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function mo(e,t){return"".concat(e," failed: ").concat(t," argument ")}function yo(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(mo(e,t)+"must be a valid function.")}function go(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(mo(e,t)+"must be a valid context object.")}var ko=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function _o(e){return e&&e._delegate?e._delegate:e}var wo=function(){function e(t,n,r){c(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return f(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),bo="[DEFAULT]",xo=function(){function e(t,n){c(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return f(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ja;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(kY){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(kY){if(r)return null;throw kY}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch(kY){}var t,n=cn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=b(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(kY){}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bo;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(u(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),u(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bo;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bo;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=cn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=b(i.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=cn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(nR){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===bo?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(nR){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bo;return this.component?this.component.multipleInstances?e:bo:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Eo,So,To=function(){function e(t){c(this,e),this.name=t,this.providers=new Map}return f(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new xo(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Co=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(So||(So={}));var Io={debug:So.DEBUG,verbose:So.VERBOSE,info:So.INFO,warn:So.WARN,error:So.ERROR,silent:So.SILENT},No=So.INFO,Ro=(Ft(Eo={},So.DEBUG,"log"),Ft(Eo,So.VERBOSE,"log"),Ft(Eo,So.INFO,"info"),Ft(Eo,So.WARN,"warn"),Ft(Eo,So.ERROR,"error"),Eo),Po=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Ro[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Do=function(){function e(t){c(this,e),this.name=t,this._logLevel=No,this._logHandler=Po,this._userLogHandler=null,Co.push(this)}return f(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in So))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Io[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,So.DEBUG].concat(t)),this._logHandler.apply(this,[this,So.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,So.VERBOSE].concat(t)),this._logHandler.apply(this,[this,So.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,So.INFO].concat(t)),this._logHandler.apply(this,[this,So.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,So.WARN].concat(t)),this._logHandler.apply(this,[this,So.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,So.ERROR].concat(t)),this._logHandler.apply(this,[this,So.ERROR].concat(t))}}]),e}();var Oo,Ao;var Mo=new WeakMap,Lo=new WeakMap,Fo=new WeakMap,jo=new WeakMap,Uo=new WeakMap;var Vo={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Lo.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Fo.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zo(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Bo(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ao||(Ao=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Wo(this),n),zo(Mo.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zo(e.apply(Wo(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Wo(this),t].concat(r));return Fo.set(a,t.sort?t.sort():[t]),zo(a)}}function qo(e){return"function"===typeof e?Bo(e):(e instanceof IDBTransaction&&function(e){if(!Lo.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Lo.set(e,t)}}(e),t=e,(Oo||(Oo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Vo):e);var t}function zo(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(zo(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Mo.set(t,e)})).catch((function(){})),Uo.set(t,e),t}(e);if(jo.has(e))return jo.get(e);var t=qo(e);return t!==e&&(jo.set(e,t),Uo.set(t,e)),t}var Wo=function(e){return Uo.get(e)};var Ho,Go,Ko=["get","getKey","getAll","getAllKeys","count"],Yo=["put","add","delete","clear"],Qo=new Map;function $o(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Qo.get(t))return Qo.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Yo.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ko.includes(n))){var a=function(){var e=Oe(Pe().mark((function e(t){var a,o,s,u,c,l,f=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=f.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=f[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Qo.set(t,a),a}}}Vo=function(e){return Ut(Ut({},e),{},{get:function(t,n,r){return $o(t,n)||e.get(t,n,r)},has:function(t,n){return!!$o(t,n)||e.has(t,n)}})}(Vo);var Xo=function(){function e(t){c(this,e),this.container=t}return f(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Jo="@firebase/app",Zo="0.9.13",es=new Do("@firebase/app"),ts="[DEFAULT]",ns=(Ft(Ho={},Jo,"fire-core"),Ft(Ho,"@firebase/app-compat","fire-core-compat"),Ft(Ho,"@firebase/analytics","fire-analytics"),Ft(Ho,"@firebase/analytics-compat","fire-analytics-compat"),Ft(Ho,"@firebase/app-check","fire-app-check"),Ft(Ho,"@firebase/app-check-compat","fire-app-check-compat"),Ft(Ho,"@firebase/auth","fire-auth"),Ft(Ho,"@firebase/auth-compat","fire-auth-compat"),Ft(Ho,"@firebase/database","fire-rtdb"),Ft(Ho,"@firebase/database-compat","fire-rtdb-compat"),Ft(Ho,"@firebase/functions","fire-fn"),Ft(Ho,"@firebase/functions-compat","fire-fn-compat"),Ft(Ho,"@firebase/installations","fire-iid"),Ft(Ho,"@firebase/installations-compat","fire-iid-compat"),Ft(Ho,"@firebase/messaging","fire-fcm"),Ft(Ho,"@firebase/messaging-compat","fire-fcm-compat"),Ft(Ho,"@firebase/performance","fire-perf"),Ft(Ho,"@firebase/performance-compat","fire-perf-compat"),Ft(Ho,"@firebase/remote-config","fire-rc"),Ft(Ho,"@firebase/remote-config-compat","fire-rc-compat"),Ft(Ho,"@firebase/storage","fire-gcs"),Ft(Ho,"@firebase/storage-compat","fire-gcs-compat"),Ft(Ho,"@firebase/firestore","fire-fst"),Ft(Ho,"@firebase/firestore-compat","fire-fst-compat"),Ft(Ho,"fire-js","fire-js"),Ft(Ho,"firebase","fire-js-all"),Ho),rs=new Map,is=new Map;function as(e,t){try{e.container.addComponent(t)}catch(kY){es.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),kY)}}function os(e,t){e.container.addOrOverwriteComponent(t)}function ss(e){var t=e.name;if(is.has(t))return es.debug("There were multiple attempts to register component ".concat(t,".")),!1;is.set(t,e);var n,r=cn(rs.values());try{for(r.s();!(n=r.n()).done;){as(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function us(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function cs(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ts;us(e,t).clearInstance(n)}function ls(){is.clear()}var fs=(Ft(Go={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Ft(Go,"bad-app-name","Illegal App name: '{$appName}"),Ft(Go,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ft(Go,"app-deleted","Firebase App named '{$appName}' already deleted"),Ft(Go,"no-options","Need to provide options, when not being deployed to hosting via source."),Ft(Go,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ft(Go,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ft(Go,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Ft(Go,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Ft(Go,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Ft(Go,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Go),hs=new Qa("app","Firebase",fs),ds=function(){function e(t,n,r){var i=this;c(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wo("app",(function(){return i}),"PUBLIC"))}return f(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}]),e}(),ps="9.23.0";function vs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:ts,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw hs.create("bad-app-name",{appName:String(a)});if(n||(n=Fa()),!n)throw hs.create("no-options");var o=rs.get(a);if(o){if(ao(n,o.options)&&ao(i,o.config))return o;throw hs.create("duplicate-app",{appName:a})}var s,u=new To(a),c=cn(is.values());try{for(c.s();!(s=c.n()).done;){var l=s.value;u.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new ds(n,i,u);return rs.set(a,f),f}function ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ts,t=rs.get(e);if(!t&&e===ts&&Fa())return vs();if(!t)throw hs.create("no-app",{appName:e});return t}function ys(){return Array.from(rs.values())}function gs(e){return ks.apply(this,arguments)}function ks(){return(ks=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!rs.has(n)){e.next=6;break}return rs.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _s(e,t,n){var r,i=null!==(r=ns[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void es.warn(s.join(" "))}ss(new wo("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ws(e,t){if(null!==e&&"function"!==typeof e)throw hs.create("invalid-log-argument");!function(e,t){var n,r=cn(Co);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Io[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:So[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function bs(e){var t;t=e,Co.forEach((function(e){e.setLogLevel(t)}))}var xs="firebase-heartbeat-store",Es=null;function Ss(){return Es||(Es=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=zo(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(zo(s.result),e.oldVersion,e.newVersion,zo(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(xs)}}).catch((function(e){throw hs.create("idb-open",{originalErrorMessage:e.message})}))),Es}function Ts(e){return Cs.apply(this,arguments)}function Cs(){return Cs=Oe(Pe().mark((function e(t){var n,r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ss();case 3:return n=e.sent,e.next=6,n.transaction(xs).objectStore(xs).get(Rs(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Ya?es.warn(e.t0.message):(i=hs.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),es.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Cs.apply(this,arguments)}function Is(e,t){return Ns.apply(this,arguments)}function Ns(){return Ns=Oe(Pe().mark((function e(t,n){var r,i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ss();case 3:return r=e.sent,i=r.transaction(xs,"readwrite"),a=i.objectStore(xs),e.next=8,a.put(n,Rs(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Ya?es.warn(e.t0.message):(o=hs.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),es.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Ns.apply(this,arguments)}function Rs(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ps=function(){function e(t){var n=this;c(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ls(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return f(e,[{key:"triggerHeartbeat",value:function(){var e=Oe(Pe().mark((function e(){var t,n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ds(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Oe(Pe().mark((function e(){var t,n,r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ds(),n=Os(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Da(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ds(){return(new Date).toISOString().substring(0,10)}function Os(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=cn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Fs(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Fs(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var As,Ms,Ls=function(){function e(t){c(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return f(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ka()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(CO){t(CO)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ts(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Is(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Is(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(u(r.heartbeats),u(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Fs(e){return Da(JSON.stringify({version:2,heartbeats:e})).length}As="",ss(new wo("platform-logger",(function(e){return new Xo(e)}),"PRIVATE")),ss(new wo("heartbeat",(function(e){return new Ps(e)}),"PRIVATE")),_s(Jo,Zo,As),_s(Jo,Zo,"esm2017"),_s("fire-js","");var js=function(){function e(t,n){var r=this;c(this,e),this._delegate=t,this.firebase=n,as(t,new wo("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return f(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),gs(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ts;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ts;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){as(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){os(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Us=(Ft(Ms={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ft(Ms,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ms),Vs=new Qa("app-compat","Firebase",Us);var Bs=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=vs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(to(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:_s,setLogLevel:bs,onLog:ws,apps:null,SDK_VERSION:ps,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(ss(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Vs.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Aa(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!to(n,e=e||ts))throw Vs.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(js);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Aa(n,e)},createSubscribe:fo,ErrorFactory:Qa,deepExtend:Aa}),n}(),qs=new Do("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){qs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var zs=self.firebase.SDK_VERSION;zs&&zs.indexOf("LITE")>=0&&qs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ws=Bs;!function(e){_s("@firebase/app-compat","0.2.13",e)}();function Hs(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function Gs(){return Gs="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Hs(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Gs.apply(this,arguments)}Ws.registerVersion("firebase","9.23.0","app-compat");function Ks(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ys;Object.create;var Qs="facebook.com",$s="github.com",Xs="google.com",Js="password",Zs="twitter.com",eu="EMAIL_SIGNIN",tu="PASSWORD_RESET",nu="RECOVER_EMAIL",ru="REVERT_SECOND_FACTOR_ADDITION",iu="VERIFY_AND_CHANGE_EMAIL",au="VERIFY_EMAIL";function ou(){return Ft({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var su=function(){var e;return Ft(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ft(e,"argument-error",""),Ft(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ft(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ft(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ft(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ft(e,"cordova-not-ready","Cordova framework is not ready."),Ft(e,"cors-unsupported","This browser is not supported."),Ft(e,"credential-already-in-use","This credential is already associated with a different user account."),Ft(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ft(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ft(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ft(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ft(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ft(e,"email-already-in-use","The email address is already in use by another account."),Ft(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ft(e,"expired-action-code","The action code has expired."),Ft(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ft(e,"internal-error","An internal AuthError has occurred."),Ft(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ft(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ft(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ft(e,"invalid-auth-event","An internal AuthError has occurred."),Ft(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ft(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ft(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ft(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ft(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ft(e,"invalid-email","The email address is badly formatted."),Ft(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ft(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ft(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ft(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ft(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ft(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ft(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ft(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ft(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ft(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ft(e,"wrong-password","The password is invalid or the user does not have a password."),Ft(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ft(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ft(e,"invalid-provider-id","The specified provider ID is invalid."),Ft(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ft(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ft(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ft(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ft(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Ft(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ft(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ft(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ft(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ft(e,"missing-continue-uri","A continue URL must be provided in the request."),Ft(e,"missing-iframe-start","An internal AuthError has occurred."),Ft(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ft(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ft(e,"missing-password","A non-empty password must be provided"),Ft(e,"missing-multi-factor-info","No second factor identifier is provided."),Ft(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ft(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ft(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ft(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ft(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ft(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ft(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ft(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ft(e,"no-auth-event","An internal AuthError has occurred."),Ft(e,"no-such-provider","User was not linked to an account with the given provider."),Ft(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ft(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ft(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ft(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ft(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ft(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ft(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ft(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ft(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ft(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ft(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ft(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ft(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ft(e,"timeout","The operation has timed out."),Ft(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ft(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ft(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ft(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ft(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ft(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ft(e,"unverified-email","The operation requires a verified email."),Ft(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ft(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ft(e,"user-disabled","The user account has been disabled by an administrator."),Ft(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ft(e,"user-signed-out",""),Ft(e,"weak-password","The password must be 6 characters long or more."),Ft(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ft(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),Ft(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),Ft(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),Ft(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),Ft(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),Ft(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),Ft(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),Ft(e,"invalid-req-type","Invalid request parameters."),Ft(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},uu=ou,cu=new Qa("auth","Firebase",ou()),lu=new Do("@firebase/auth");function fu(e){if(lu.logLevel<=So.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lu.warn.apply(lu,["Auth (".concat(ps,"): ").concat(e)].concat(n))}}function hu(e){if(lu.logLevel<=So.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lu.error.apply(lu,["Auth (".concat(ps,"): ").concat(e)].concat(n))}}function du(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw yu.apply(void 0,[e].concat(n))}function pu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yu.apply(void 0,[e].concat(n))}function vu(e,t,n){var r=Object.assign(Object.assign({},uu()),Ft({},t,n));return new Qa("auth","Firebase",r).create(t,{appName:e.name})}function mu(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&du(e,"argument-error"),vu(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function yu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=u(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(u(o)))}return cu.create.apply(cu,[e].concat(n))}function gu(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw yu.apply(void 0,[t].concat(r))}}function ku(e){var t="INTERNAL ASSERTION FAILED: "+e;throw hu(t),new Error(t)}function _u(e,t){e||ku(t)}function wu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function bu(){return"http:"===xu()||"https:"===xu()}function xu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Eu=function(){function e(t,n){c(this,e),this.shortDelay=t,this.longDelay=n,_u(n>t,"Short delay should be less than long delay!"),this.isMobile=Ba()||Wa()}return f(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(bu()||za()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Su(e,t){_u(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Tu=function(){function e(){c(this,e)}return f(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ku("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ku("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ku("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Cu=(Ft(Ys={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ft(Ys,"MISSING_CUSTOM_TOKEN","internal-error"),Ft(Ys,"INVALID_IDENTIFIER","invalid-email"),Ft(Ys,"MISSING_CONTINUE_URI","internal-error"),Ft(Ys,"INVALID_PASSWORD","wrong-password"),Ft(Ys,"MISSING_PASSWORD","missing-password"),Ft(Ys,"EMAIL_EXISTS","email-already-in-use"),Ft(Ys,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ft(Ys,"INVALID_IDP_RESPONSE","invalid-credential"),Ft(Ys,"INVALID_PENDING_TOKEN","invalid-credential"),Ft(Ys,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ft(Ys,"MISSING_REQ_TYPE","internal-error"),Ft(Ys,"EMAIL_NOT_FOUND","user-not-found"),Ft(Ys,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ft(Ys,"EXPIRED_OOB_CODE","expired-action-code"),Ft(Ys,"INVALID_OOB_CODE","invalid-action-code"),Ft(Ys,"MISSING_OOB_CODE","internal-error"),Ft(Ys,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ft(Ys,"INVALID_ID_TOKEN","invalid-user-token"),Ft(Ys,"TOKEN_EXPIRED","user-token-expired"),Ft(Ys,"USER_NOT_FOUND","user-token-expired"),Ft(Ys,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ft(Ys,"INVALID_CODE","invalid-verification-code"),Ft(Ys,"INVALID_SESSION_INFO","invalid-verification-id"),Ft(Ys,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ft(Ys,"MISSING_SESSION_INFO","missing-verification-id"),Ft(Ys,"SESSION_EXPIRED","code-expired"),Ft(Ys,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ft(Ys,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ft(Ys,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ft(Ys,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ft(Ys,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ft(Ys,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ft(Ys,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ft(Ys,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ft(Ys,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ft(Ys,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ft(Ys,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ft(Ys,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Ft(Ys,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Ft(Ys,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Ft(Ys,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Ft(Ys,"MISSING_CLIENT_TYPE","missing-client-type"),Ft(Ys,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Ft(Ys,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Ft(Ys,"INVALID_REQ_TYPE","invalid-req-type"),Ys),Iu=new Eu(3e4,6e4);function Nu(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Ru(e,t,n,r){return Pu.apply(this,arguments)}function Pu(){return Pu=Oe(Pe().mark((function e(t,n,r,i){var a,o=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Du(t,a,Oe(Pe().mark((function e(){var a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=so(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Tu.fetch()(Lu(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Pu.apply(this,arguments)}function Du(e,t,n){return Ou.apply(this,arguments)}function Ou(){return Ou=Oe(Pe().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Cu),n),e.prev=2,a=new Fu(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw ju(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=b(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw ju(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw ju(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw ju(t,"user-disabled",s);case 29:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw vu(t,d,h);case 34:du(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ya)){e.next=41;break}throw e.t0;case 41:du(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Ou.apply(this,arguments)}function Au(e,t,n,r){return Mu.apply(this,arguments)}function Mu(){return Mu=Oe(Pe().mark((function e(t,n,r,i){var a,o,s=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Ru(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&du(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Mu.apply(this,arguments)}function Lu(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Su(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Fu=function(){function e(t){var n=this;c(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(pu(n.auth,"network-request-failed"))}),Iu.get())}))}return f(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ju(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=pu(e,t,r);return i.customData._tokenResponse=n,i}function Uu(e,t){return Vu.apply(this,arguments)}function Vu(){return(Vu=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bu(e,t){return qu.apply(this,arguments)}function qu(){return(qu=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zu(e,t){return Wu.apply(this,arguments)}function Wu(){return(Wu=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hu(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(kY){}}function Gu(){return Gu=Oe(Pe().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=_o(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,gu((a=Yu(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Hu(Ku(a.auth_time)),issuedAtTime:Hu(Ku(a.iat)),expirationTime:Hu(Ku(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Gu.apply(this,arguments)}function Ku(e){return 1e3*Number(e)}function Yu(e){var t=b(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return hu("JWT malformed, contained fewer than 3 sections"),null;try{var a=Oa(r);return a?JSON.parse(a):(hu("Failed to decode base64 JWT payload"),null)}catch(kY){return hu("Caught error parsing JWT payload as JSON",null===kY||void 0===kY?void 0:kY.toString()),null}}function Qu(e,t){return $u.apply(this,arguments)}function $u(){return $u=Oe(Pe().mark((function e(t,n){var r=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ya&&Xu(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),$u.apply(this,arguments)}function Xu(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Ju=function(){function e(t){c(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return f(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Oe(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Zu=function(){function e(t,n){c(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return f(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Hu(this.lastLoginAt),this.creationTime=Hu(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function ec(e){return tc.apply(this,arguments)}function tc(){return tc=Oe(Pe().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Qu(t,zu(r,{idToken:i}));case 6:gu(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?ic(o.providerUserInfo):[],u=rc(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Zu(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),tc.apply(this,arguments)}function nc(){return(nc=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_o(t),e.next=3,ec(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rc(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(u(n),u(t))}function ic(e){return e.map((function(e){var t=e.providerId,n=Ks(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function ac(e,t){return oc.apply(this,arguments)}function oc(){return(oc=Oe(Pe().mark((function e(t,n){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Du(t,{},Oe(Pe().mark((function e(){var r,i,a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Lu(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Tu.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sc=function(){function e(){c(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return f(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){gu(e.idToken,"internal-error"),gu("undefined"!==typeof e.idToken,"internal-error"),gu("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Yu(e);return gu(t,"internal-error"),gu("undefined"!==typeof t.exp,"internal-error"),gu("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Oe(Pe().mark((function e(t){var n,r=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],gu(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Oe(Pe().mark((function e(t,n){var r,i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ac(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ku("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(gu("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(gu("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(gu("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function uc(e,t){gu("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var cc=function(){function e(t){c(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Ks(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ju(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?u(a.providerData):[],this.metadata=new Zu(a.createdAt||void 0,a.lastLoginAt||void 0)}return f(e,[{key:"getIdToken",value:function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qu(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(gu(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Gu.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return nc.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(gu(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){gu(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Oe(Pe().mark((function e(t){var n,r,i=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,ec(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Qu(this,Uu(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;gu(k&&x,t,"internal-error");var E=sc.fromJSON(this.name,x);gu("string"===typeof k,t,"internal-error"),uc(f,t.name),uc(h,t.name),gu("boolean"===typeof _,t,"internal-error"),gu("boolean"===typeof w,t,"internal-error"),uc(d,t.name),uc(p,t.name),uc(v,t.name),uc(m,t.name),uc(y,t.name),uc(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:_,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return b&&Array.isArray(b)&&(S.providerData=b.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=Oe(Pe().mark((function t(n,r){var i,a,o,s=arguments;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new sc).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,ec(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),lc=new Map;function fc(e){_u(e instanceof Function,"Expected a class definition");var t=lc.get(e);return t?(_u(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,lc.set(e,t),t)}var hc=function(){function e(){c(this,e),this.type="NONE",this.storage={}}return f(e,[{key:"_isAvailable",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();hc.type="NONE";var dc=hc;function pc(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var vc=function(){function e(t,n,r){c(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=pc(this.userKey,a.apiKey,o),this.fullPersistenceKey=pc("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return f(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?cc._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Oe(Pe().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(fc(dc),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||fc(dc),s=pc(i,n.config.apiKey,n.name),u=null,c=cn(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=cc._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function mc(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_c(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(yc(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(bc(t))return"Blackberry";if(xc(t))return"Webos";if(gc(t))return"Safari";if((t.includes("chrome/")||kc(t))&&!t.includes("edge/"))return"Chrome";if(wc(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function yc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return/firefox\//i.test(e)}function gc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function kc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return/crios\//i.test(e)}function _c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return/iemobile/i.test(e)}function wc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return/android/i.test(e)}function bc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return/blackberry/i.test(e)}function xc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return/webos/i.test(e)}function Ec(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Sc(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return Ec(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Tc(){return Ha()&&10===document.documentMode}function Cc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return Ec(e)||wc(e)||xc(e)||bc(e)||/windows phone/i.test(e)||_c(e)}function Ic(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=mc(Va());break;case"Worker":t="".concat(mc(Va()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ps,"/").concat(r)}function Nc(e){return Rc.apply(this,arguments)}function Rc(){return(Rc=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ru(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pc(e,t){return Dc.apply(this,arguments)}function Dc(){return(Dc=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t,"GET","/v2/recaptchaConfig",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oc(e){return void 0!==e&&void 0!==e.getResponse}function Ac(e){return void 0!==e&&void 0!==e.enterprise}var Mc=f((function e(t){if(c(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function Lc(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=pu("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Fc(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var jc="https://www.google.com/recaptcha/enterprise.js?render=",Uc="NO_RECAPTCHA",Vc=function(){function e(t){c(this,e),this.type="recaptcha-enterprise",this.auth=Hc(t)}return f(e,[{key:"verify",value:function(){var e=Oe(Pe().mark((function e(){var t,n,r,i,a,o=this,s=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;Ac(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n(Uc)}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Oe(Pe().mark((function e(n,r){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Pc(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Mc(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&Ac(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));Lc(jc+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Bc(e,t,n){return qc.apply(this,arguments)}function qc(){return qc=Oe(Pe().mark((function e(t,n,r){var i,a,o,s,u=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]&&u[3],a=new Vc(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),qc.apply(this,arguments)}var zc=function(){function e(t){c(this,e),this.auth=t,this.queue=[]}return f(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(kY){r(kY)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Oe(Pe().mark((function e(t){var n,r,i,a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=cn(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=cn(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Wc=function(){function e(t,n,r,i){c(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gc(this),this.idTokenSubscription=new Gc(this),this.beforeStateQueue=new zc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cu,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return f(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=fc(t)),this._initializationPromise=this.queue(Oe(Pe().mark((function r(){var i,a;return Pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,vc.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Oe(Pe().mark((function e(t){var n,r,i,a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return gu(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ec(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?_o(t):null)&&gu(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Oe(Pe().mark((function e(t){var n,r=this,i=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&gu(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Oe(Pe().mark((function n(){return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(fc(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=Oe(Pe().mark((function e(){var t,n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pc(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new Mc(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Vc(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Qa("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Oe(Pe().mark((function e(t,n){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return gu(n=t&&fc(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,vc.create(this,[fc(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Oe(Pe().mark((function e(t){var n=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return gu(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return gu(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ic(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Oe(Pe().mark((function e(){var t,n,r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ft({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Oe(Pe().mark((function e(){var t,n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&fu("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Hc(e){return _o(e)}var Gc=function(){function e(t){var n=this;c(this,e),this.auth=t,this.observer=null,this.addObserver=fo((function(e){return n.observer=e}))}return f(e,[{key:"next",get:function(){return gu(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Kc(e,t,n){var r=Hc(e);gu(r._canInitEmulator,r,"emulator-config-failed"),gu(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Yc(t),o=function(e){var t=Yc(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Qc(r.substr(a.length+1))}}var o=b(r.split(":"),2);return{host:o[0],port:Qc(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Yc(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Qc(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var $c=function(){function e(t,n){c(this,e),this.providerId=t,this.signInMethod=n}return f(e,[{key:"toJSON",value:function(){return ku("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ku("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ku("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ku("not implemented")}}]),e}();function Xc(e,t){return Jc.apply(this,arguments)}function Jc(){return(Jc=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t,"POST","/v1/accounts:resetPassword",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zc(e,t){return el.apply(this,arguments)}function el(){return(el=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tl(e,t){return nl.apply(this,arguments)}function nl(){return(nl=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t,"POST","/v1/accounts:update",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rl(e,t){return il.apply(this,arguments)}function il(){return(il=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Au(t,"POST","/v1/accounts:signInWithPassword",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function al(e,t){return ol.apply(this,arguments)}function ol(){return(ol=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t,"POST","/v1/accounts:sendOobCode",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sl(e,t){return ul.apply(this,arguments)}function ul(){return(ul=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cl(e,t){return ll.apply(this,arguments)}function ll(){return(ll=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fl(e,t){return hl.apply(this,arguments)}function hl(){return(hl=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dl(e,t){return pl.apply(this,arguments)}function pl(){return(pl=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",al(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vl(e,t){return ml.apply(this,arguments)}function ml(){return(ml=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Au(t,"POST","/v1/accounts:signInWithEmailLink",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yl(e,t){return gl.apply(this,arguments)}function gl(){return(gl=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Au(t,"POST","/v1/accounts:signInWithEmailLink",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kl=function(e){d(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return c(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return f(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Oe(Pe().mark((function e(t){var n,r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Bc(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",rl(t,i));case 11:return e.abrupt("return",rl(t,r).catch(function(){var e=Oe(Pe().mark((function e(n){var i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Bc(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",rl(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",vl(t,{email:this._email,oobCode:this._password}));case 13:du(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Zc(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",yl(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:du(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}($c);function _l(e,t){return wl.apply(this,arguments)}function wl(){return(wl=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Au(t,"POST","/v1/accounts:signInWithIdp",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bl=function(e){d(n,e);var t=k(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return f(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return _l(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_l(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_l(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=so(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):du("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Ks(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}($c);function xl(e,t){return El.apply(this,arguments)}function El(){return(El=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t,"POST","/v1/accounts:sendVerificationCode",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sl(){return(Sl=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Au(t,"POST","/v1/accounts:signInWithPhoneNumber",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tl(){return(Tl=Oe(Pe().mark((function e(t,n){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Au(t,"POST","/v1/accounts:signInWithPhoneNumber",Nu(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ju(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cl=Ft({},"USER_NOT_FOUND","user-not-found");function Il(){return(Il=Oe(Pe().mark((function e(t,n){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Au(t,"POST","/v1/accounts:signInWithPhoneNumber",Nu(t,r),Cl));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nl=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this,"phone","phone")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Sl.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Tl.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Il.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}($c);var Rl=function(){function e(t){var n,r,i,a,o,s;c(this,e);var u=uo(co(t)),l=null!==(n=u.apiKey)&&void 0!==n?n:null,f=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);gu(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return f(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=uo(co(e)).link,n=t?uo(co(t)).deep_link_id:null,r=uo(co(e)).deep_link_id;return(r?uo(co(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(nR){return null}}}]),e}();var Pl=function(){function e(){c(this,e),this.providerId=e.PROVIDER_ID}return f(e,null,[{key:"credential",value:function(e,t){return kl._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Rl.parseLink(t);return gu(n,"argument-error"),kl._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Pl.PROVIDER_ID="password",Pl.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Pl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Dl=function(){function e(t){c(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return f(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ol=function(e){d(n,e);var t=k(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).scopes=[],e}return f(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return u(this.scopes)}}]),n}(Dl),Al=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return gu(e.idToken||e.accessToken,"argument-error"),bl._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return gu("providerId"in t&&"signInMethod"in t,"argument-error"),bl._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(kY){return null}}}]),n}(Ol),Ml=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.call(this,"facebook.com")}return f(n,null,[{key:"credential",value:function(e){return bl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(nR){return null}}}]),n}(Ol);Ml.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ml.PROVIDER_ID="facebook.com";var Ll=function(e){d(n,e);var t=k(n);function n(){var e;return c(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return f(n,null,[{key:"credential",value:function(e,t){return bl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(nR){return null}}}]),n}(Ol);Ll.GOOGLE_SIGN_IN_METHOD="google.com",Ll.PROVIDER_ID="google.com";var Fl=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.call(this,"github.com")}return f(n,null,[{key:"credential",value:function(e){return bl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(nR){return null}}}]),n}(Ol);Fl.GITHUB_SIGN_IN_METHOD="github.com",Fl.PROVIDER_ID="github.com";var jl=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return f(n,[{key:"_getIdTokenResponse",value:function(e){return _l(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_l(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_l(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}($c),Ul=function(e){d(n,e);var t=k(n);function n(e){return c(this,n),gu(e.startsWith("saml."),"argument-error"),t.call(this,e)}return f(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=jl.fromJSON(e);return gu(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return jl._create(r,n)}catch(kY){return null}}}]),n}(Dl),Vl=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.call(this,"twitter.com")}return f(n,null,[{key:"credential",value:function(e,t){return bl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(nR){return null}}}]),n}(Ol);function Bl(e,t){return ql.apply(this,arguments)}function ql(){return(ql=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Au(t,"POST","/v1/accounts:signUp",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Vl.TWITTER_SIGN_IN_METHOD="twitter.com",Vl.PROVIDER_ID="twitter.com";var zl=function(){function e(t){c(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return f(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Oe(Pe().mark((function t(n,r,i){var a,o,s,u,c=arguments;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,cc._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=Wl(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Oe(Pe().mark((function t(n,r,i){var a;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Wl(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Wl(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Hl(){return Hl=Oe(Pe().mark((function e(t){var n,r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hc(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new zl({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Bl(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,zl._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Hl.apply(this,arguments)}var Gl=function(e){d(n,e);var t=k(n);function n(e,r,i,a){var o,s;return c(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(y(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return f(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ya);function Kl(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Gl._fromErrorAndOperation(e,n,t,r);throw n}))}function Yl(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Ql(e,t){return $l.apply(this,arguments)}function $l(){return $l=Oe(Pe().mark((function e(t,n){var r,i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(t),e.next=3,Zl(!0,r,n);case 3:return e.t0=Bu,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Yl(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),$l.apply(this,arguments)}function Xl(e,t){return Jl.apply(this,arguments)}function Jl(){return Jl=Oe(Pe().mark((function e(t,n){var r,i,a=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Qu,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",zl._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Jl.apply(this,arguments)}function Zl(e,t,n){return ef.apply(this,arguments)}function ef(){return(ef=Oe(Pe().mark((function e(t,n,r){var i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ec(n);case 2:i=Yl(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",gu(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tf(e,t){return nf.apply(this,arguments)}function nf(){return nf=Oe(Pe().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Qu(t,Kl(i,a,n,t),r);case 6:return gu((o=e.sent).idToken,i,"internal-error"),gu(s=Yu(o.idToken),i,"internal-error"),u=s.sub,gu(t.uid===u,i,"user-mismatch"),e.abrupt("return",zl._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&du(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),nf.apply(this,arguments)}function rf(e,t){return af.apply(this,arguments)}function af(){return af=Oe(Pe().mark((function e(t,n){var r,i,a,o,s=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Kl(t,i,n);case 4:return a=e.sent,e.next=7,zl._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),af.apply(this,arguments)}function of(e,t){return sf.apply(this,arguments)}function sf(){return(sf=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rf(Hc(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uf(e,t){return cf.apply(this,arguments)}function cf(){return(cf=Oe(Pe().mark((function e(t,n){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(t),e.next=3,Zl(!1,r,n.providerId);case 3:return e.abrupt("return",Xl(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lf(e,t){return ff.apply(this,arguments)}function ff(){return(ff=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tf(_o(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hf(e,t){return df.apply(this,arguments)}function df(){return(df=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Au(t,"POST","/v1/accounts:signInWithCustomToken",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pf(){return(pf=Oe(Pe().mark((function e(t,n){var r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hc(t),e.next=3,hf(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,zl._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vf=function(){function e(t,n){c(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return f(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?mf._fromServerResponse(e,t):"totpInfo"in t?yf._fromServerResponse(e,t):du(e,"internal-error")}}]),e}(),mf=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return f(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(vf),yf=function(e){d(n,e);var t=k(n);function n(e){return c(this,n),t.call(this,"totp",e)}return f(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(vf);function gf(e,t,n){var r;gu((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),gu("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(gu(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(gu(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function kf(){return kf=Oe(Pe().mark((function e(t,n,r){var i,a,o,s;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Hc(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Bc(a,o,"getOobCode",!0);case 5:return s=e.sent,r&&gf(a,s,r),e.next=9,cl(a,s);case 9:e.next=14;break;case 11:return r&&gf(a,o,r),e.next=14,cl(a,o).catch(function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Bc(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&gf(a,n,r),e.next=8,cl(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),kf.apply(this,arguments)}function _f(){return(_f=Oe(Pe().mark((function e(t,n,r){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xc(_o(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wf(){return(wf=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tl(_o(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bf(e,t){return xf.apply(this,arguments)}function xf(){return(xf=Oe(Pe().mark((function e(t,n){var r,i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(t),e.next=3,Xc(r,{oobCode:n});case 3:i=e.sent,gu(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return gu(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:gu(i.mfaInfo,r,"internal-error");case 13:gu(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=vf._fromServerResponse(Hc(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ef(){return(Ef=Oe(Pe().mark((function e(t,n){var r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bf(_o(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sf(e,t,n){return Tf.apply(this,arguments)}function Tf(){return Tf=Oe(Pe().mark((function e(t,n,r){var i,a,o,s,u,c,l;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Hc(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Bc(a,o,"signUpPassword");case 5:u=e.sent,s=Bl(a,u),e.next=10;break;case 9:s=Bl(a,o).catch(function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Bc(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Bl(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,zl._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Tf.apply(this,arguments)}function Cf(){return Cf=Oe(Pe().mark((function e(t,n,r){var i,a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e,t){gu(t.handleCodeInApp,a,"argument-error"),t&&gf(a,e,t)},a=Hc(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Bc(a,o,"getOobCode",!0);case 6:return u=e.sent,s(u,r),e.next=10,fl(a,u);case 10:e.next=15;break;case 12:return s(o,r),e.next=15,fl(a,o).catch(function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Bc(a,o,"getOobCode",!0);case 4:return n=e.sent,s(n,r),e.next=8,fl(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}function If(){return(If=Oe(Pe().mark((function e(t,n,r){var i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(t),gu((a=Pl.credentialWithLink(n,r||wu()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",of(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nf(e,t){return Rf.apply(this,arguments)}function Rf(){return(Rf=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t,"POST","/v1/accounts:createAuthUri",Nu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pf(){return(Pf=Oe(Pe().mark((function e(t,n){var r,i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bu()?wu():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Nf(_o(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Df(){return(Df=Oe(Pe().mark((function e(t,n){var r,i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_o(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&gf(r.auth,a,n),e.next=8,sl(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Of(){return(Of=Oe(Pe().mark((function e(t,n,r){var i,a,o,s;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&gf(i.auth,o,r),e.next=8,dl(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Af(e,t){return Mf.apply(this,arguments)}function Mf(){return(Mf=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ru(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lf(){return(Lf=Oe(Pe().mark((function e(t,n){var r,i,a,o,s,u,c;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=_o(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Qu(a,Af(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ff(e,t,n){return jf.apply(this,arguments)}function jf(){return(jf=Oe(Pe().mark((function e(t,n,r){var i,a,o,s;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Qu(t,Zc(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uf=f((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};c(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Vf=function(e){d(n,e);var t=k(n);function n(e,r,i,a){var o;return c(this,n),(o=t.call(this,e,r,i)).username=a,o}return f(n)}(Uf),Bf=function(e){d(n,e);var t=k(n);function n(e,r){return c(this,n),t.call(this,e,"facebook.com",r)}return f(n)}(Uf),qf=function(e){d(n,e);var t=k(n);function n(e,r){return c(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return f(n)}(Vf),zf=function(e){d(n,e);var t=k(n);function n(e,r){return c(this,n),t.call(this,e,"google.com",r)}return f(n)}(Uf),Wf=function(e){d(n,e);var t=k(n);function n(e,r,i){return c(this,n),t.call(this,e,"twitter.com",r,i)}return f(n)}(Vf);function Hf(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Yu(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Uf(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Bf(a,i);case"github.com":return new qf(a,i);case"google.com":return new zf(a,i);case"twitter.com":return new Wf(a,i,e.screenName||null);case"custom":case"anonymous":return new Uf(a,null);default:return new Uf(a,r,i)}}(n)}var Gf=function(){function e(t,n,r){c(this,e),this.type=t,this.credential=n,this.auth=r}return f(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ft({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Kf=function(){function e(t,n,r){c(this,e),this.session=t,this.hints=n,this.signInResolver=r}return f(e,[{key:"resolveSignIn",value:function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Hc(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return vf._fromServerResponse(r,e)}));gu(i.mfaPendingCredential,r,"internal-error");var o=Gf._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Oe(Pe().mark((function e(t){var a,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,zl._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return gu(n.user,r,"internal-error"),e.abrupt("return",zl._forOperation(n.user,n.operationType,s));case 17:du(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Yf(e,t){return Ru(e,"POST","/v2/accounts/mfaEnrollment:start",Nu(e,t))}function Qf(e,t){return Ru(e,"POST","/v2/accounts/mfaEnrollment:finalize",Nu(e,t))}var $f=function(){function e(t){var n=this;c(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return vf._fromServerResponse(t.auth,e)})))}))}return f(e,[{key:"getSession",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Gf,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Oe(Pe().mark((function e(t,n){var r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Qu(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Oe(Pe().mark((function e(t){var n,r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,Qu(this.user,Ru(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Nu(a,{idToken:r,mfaEnrollmentId:n})));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Xf=new WeakMap;var Jf="__sak",Zf=function(){function e(t,n){c(this,e),this.storageRetriever=t,this.type=n}return f(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Jf,"1"),this.storage.removeItem(Jf),Promise.resolve(!0)):Promise.resolve(!1)}catch(nR){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var eh=function(e){d(n,e);var t=k(n);function n(){var e;return c(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Va();return gc(e)||Ec(e)}()&&function(){try{return!(!window||window===window.top)}catch(kY){return!1}}(),e.fallbackToPolling=Cc(),e._shouldAllowMigration=!0,e}return f(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Tc()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Oe(Pe().mark((function e(t,r){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gs(p(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Oe(Pe().mark((function e(t){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gs(p(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gs(p(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Zf);eh.type="LOCAL";var th=eh,nh=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return f(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Zf);nh.type="SESSION";var rh=nh;function ih(e){return Promise.all(e.map(function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ah=function(){function e(t){c(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return f(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Oe(Pe().mark((function e(t){var n,r,i,a,o,s,u,c;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ih(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function oh(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ah.receivers=[];var sh=function(){function e(t){c(this,e),this.target=t,this.handlers=new Set}return f(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Oe(Pe().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=oh("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function uh(){return window}function ch(e){uh().location.href=e}function lh(){return"undefined"!==typeof uh().WorkerGlobalScope&&"function"===typeof uh().importScripts}function fh(){return hh.apply(this,arguments)}function hh(){return(hh=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function dh(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var ph="firebaseLocalStorageDb",vh="firebaseLocalStorage",mh="fbase_key",yh=function(){function e(t){c(this,e),this.request=t}return f(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function gh(e,t){return e.transaction([vh],t?"readwrite":"readonly").objectStore(vh)}function kh(){var e=indexedDB.deleteDatabase(ph);return new yh(e).toPromise()}function _h(){var e=indexedDB.open(ph,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(vh,{keyPath:mh})}catch(kY){n(kY)}})),e.addEventListener("success",Oe(Pe().mark((function n(){var r;return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(vh)){n.next=12;break}return r.close(),n.next=5,kh();case 5:return n.t0=t,n.next=8,_h();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function wh(e,t,n){return bh.apply(this,arguments)}function bh(){return bh=Oe(Pe().mark((function e(t,n,r){var i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gh(t,!0).put((Ft(i={},mh,n),Ft(i,"value",r),i)),e.abrupt("return",new yh(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),bh.apply(this,arguments)}function xh(e,t){return Eh.apply(this,arguments)}function Eh(){return Eh=Oe(Pe().mark((function e(t,n){var r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gh(t,!1).get(n),e.next=3,new yh(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Eh.apply(this,arguments)}function Sh(e,t){var n=gh(e,!0).delete(t);return new yh(n).toPromise()}var Th=function(){function e(){c(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return f(e,[{key:"_openDb",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,_h();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lh()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Oe(Pe().mark((function e(){var t=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ah._getInstance(lh()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Oe(Pe().mark((function e(n,r){var i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Oe(Pe().mark((function e(){var t,n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fh();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new sh(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&dh()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,_h();case 5:return t=e.sent,e.next=8,wh(t,Jf,"1");case 8:return e.next=10,Sh(t,Jf);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Oe(Pe().mark((function e(t,n){var r=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return wh(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return xh(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Oe(Pe().mark((function e(t){var n=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Sh(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Oe(Pe().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=gh(e,!1).getAll();return new yh(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=cn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Oe(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Th.type="LOCAL";var Ch=Th;function Ih(e,t){return Ru(e,"POST","/v2/accounts/mfaSignIn:start",Nu(e,t))}function Nh(e,t){return Ru(e,"POST","/v2/accounts/mfaSignIn:finalize",Nu(e,t))}var Rh=1e12,Ph=function(){function e(t){c(this,e),this.auth=t,this.counter=Rh,this._widgets=new Map}return f(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Dh(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Rh;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Rh;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Rh,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Dh=function(){function e(t,n,r){var i=this;c(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;gu(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return f(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(kY){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(kY){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Oh=Fc("rcb"),Ah=new Eu(3e4,6e4),Mh="https://www.google.com/recaptcha/api.js?",Lh=function(){function e(){var t;c(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=uh().grecaptcha)||void 0===t?void 0:t.render)}return f(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return gu(Fh(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Oc(uh().grecaptcha)?Promise.resolve(uh().grecaptcha):new Promise((function(r,i){var a=uh().setTimeout((function(){i(pu(e,"network-request-failed"))}),Ah.get());uh()[Oh]=function(){uh().clearTimeout(a),delete uh()[Oh];var o=uh().grecaptcha;if(o&&Oc(o)){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(pu(e,"internal-error"))},Lc("".concat(Mh,"?").concat(so({onload:Oh,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(pu(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=uh().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function Fh(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var jh=function(){function e(){c(this,e)}return f(e,[{key:"load",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ph(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Uh="recaptcha",Vh={theme:"light",type:"image"},Bh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Vh),r=arguments.length>2?arguments[2]:void 0;c(this,e),this.parameters=n,this.type=Uh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Hc(r),this.isInvisible="invisible"===this.parameters.size,gu("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;gu(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jh:new Lh,this.validateStartingState()}return f(e,[{key:"verify",value:function(){var e=Oe(Pe().mark((function e(){var t,n,r,i=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(kY){return Promise.reject(kY)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){gu(!this.parameters.sitekey,this.auth,"argument-error"),gu(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),gu("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=uh()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){gu(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Oe(Pe().mark((function e(){var t,n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gu(bu()&&!lh(),this.auth,"internal-error"),e.next=3,qh();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Nc(this.auth);case 8:gu(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return gu(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function qh(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var zh=function(){function e(t,n){c(this,e),this.verificationId=t,this.onConfirmation=n}return f(e,[{key:"confirm",value:function(e){var t=Nl._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Wh(){return(Wh=Oe(Pe().mark((function e(t,n,r){var i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hc(t),e.next=3,Yh(i,n,_o(r));case 3:return a=e.sent,e.abrupt("return",new zh(a,(function(e){return of(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hh(e,t,n){return Gh.apply(this,arguments)}function Gh(){return(Gh=Oe(Pe().mark((function e(t,n,r){var i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(t),e.next=3,Zl(!1,i,"phone");case 3:return e.next=5,Yh(i.auth,n,_o(r));case 5:return a=e.sent,e.abrupt("return",new zh(a,(function(e){return uf(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kh(){return(Kh=Oe(Pe().mark((function e(t,n,r){var i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_o(t),e.next=3,Yh(i.auth,n,_o(r));case 3:return a=e.sent,e.abrupt("return",new zh(a,(function(e){return lf(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yh(e,t,n){return Qh.apply(this,arguments)}function Qh(){return Qh=Oe(Pe().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,gu("string"===typeof a,t,"argument-error"),gu(r.type===Uh,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return gu("enroll"===s.type,t,"internal-error"),e.next=13,Yf(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return gu("signin"===s.type,t,"internal-error"),gu(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Ih(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,xl(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Qh.apply(this,arguments)}function $h(){return($h=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xl(_o(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xh=function(){function e(t){c(this,e),this.providerId=e.PROVIDER_ID,this.auth=Hc(t)}return f(e,[{key:"verifyPhoneNumber",value:function(e,t){return Yh(this.auth,e,_o(t))}}],[{key:"credential",value:function(e,t){return Nl._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Nl._fromTokenResponse(n,r):null}}]),e}();function Jh(e,t){return t?fc(t):(gu(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Xh.PROVIDER_ID="phone",Xh.PHONE_SIGN_IN_METHOD="phone";var Zh=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this,"custom","custom")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return _l(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return _l(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return _l(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}($c);function ed(e){return rf(e.auth,new Zh(e),e.bypassAuthState)}function td(e){var t=e.auth,n=e.user;return gu(n,t,"internal-error"),tf(n,new Zh(e),e.bypassAuthState)}function nd(e){return rd.apply(this,arguments)}function rd(){return(rd=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,gu(r=t.user,n,"internal-error"),e.abrupt("return",Xl(r,new Zh(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var id=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];c(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return f(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Oe(Pe().mark((function t(n,r){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Oe(Pe().mark((function e(t){var n,r,i,a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ed;case"linkViaPopup":case"linkViaRedirect":return nd;case"reauthViaPopup":case"reauthViaRedirect":return td;default:du(this.auth,"internal-error")}}},{key:"resolve",value:function(e){_u(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){_u(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ad=new Eu(2e3,1e4);function od(e,t,n){return sd.apply(this,arguments)}function sd(){return(sd=Oe(Pe().mark((function e(t,n,r){var i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hc(t),mu(t,n,Dl),a=Jh(i,r),o=new fd(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ud(){return(ud=Oe(Pe().mark((function e(t,n,r){var i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mu((i=_o(t)).auth,n,Dl),a=Jh(i.auth,r),o=new fd(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cd(e,t,n){return ld.apply(this,arguments)}function ld(){return(ld=Oe(Pe().mark((function e(t,n,r){var i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mu((i=_o(t)).auth,n,Dl),a=Jh(i.auth,r),o=new fd(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fd=function(e){d(n,e);var t=k(n);function n(e,r,i,a,o){var s;return c(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=y(s),s}return f(n,[{key:"executeNotNull",value:function(){var e=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return gu(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Oe(Pe().mark((function e(){var t,n=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _u(1===this.filter.length,"Popup operations only handle one event"),t=oh(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(pu(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(pu(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(pu(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,ad.get())}()}}]),n}(id);fd.currentPopupAction=null;var hd=new Map,dd=function(e){d(n,e);var t=k(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return c(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return f(n,[{key:"execute",value:function(){var e=Oe(Pe().mark((function e(){var t,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=hd.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,pd(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Gs(p(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:hd.set(this.auth._key(),t);case 21:return this.bypassAuthState||hd.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Oe(Pe().mark((function e(t){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Gs(p(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Gs(p(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(id);function pd(e,t){return vd.apply(this,arguments)}function vd(){return(vd=Oe(Pe().mark((function e(t,n){var r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_d(n),i=kd(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function md(e,t){return yd.apply(this,arguments)}function yd(){return(yd=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kd(t)._set(_d(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gd(e,t){hd.set(e._key(),t)}function kd(e){return fc(e._redirectPersistence)}function _d(e){return pc("pendingRedirect",e.config.apiKey,e.name)}function wd(e,t,n){return function(e,t,n){return bd.apply(this,arguments)}(e,t,n)}function bd(){return(bd=Oe(Pe().mark((function e(t,n,r){var i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hc(t),mu(t,n,Dl),e.next=4,i._initializationPromise;case 4:return a=Jh(i,r),e.next=7,md(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xd(e,t,n){return function(e,t,n){return Ed.apply(this,arguments)}(e,t,n)}function Ed(){return(Ed=Oe(Pe().mark((function e(t,n,r){var i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mu((i=_o(t)).auth,n,Dl),e.next=4,i.auth._initializationPromise;case 4:return a=Jh(i.auth,r),e.next=7,md(a,i.auth);case 7:return e.next=9,Pd(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sd(e,t,n){return function(e,t,n){return Td.apply(this,arguments)}(e,t,n)}function Td(){return(Td=Oe(Pe().mark((function e(t,n,r){var i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mu((i=_o(t)).auth,n,Dl),e.next=4,i.auth._initializationPromise;case 4:return a=Jh(i.auth,r),e.next=7,Zl(!1,i,n.providerId);case 7:return e.next=9,md(a,i.auth);case 9:return e.next=11,Pd(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cd(e,t){return Id.apply(this,arguments)}function Id(){return(Id=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hc(t)._initializationPromise;case 2:return e.abrupt("return",Nd(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nd(e,t){return Rd.apply(this,arguments)}function Rd(){return Rd=Oe(Pe().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Hc(t),a=Jh(i,n),o=new dd(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Rd.apply(this,arguments)}function Pd(e){return Dd.apply(this,arguments)}function Dd(){return(Dd=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=oh("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Od=function(){function e(t){c(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return f(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Md(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Md(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(pu(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ad(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ad(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ad(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Md(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ld(e){return Fd.apply(this,arguments)}function Fd(){return Fd=Oe(Pe().mark((function e(t){var n,r=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Ru(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Fd.apply(this,arguments)}var jd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ud=/^https?/;function Vd(){return(Vd=Oe(Pe().mark((function e(t){var n,r,i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ld(t);case 4:n=e.sent,r=n.authorizedDomains,i=cn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Bd(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:du(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Bd(e){var t=wu(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Ud.test(r))return!1;if(jd.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var qd=new Eu(3e4,6e4);function zd(){var e=uh().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=u(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Wd=null;function Hd(e){return Wd=Wd||function(e){return new Promise((function(t,n){var r,i,a;function o(){zd(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){zd(),n(pu(e,"network-request-failed"))},timeout:qd.get()})}if(null===(i=null===(r=uh().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=uh().gapi)||void 0===a?void 0:a.load)){var s=Fc("iframefcb");return uh()[s]=function(){gapi.load?o():n(pu(e,"network-request-failed"))},Lc("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Wd=null,e}))}(e),Wd}var Gd=new Eu(5e3,15e3),Kd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qd(e){var t=e.config;gu(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Su(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ps},i=Yd.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(so(r).slice(1))}function $d(e){return Xd.apply(this,arguments)}function Xd(){return Xd=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hd(t);case 2:return n=e.sent,gu(r=uh().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Qd(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kd,dontclear:!0},(function(e){return new Promise(function(){var n=Oe(Pe().mark((function n(r,i){var a,o,s;return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){uh().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=pu(t,"network-request-failed"),o=uh().setTimeout((function(){i(a)}),Gd.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Xd.apply(this,arguments)}var Jd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Zd="_blank",ep="http://localhost",tp=function(){function e(t){c(this,e),this.window=t,this.associatedEvent=null}return f(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(kY){}}}]),e}();function np(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Jd),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Va().toLowerCase();n&&(s=kc(c)?Zd:n),yc(c)&&(t=t||ep,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=b(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Sc(c)&&"_self"!==s)return rp(t||"",s),new tp(null);var f=window.open(t||"",s,l);gu(f,e,"popup-blocked");try{f.focus()}catch(kY){}return new tp(f)}function rp(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var ip=encodeURIComponent("fac");function ap(e,t,n,r,i,a){return op.apply(this,arguments)}function op(){return(op=Oe(Pe().mark((function e(t,n,r,i,a,o){var s,u,c,l,f,h,d,p,v,m,y,g,k;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gu(t.config.authDomain,t,"auth-domain-config-required"),gu(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:ps,eventId:a},n instanceof Dl)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",ro(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,c=Object.entries(o||{});u<c.length;u++)l=b(c[u],2),f=l[0],h=l[1],s[f]=h;for(n instanceof Ol&&(d=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=d.join(",")),t.tenantId&&(s.tid=t.tenantId),p=s,v=0,m=Object.keys(p);v<m.length;v++)y=m[v],void 0===p[y]&&delete p[y];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,k=g?"#".concat(ip,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(sp(t),"?").concat(so(p).slice(1)).concat(k));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sp(e){var t=e.config;return t.emulator?Su(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/").concat("__/auth/handler")}var up="webStorageSupport",cp=function(){function e(){c(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rh,this._completeRedirectFn=Nd,this._overrideRedirectResult=gd}return f(e,[{key:"_openPopup",value:function(){var e=Oe(Pe().mark((function e(t,n,r,i){var a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _u(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,ap(t,n,r,wu(),i);case 3:return o=e.sent,e.abrupt("return",np(t,o,oh()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Oe(Pe().mark((function e(t,n,r,i){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,ap(t,n,r,wu(),i);case 4:return ch(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(_u(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$d(t);case 2:return n=e.sent,r=new Od(t),n.register("authEvent",(function(e){return gu(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(up,{type:up},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),du(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Vd.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Cc()||gc()||Ec()}}]),e}(),lp=cp,fp=function(){function e(t){c(this,e),this.factorId=t}return f(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ku("unexpected MultiFactorSessionType")}}}]),e}(),hp=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this,"phone")).credential=e,r}return f(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Ru(e,"POST","/v2/accounts/mfaEnrollment:finalize",Nu(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Ru(e,"POST","/v2/accounts/mfaSignIn:finalize",Nu(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(fp),dp=function(){function e(){c(this,e)}return f(e,null,[{key:"assertion",value:function(e){return hp._fromCredential(e)}}]),e}();dp.FACTOR_ID="phone";var pp=function(){function e(){c(this,e)}return f(e,null,[{key:"assertionForEnrollment",value:function(e,t){return vp._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return vp._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gu("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,i=n.auth,a={idToken:n.credential,totpEnrollmentInfo:{}},Ru(i,"POST","/v2/accounts/mfaEnrollment:start",Nu(i,a));case 4:return r=e.sent,e.abrupt("return",mp._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}var i,a}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();pp.FACTOR_ID="totp";var vp=function(e){d(n,e);var t=k(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return f(n,[{key:"_finalizeEnroll",value:function(){var e=Oe(Pe().mark((function e(t,n,r){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gu("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",Qf(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Oe(Pe().mark((function e(t,n){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gu(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Nh(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(fp),mp=function(){function e(t,n,r,i,a,o,s){c(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return f(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(yp(e)||yp(t))&&(r=!0),r&&(yp(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),yp(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function yp(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var gp="@firebase/auth",kp="0.23.2",_p=function(){function e(t){c(this,e),this.auth=t,this.internalListeners=new Map}return f(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){gu(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var wp;!function(e){var t;null===(t=La())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function bp(){return window}wp="Browser",ss(new wo("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,s=o.apiKey,u=o.authDomain;gu(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:s,authDomain:u,clientPlatform:wp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ic(wp)},l=new Wc(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fc);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),ss(new wo("auth-internal",(function(e){return function(e){return new _p(e)}(Hc(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),_s(gp,kp,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(wp)),_s(gp,kp,"esm2017");function xp(e,t,n){return Ep.apply(this,arguments)}function Ep(){return Ep=Oe(Pe().mark((function e(t,n,r){var i,a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=bp(),o=a.BuildInfo,_u(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Rp(n.sessionId);case 4:return s=e.sent,u={},Ec()?u.ibi=o.packageName:wc()?u.apn=o.packageName:du(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",ap(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),Ep.apply(this,arguments)}function Sp(){return(Sp=Oe(Pe().mark((function e(t){var n,r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bp(),r=n.BuildInfo,i={},Ec()?i.iosBundleId=r.packageName:wc()?i.androidPackageName=r.packageName:du(t,"operation-not-supported-in-this-environment"),e.next=5,Ld(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tp(e){var t=bp().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Cp(e,t,n){return Ip.apply(this,arguments)}function Ip(){return Ip=Oe(Pe().mark((function e(t,n,r){var i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bp(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(pu(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),wc()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ip.apply(this,arguments)}function Np(e){var t,n,r,i,a,o,s,u,c,l,f=bp();gu("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),gu("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),gu("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),gu("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),gu("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Rp(e){return Pp.apply(this,arguments)}function Pp(){return(Pp=Oe(Pe().mark((function e(t){var n,r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Dp(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dp(e){if(_u(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Op=function(e){d(n,e);var t=k(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return f(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Gs(p(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Od);function Ap(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Up(),postBody:null,tenantId:e.tenantId,error:pu(e,"no-auth-event")}}function Mp(e,t){return Vp()._set(Bp(e),t)}function Lp(e){return Fp.apply(this,arguments)}function Fp(){return(Fp=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vp()._get(Bp(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Vp()._remove(Bp(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jp(e,t){var n,r,i=function(e){var t=qp(e),n=t.link?decodeURIComponent(t.link):void 0,r=qp(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return qp(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=qp(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(kY){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?pu(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Up(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Vp(){return fc(th)}function Bp(e){return pc("authEvent",e.config.apiKey,e.name)}function qp(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=_(t=n)||o(t)||s(t)||w();r[0];return uo(r.slice(1).join("?"))}var zp=function(){function e(){c(this,e),this._redirectPersistence=rh,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Nd,this._overrideRedirectResult=gd}return f(e,[{key:"_initialize",value:function(){var e=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Op(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){du(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Oe(Pe().mark((function e(t,n,r,i){var a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Np(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),hd.clear(),e.next=10,this._originValidation(t);case 10:return o=Ap(t,r,i),e.next=13,Mp(t,o);case 13:return e.next=15,xp(t,o,n);case 15:return s=e.sent,e.next=18,Tp(s);case 18:return u=e.sent,e.abrupt("return",Cp(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Sp.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=bp(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Oe(Pe().mark((function n(){return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Lp(e);case 2:t.onEvent(Hp());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=Oe(Pe().mark((function n(r){var i,a;return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Lp(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=jp(i,r.url)),t.onEvent(a||Hp());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");bp().handleOpenURL=function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(kY){console.error(kY)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Wp=zp;function Hp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pu("no-auth-event")}}function Gp(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Kp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return!("file:"!==Gp()&&"ionic:"!==Gp()&&"capacitor:"!==Gp()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yp(){return Ha()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Qp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return/Edge\/\d+/.test(e)}function $p(){try{var e=self.localStorage,t=oh();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va();return Yp()||Qp(e)}()||Ka()}catch(kY){return Xp()&&Ka()}return!1}function Xp(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Jp(){return("http:"===Gp()||"https:"===Gp()||za()||Kp())&&!(Wa()||qa())&&$p()&&!Xp()}function Zp(){return Kp()&&"undefined"!==typeof document}function ev(){return tv.apply(this,arguments)}function tv(){return(tv=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zp()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nv={LOCAL:"local",NONE:"none",SESSION:"session"},rv=gu,iv="persistence";function av(e,t){rv(Object.values(nv).includes(t),e,"invalid-persistence-type"),Wa()?rv(t!==nv.SESSION,e,"unsupported-persistence-type"):qa()?rv(t===nv.NONE,e,"unsupported-persistence-type"):Xp()?rv(t===nv.NONE||t===nv.LOCAL&&Ka(),e,"unsupported-persistence-type"):rv(t===nv.NONE||$p(),e,"unsupported-persistence-type")}function ov(e){return sv.apply(this,arguments)}function sv(){return(sv=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=uv(),r=pc(iv,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uv(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(kY){return null}}var cv=gu,lv=function(){function e(){c(this,e),this.browserResolver=fc(lp),this.cordovaResolver=fc(Wp),this.underlyingResolver=null,this._redirectPersistence=rh,this._completeRedirectFn=Nd,this._overrideRedirectResult=gd}return f(e,[{key:"_initialize",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Oe(Pe().mark((function e(t,n,r,i){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Oe(Pe().mark((function e(t,n,r,i){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Zp()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return cv(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ev();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function fv(e){return e.unwrap()}function hv(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new yv(e,function(e,t){var n,r=_o(e),i=t;return gu(t.customData.operationType,r,"argument-error"),gu(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Kf._fromError(r,i)}(e,t));else if(r){var i=dv(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function dv(e){var t=(e instanceof Ya?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ya)&&"temporaryProof"in t&&"phoneNumber"in t)return Xh.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Js)return null;switch(r){case Xs:n=Ll;break;case Qs:n=Ml;break;case $s:n=Fl;break;case Zs:n=Vl;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?jl._create(r,s):bl._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new Al(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Ya?n.credentialFromError(e):n.credentialFromResult(e)}function pv(e,t){return t.catch((function(t){throw t instanceof Ya&&hv(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,dv(t)),additionalUserInfo:Hf(e),user:gv.getOrCreate(r)}}))}function vv(e,t){return mv.apply(this,arguments)}function mv(){return(mv=Oe(Pe().mark((function e(t,n){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return pv(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yv=function(){function e(t,n){c(this,e),this.resolver=n,this.auth=t.wrapped()}return f(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return pv(fv(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),gv=function(){function e(t){c(this,e),this._delegate=t,this.multiFactor=function(e){var t=_o(e);return Xf.has(t)||Xf.set(t,$f._fromUser(t)),Xf.get(t)}(t)}return f(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pv(this.auth,uf(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vv(this.auth,Hh(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pv(this.auth,cd(this._delegate,t,lv)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ov(Hc(this.auth));case 2:return e.abrupt("return",Sd(this._delegate,t,lv));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pv(this.auth,lf(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return vv(this.auth,function(e,t,n){return Kh.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return pv(this.auth,function(e,t,n){return ud.apply(this,arguments)}(this._delegate,e,lv))}},{key:"reauthenticateWithRedirect",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ov(Hc(this.auth));case 2:return e.abrupt("return",xd(this._delegate,t,lv));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Df.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ql(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Ff(_o(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Ff(_o(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return $h.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Lf.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Of.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();gv.USER_MAP=new WeakMap;var kv=gu,_v=function(){function e(t,n){if(c(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;kv(r,"invalid-api-key",{appName:t.name}),kv(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?lv:void 0;this._delegate=n.initialize({options:{persistence:bv(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(su),this.linkUnderlyingAuth()}return f(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?gv.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Kc(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return wf.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return bf(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return _f.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pv(this._delegate,Sf(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Pf.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Rl.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kv(Jp(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Cd(this._delegate,lv);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",pv(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Hc(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=wv(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=wv(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Cf.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return kf.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:av(this._delegate,t),e.t0=t,e.next=e.t0===nv.SESSION?4:e.t0===nv.LOCAL?6:e.t0===nv.NONE?11:13;break;case 4:return n=rh,e.abrupt("break",14);case 6:return e.next=8,fc(Ch)._isAvailable();case 8:return r=e.sent,n=r?Ch:th,e.abrupt("break",14);case 11:return n=dc,e.abrupt("break",14);case 13:return e.abrupt("return",du("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return pv(this._delegate,function(e){return Hl.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return pv(this._delegate,of(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return pv(this._delegate,function(e,t){return pf.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return pv(this._delegate,function(e,t,n){return of(_o(e),Pl.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return pv(this._delegate,function(e,t,n){return If.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return vv(this._delegate,function(e,t,n){return Wh.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kv(Jp(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",pv(this._delegate,od(this._delegate,t,lv)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kv(Jp(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ov(this._delegate);case 3:return e.abrupt("return",wd(this._delegate,t,lv));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ef.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function wv(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&gv.getOrCreate(e))},error:t,complete:n}}function bv(e,t){var n=function(e,t){var n=uv();if(!n)return[];var r=pc(iv,e,t);switch(n.getItem(r)){case nv.NONE:return[dc];case nv.LOCAL:return[Ch,rh];case nv.SESSION:return[rh];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ch)||n.push(Ch),"undefined"!==typeof window)for(var r=0,i=[th,rh];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(dc)||n.push(dc),n}_v.Persistence=nv;var xv=function(){function e(){c(this,e),this.providerId="phone",this._delegate=new Xh(fv(Ws.auth()))}return f(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Xh.credential(e,t)}}]),e}();xv.PHONE_SIGN_IN_METHOD=Xh.PHONE_SIGN_IN_METHOD,xv.PROVIDER_ID=Xh.PROVIDER_ID;var Ev,Sv=gu,Tv=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ws.app();c(this,e),Sv(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Bh(t,n,i.auth()),this.type=this._delegate.type}return f(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Ev=Ws).INTERNAL.registerComponent(new wo("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new _v(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:eu,PASSWORD_RESET:tu,RECOVER_EMAIL:nu,REVERT_SECOND_FACTOR_ADDITION:ru,VERIFY_AND_CHANGE_EMAIL:iu,VERIFY_EMAIL:au}},EmailAuthProvider:Pl,FacebookAuthProvider:Ml,GithubAuthProvider:Fl,GoogleAuthProvider:Ll,OAuthProvider:Al,SAMLAuthProvider:Ul,PhoneAuthProvider:xv,PhoneMultiFactorGenerator:dp,RecaptchaVerifier:Tv,TwitterAuthProvider:Vl,Auth:_v,AuthCredential:$c,Error:Ya}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ev.registerVersion("@firebase/auth-compat","0.4.2");var Cv,Iv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Nv={},Rv=Rv||{},Pv=Iv||self;function Dv(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ov(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Av="closure_uid_"+(1e9*Math.random()>>>0),Mv=0;function Lv(e,t,n){return e.call.apply(e.bind,arguments)}function Fv(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function jv(e,t,n){return(jv=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lv:Fv).apply(null,arguments)}function Uv(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Vv(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Bv(){this.s=this.s,this.o=this.o}Bv.prototype.s=!1,Bv.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Av)&&e[Av]||(e[Av]=++Mv))},Bv.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var qv=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function zv(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Wv(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Dv(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Hv(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Hv.prototype.h=function(){this.defaultPrevented=!0};var Gv=function(){if(!Pv.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Pv.addEventListener("test",(function(){}),t),Pv.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Kv(e){return/^[\s\xa0]*$/.test(e)}function Yv(){var e=Pv.navigator;return e&&(e=e.userAgent)?e:""}function Qv(e){return-1!=Yv().indexOf(e)}function $v(e){return $v[" "](e),e}$v[" "]=function(){};var Xv,Jv,Zv=Qv("Opera"),em=Qv("Trident")||Qv("MSIE"),tm=Qv("Edge"),nm=tm||em,rm=Qv("Gecko")&&!(-1!=Yv().toLowerCase().indexOf("webkit")&&!Qv("Edge"))&&!(Qv("Trident")||Qv("MSIE"))&&!Qv("Edge"),im=-1!=Yv().toLowerCase().indexOf("webkit")&&!Qv("Edge");function am(){var e=Pv.document;return e?e.documentMode:void 0}e:{var om="",sm=function(){var e=Yv();return rm?/rv:([^\);]+)(\)|;)/.exec(e):tm?/Edge\/([\d\.]+)/.exec(e):em?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):im?/WebKit\/(\S+)/.exec(e):Zv?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(sm&&(om=sm?sm[1]:""),em){var um=am();if(null!=um&&um>parseFloat(om)){Xv=String(um);break e}}Xv=om}if(Pv.document&&em){var cm=am();Jv=cm||(parseInt(Xv,10)||void 0)}else Jv=void 0;var lm=Jv;function fm(e,t){if(Hv.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(rm){e:{try{$v(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:hm[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&fm.$.h.call(this)}}Vv(fm,Hv);var hm={2:"touch",3:"pen",4:"mouse"};fm.prototype.h=function(){fm.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var dm="closure_listenable_"+(1e6*Math.random()|0),pm=0;function vm(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++pm,this.fa=this.ia=!1}function mm(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ym(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function gm(e){var t={};for(var n in e)t[n]=e[n];return t}var km="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _m(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<km.length;a++)n=km[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function wm(e){this.src=e,this.g={},this.h=0}function bm(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=qv(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(mm(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function xm(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}wm.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=xm(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new vm(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Em="closure_lm_"+(1e6*Math.random()|0),Sm={};function Tm(e,t,n,r,i){if(r&&r.once)return Im(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Tm(e,t[a],n,r,i);return null}return n=Mm(n),e&&e[dm]?e.O(t,n,Ov(r)?!!r.capture:!!r,i):Cm(e,t,n,!1,r,i)}function Cm(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ov(i)?!!i.capture:!!i,s=Om(e);if(s||(e[Em]=s=new wm(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Dm;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Gv||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Pm(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Im(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Im(e,t[a],n,r,i);return null}return n=Mm(n),e&&e[dm]?e.P(t,n,Ov(r)?!!r.capture:!!r,i):Cm(e,t,n,!0,r,i)}function Nm(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Nm(e,t[a],n,r,i);else r=Ov(r)?!!r.capture:!!r,n=Mm(n),e&&e[dm]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=xm(a=e.g[t],n,r,i))&&(mm(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Om(e))&&(t=e.g[t.toString()],e=-1,t&&(e=xm(t,n,r,i)),(n=-1<e?t[e]:null)&&Rm(n))}function Rm(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[dm])bm(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Pm(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Om(t))?(bm(n,e),0==n.h&&(n.src=null,t[Em]=null)):mm(e)}}}function Pm(e){return e in Sm?Sm[e]:Sm[e]="on"+e}function Dm(e,t){if(e.fa)e=!0;else{t=new fm(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Rm(e),e=n.call(r,t)}return e}function Om(e){return(e=e[Em])instanceof wm?e:null}var Am="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mm(e){return"function"===typeof e?e:(e[Am]||(e[Am]=function(t){return e.handleEvent(t)}),e[Am])}function Lm(){Bv.call(this),this.i=new wm(this),this.S=this,this.J=null}function Fm(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Hv(t,e);else if(t instanceof Hv)t.target=t.target||e;else{var i=t;_m(t=new Hv(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=jm(o,r,!0,t)&&i}if(i=jm(o=t.g=e,r,!0,t)&&i,i=jm(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=jm(o=t.g=n[a],r,!1,t)&&i}function jm(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&bm(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Vv(Lm,Bv),Lm.prototype[dm]=!0,Lm.prototype.removeEventListener=function(e,t,n,r){Nm(this,e,t,n,r)},Lm.prototype.N=function(){if(Lm.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)mm(n[r]);delete t.g[e],t.h--}}this.J=null},Lm.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Lm.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Um=Pv.JSON.stringify,Vm=function(){function e(t,n){c(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return f(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Bm(){var e=Qm,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var qm=function(){function e(){c(this,e),this.h=this.g=null}return f(e,[{key:"add",value:function(e,t){var n=zm.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),zm=new Vm((function(){return new Wm}),(function(e){return e.reset()})),Wm=function(){function e(){c(this,e),this.next=this.g=this.h=null}return f(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Hm(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Gm(e){Pv.setTimeout((function(){throw e}),0)}var Km,Ym=!1,Qm=new qm,$m=function(){var e=Pv.Promise.resolve(void 0);Km=function(){e.then(Xm)}},Xm=function(){for(var e;e=Bm();){try{e.h.call(e.g)}catch(n){Gm(n)}var t=zm;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ym=!1};function Jm(e,t){Lm.call(this),this.h=e||1,this.g=t||Pv,this.j=jv(this.qb,this),this.l=Date.now()}function Zm(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ey(e,t,n){if("function"===typeof e)n&&(e=jv(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=jv(e.handleEvent,e)}return 2147483647<Number(t)?-1:Pv.setTimeout(e,t||0)}function ty(e){e.g=ey((function(){e.g=null,e.i&&(e.i=!1,ty(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Vv(Jm,Lm),(Cv=Jm.prototype).ga=!1,Cv.T=null,Cv.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Fm(this,"tick"),this.ga&&(Zm(this),this.start()))}},Cv.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Cv.N=function(){Jm.$.N.call(this),Zm(this),delete this.g};var ny=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return f(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ty(this)}},{key:"N",value:function(){Gs(p(n.prototype),"N",this).call(this),this.g&&(Pv.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Bv);function ry(e){Bv.call(this),this.h=e,this.g={}}Vv(ry,Bv);var iy=[];function ay(e,t,n,r){Array.isArray(n)||(n&&(iy[0]=n.toString()),n=iy);for(var i=0;i<n.length;i++){var a=Tm(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function oy(e){ym(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Rm(e)}),e),e.g={}}function sy(){this.g=!0}function uy(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Um(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}ry.prototype.N=function(){ry.$.N.call(this),oy(this)},ry.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sy.prototype.Ea=function(){this.g=!1},sy.prototype.info=function(){};var cy={},ly=null;function fy(){return ly=ly||new Lm}function hy(e){Hv.call(this,cy.Ta,e)}function dy(e){var t=fy();Fm(t,new hy(t))}function py(e,t){Hv.call(this,cy.STAT_EVENT,e),this.stat=t}function vy(e){var t=fy();Fm(t,new py(t,e))}function my(e,t){Hv.call(this,cy.Ua,e),this.size=t}function yy(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Pv.setTimeout((function(){e()}),t)}cy.Ta="serverreachability",Vv(hy,Hv),cy.STAT_EVENT="statevent",Vv(py,Hv),cy.Ua="timingevent",Vv(my,Hv);var gy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ky={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function _y(){}function wy(e){return e.h||(e.h=e.i())}function by(){}_y.prototype.h=null;var xy,Ey={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Sy(){Hv.call(this,"d")}function Ty(){Hv.call(this,"c")}function Cy(){}function Iy(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ry(this),this.P=Ry,e=nm?125:void 0,this.V=new Jm(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ny}function Ny(){this.i=null,this.g="",this.h=!1}Vv(Sy,Hv),Vv(Ty,Hv),Vv(Cy,_y),Cy.prototype.g=function(){return new XMLHttpRequest},Cy.prototype.i=function(){return{}},xy=new Cy;var Ry=45e3,Py={},Dy={};function Oy(e,t,n){e.L=1,e.v=Jy(Ky(t)),e.s=n,e.S=!0,Ay(e,null)}function Ay(e,t){e.G=Date.now(),jy(e),e.A=Ky(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),fg(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Ny,e.g=hk(e.l,n?t:null,!e.s),0<e.O&&(e.M=new ny(jv(e.Pa,e,e.g),e.O)),ay(e.U,e.g,"readystatechange",e.nb),t=e.I?gm(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),dy(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function My(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Ly(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Fy(e,n))==Dy){4==t&&(e.o=4,vy(14),i=!1),uy(e.j,e.m,null,"[Incomplete Response]");break}if(r==Py){e.o=4,vy(15),uy(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}uy(e.j,e.m,r,null),zy(e,r)}My(e)&&r!=Dy&&r!=Py&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,vy(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ik(t),t.M=!0,vy(11))):(uy(e.j,e.m,n,"[Invalid Chunked Response]"),qy(e),By(e))}function Fy(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Dy:(n=Number(t.substring(n,r)),isNaN(n)?Py:(r+=1)+n>t.length?Dy:(t=t.slice(r,r+n),e.C=r+n,t))}function jy(e){e.Y=Date.now()+e.P,Uy(e,e.P)}function Uy(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=yy(jv(e.lb,e),t)}function Vy(e){e.B&&(Pv.clearTimeout(e.B),e.B=null)}function By(e){0==e.l.H||e.J||sk(e.l,e)}function qy(e){Vy(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Zm(e.V),oy(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function zy(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||gg(n.i,e)))if(!e.K&&gg(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;ok(n),$g(n)}rk(n),vy(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=yy(jv(n.ib,n),6e3));if(1>=yg(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else ck(n,11)}else if((e.K||n.g==e)&&ok(n),!Kv(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(kg(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,Xy(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=fk(r,r.J?r.pa:null,r.Y),d.K){_g(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Vy(p),jy(p)),r.g=d}else nk(r);0<n.j.length&&Jg(n)}else"stop"!=a[0]&&"close"!=a[0]||ck(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ck(n,7):Qg(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}dy()}catch(a){}}function Wy(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Dv(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Dv(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Dv(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Cv=Iy.prototype).setTimeout=function(e){this.P=e},Cv.nb=function(e){e=e.target;var t=this.M;t&&3==zg(e)?t.l():this.Pa(e)},Cv.Pa=function(e){try{if(e==this.g)e:{var t=zg(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||nm||this.g&&(this.h.h||this.g.ja()||Wg(this.g)))){this.J||4!=t||7==n||dy(),Vy(this);var r=this.g.da();this.ca=r;t:if(My(this)){var i=Wg(this.g);e="";var a=i.length,o=4==zg(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qy(this),By(this);var s="";break t}this.h.i=new Pv.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kv(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,vy(12),qy(this),By(this);break e}uy(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zy(this,r)}this.S?(Ly(this,t,s),nm&&this.i&&3==t&&(ay(this.U,this.V,"tick",this.mb),this.V.start())):(uy(this.j,this.m,s,null),zy(this,s)),4==t&&qy(this),this.i&&!this.J&&(4==t?sk(this.l,this):(this.i=!1,jy(this)))}else(function(e){var t={};e=(e.g&&2<=zg(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Kv(e[n])){var r=Hm(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,vy(12)):(this.o=0,vy(13)),qy(this),By(this)}}}catch(t){}},Cv.mb=function(){if(this.g){var e=zg(this.g),t=this.g.ja();this.C<t.length&&(Vy(this),Ly(this,e,t),this.i&&4!=e&&jy(this))}},Cv.cancel=function(){this.J=!0,qy(this)},Cv.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(dy(),vy(17)),qy(this),this.o=2,By(this)):Uy(this,this.Y-e)};var Hy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gy(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Gy){this.h=e.h,Yy(this,e.j),this.s=e.s,this.g=e.g,Qy(this,e.m),this.l=e.l;var t=e.i,n=new sg;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),$y(this,n),this.o=e.o}else e&&(t=String(e).match(Hy))?(this.h=!1,Yy(this,t[1]||"",!0),this.s=Zy(t[2]||""),this.g=Zy(t[3]||"",!0),Qy(this,t[4]),this.l=Zy(t[5]||"",!0),$y(this,t[6]||"",!0),this.o=Zy(t[7]||"")):(this.h=!1,this.i=new sg(null,this.h))}function Ky(e){return new Gy(e)}function Yy(e,t,n){e.j=n?Zy(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Qy(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function $y(e,t,n){t instanceof sg?(e.i=t,function(e,t){t&&!e.j&&(ug(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(cg(this,t),fg(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=eg(t,ag)),e.i=new sg(t,e.h))}function Xy(e,t,n){e.i.set(t,n)}function Jy(e){return Xy(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Zy(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function eg(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,tg),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function tg(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Gy.prototype.toString=function(){var e=[],t=this.j;t&&e.push(eg(t,ng,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(eg(t,ng,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(eg(n,"/"==n.charAt(0)?ig:rg,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",eg(n,og)),e.join("")};var ng=/[#\/\?@]/g,rg=/[#\?:]/g,ig=/[#\?]/g,ag=/[#\?@]/g,og=/#/g;function sg(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ug(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function cg(e,t){ug(e),t=hg(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function lg(e,t){return ug(e),t=hg(e,t),e.g.has(t)}function fg(e,t,n){cg(e,t),0<n.length&&(e.i=null,e.g.set(hg(e,t),zv(n)),e.h+=n.length)}function hg(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Cv=sg.prototype).add=function(e,t){ug(this),this.i=null,e=hg(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Cv.forEach=function(e,t){ug(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Cv.ta=function(){ug(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Cv.Z=function(e){ug(this);var t=[];if("string"===typeof e)lg(this,e)&&(t=t.concat(this.g.get(hg(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Cv.set=function(e,t){return ug(this),this.i=null,lg(this,e=hg(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Cv.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Cv.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var dg=f((function e(t,n){c(this,e),this.g=t,this.map=n}));function pg(e){this.l=e||vg,Pv.PerformanceNavigationTiming?e=0<(e=Pv.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Pv.g&&Pv.g.Ka&&Pv.g.Ka()&&Pv.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vg=10;function mg(e){return!!e.h||!!e.g&&e.g.size>=e.j}function yg(e){return e.h?1:e.g?e.g.size:0}function gg(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function kg(e,t){e.g?e.g.add(t):e.h=t}function _g(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function wg(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=cn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return zv(e.i)}pg.prototype.cancel=function(){if(this.i=wg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=cn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var bg,xg=function(){function e(){c(this,e)}return f(e,[{key:"stringify",value:function(e){return Pv.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Pv.JSON.parse(e,void 0)}}]),e}();function Eg(){this.g=new xg}function Sg(e,t,n){var r=n||"";try{Wy(e,(function(e,n){var i=e;Ov(e)&&(i=Um(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(kY){throw t.push(r+"type="+encodeURIComponent("_badmap")),kY}}function Tg(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Cg(e){this.l=e.fc||null,this.j=e.ob||!1}function Ig(e,t){Lm.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ng,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vv(Cg,_y),Cg.prototype.g=function(){return new Ig(this.l,this.j)},Cg.prototype.i=(bg={},function(){return bg}),Vv(Ig,Lm);var Ng=0;function Rg(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Pg(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Dg(e)}function Dg(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Cv=Ig.prototype).open=function(e,t){if(this.readyState!=Ng)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Dg(this)},Cv.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Pv).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Cv.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pg(this)),this.readyState=Ng},Cv.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dg(this)),this.g&&(this.readyState=3,Dg(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Pv.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Rg(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Cv.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Pg(this):Dg(this),3==this.readyState&&Rg(this)}},Cv.Za=function(e){this.g&&(this.response=this.responseText=e,Pg(this))},Cv.Ya=function(e){this.g&&(this.response=e,Pg(this))},Cv.ka=function(){this.g&&Pg(this)},Cv.setRequestHeader=function(e,t){this.v.append(e,t)},Cv.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Cv.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ig.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Og=Pv.JSON.parse;function Ag(e){Lm.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Mg,this.L=this.M=!1}Vv(Ag,Lm);var Mg="",Lg=/^https?$/i,Fg=["POST","PUT"];function jg(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ug(e),Bg(e)}function Ug(e){e.F||(e.F=!0,Fm(e,"complete"),Fm(e,"error"))}function Vg(e){if(e.h&&"undefined"!=typeof Rv&&(!e.C[1]||4!=zg(e)||2!=e.da()))if(e.v&&4==zg(e))ey(e.La,0,e);else if(Fm(e,"readystatechange"),4==zg(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Hy)[1]||null;!a&&Pv.self&&Pv.self.location&&(a=Pv.self.location.protocol.slice(0,-1)),i=!Lg.test(a?a.toLowerCase():"")}t=i}if(t)Fm(e,"complete"),Fm(e,"success");else{e.m=6;try{var o=2<zg(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Ug(e)}}finally{Bg(e)}}}function Bg(e,t){if(e.g){qg(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Fm(e,"ready");try{n.onreadystatechange=r}catch(kY){}}}function qg(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Pv.clearTimeout(e.A),e.A=null)}function zg(e){return e.g?e.g.readyState:0}function Wg(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Mg:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Qk){return null}}function Hg(e){var t="";return ym(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Gg(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Hg(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Xy(e,t,n))}function Kg(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Yg(e){this.Ga=0,this.j=[],this.l=new sy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Kg("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Kg("baseRetryDelayMs",5e3,e),this.hb=Kg("retryDelaySeedMs",1e4,e),this.eb=Kg("forwardChannelMaxRetries",2,e),this.xa=Kg("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new pg(e&&e.concurrentRequestLimit),this.Ja=new Eg,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Qg(e){if(Xg(e),3==e.H){var t=e.W++,n=Ky(e.I);if(Xy(n,"SID",e.K),Xy(n,"RID",t),Xy(n,"TYPE","terminate"),ek(e,n),(t=new Iy(e,e.l,t)).L=2,t.v=Jy(Ky(n)),n=!1,Pv.navigator&&Pv.navigator.sendBeacon)try{n=Pv.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Pv.Image&&((new Image).src=t.v,n=!0),n||(t.g=hk(t.l,null),t.g.ha(t.v)),t.G=Date.now(),jy(t)}lk(e)}function $g(e){e.g&&(ik(e),e.g.cancel(),e.g=null)}function Xg(e){$g(e),e.u&&(Pv.clearTimeout(e.u),e.u=null),ok(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Pv.clearTimeout(e.m),e.m=null)}function Jg(e){if(!mg(e.i)&&!e.m){e.m=!0;var t=e.Na;Km||$m(),Ym||(Km(),Ym=!0),Qm.add(t,e),e.C=0}}function Zg(e,t){var n;n=t?t.m:e.W++;var r=Ky(e.I);Xy(r,"SID",e.K),Xy(r,"RID",n),Xy(r,"AID",e.V),ek(e,r),e.o&&e.s&&Gg(r,e.o,e.s),n=new Iy(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=tk(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),kg(e.i,n),Oy(n,r,t)}function ek(e,t){e.na&&ym(e.na,(function(e,n){Xy(t,n,e)})),e.h&&Wy({},(function(e,n){Xy(t,n,e)}))}function tk(e,t,n){n=Math.min(e.j.length,n);var r=e.h?jv(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{Sg(l,o,"req"+c+"_")}catch(o_){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function nk(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Km||$m(),Ym||(Km(),Ym=!0),Qm.add(t,e),e.A=0}}function rk(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=yy(jv(e.Ma,e),uk(e,e.A)),e.A++,!0)}function ik(e){null!=e.B&&(Pv.clearTimeout(e.B),e.B=null)}function ak(e){e.g=new Iy(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ky(e.wa);Xy(t,"RID","rpc"),Xy(t,"SID",e.K),Xy(t,"AID",e.V),Xy(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Xy(t,"TO",e.qa),Xy(t,"TYPE","xmlhttp"),ek(e,t),e.o&&e.s&&Gg(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Jy(Ky(t)),n.s=null,n.S=!0,Ay(n,e)}function ok(e){null!=e.v&&(Pv.clearTimeout(e.v),e.v=null)}function sk(e,t){var n=null;if(e.g==t){ok(e),ik(e),e.g=null;var r=2}else{if(!gg(e.i,t))return;n=t.F,_g(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Fm(r=fy(),new my(r,n)),Jg(e)}else nk(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(yg(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=yy(jv(e.Na,e,t),uk(e,e.C)),e.C++,!0))}(e,t)||2==r&&rk(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ck(e,5);break;case 4:ck(e,10);break;case 3:ck(e,6);break;default:ck(e,2)}}function uk(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ck(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=jv(e.pb,e);n||(n=new Gy("//www.google.com/images/cleardot.gif"),Pv.location&&"http"==Pv.location.protocol||Yy(n,"https"),Jy(n)),function(e,t){var n=new sy;if(Pv.Image){var r=new Image;r.onload=Uv(Tg,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Uv(Tg,n,r,"TestLoadImage: error",!1,t),r.onabort=Uv(Tg,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Uv(Tg,n,r,"TestLoadImage: timeout",!1,t),Pv.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else vy(2);e.H=0,e.h&&e.h.za(t),lk(e),Xg(e)}function lk(e){if(e.H=0,e.ma=[],e.h){var t=wg(e.i);0==t.length&&0==e.j.length||(Wv(e.ma,t),Wv(e.ma,e.j),e.i.i.length=0,zv(e.j),e.j.length=0),e.h.ya()}}function fk(e,t,n){var r=n instanceof Gy?Ky(n):new Gy(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Qy(r,r.m);else{var i=Pv.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Gy(null);r&&Yy(a,r),t&&(a.g=t),i&&Qy(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&Xy(r,n,t),Xy(r,"VER",e.ra),ek(e,r),r}function hk(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Ag(new Cg({ob:!0})):new Ag(e.va)).Oa(e.J),t}function dk(){}function pk(){if(em&&!(10<=Number(lm)))throw Error("Environmental error: no available transport.")}function vk(e,t){Lm.call(this),this.g=new Yg(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Kv(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Kv(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gk(this)}function mk(e){Sy.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yk(){Ty.call(this),this.status=1}function gk(e){this.g=e}function kk(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function _k(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function wk(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Cv=Ag.prototype).Oa=function(e){this.M=e},Cv.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xy.g(),this.C=this.u?wy(this.u):wy(xy),this.g.onreadystatechange=jv(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void jg(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=cn(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(d){o.e(d)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Pv.FormData&&e instanceof Pv.FormData,!(0<=qv(Fg,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,c=cn(n);try{for(c.s();!(u=c.n()).done;){var l=b(u.value,2),f=l[0],h=l[1];this.g.setRequestHeader(f,h)}}catch(d){c.e(d)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{qg(this),0<this.B&&((this.L=function(e){return em&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jv(this.ua,this)):this.A=ey(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){jg(this,s)}},Cv.ua=function(){"undefined"!=typeof Rv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fm(this,"timeout"),this.abort(8))},Cv.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Fm(this,"complete"),Fm(this,"abort"),Bg(this))},Cv.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bg(this,!0)),Ag.$.N.call(this)},Cv.La=function(){this.s||(this.G||this.v||this.l?Vg(this):this.kb())},Cv.kb=function(){Vg(this)},Cv.isActive=function(){return!!this.g},Cv.da=function(){try{return 2<zg(this)?this.g.status:-1}catch(bg){return-1}},Cv.ja=function(){try{return this.g?this.g.responseText:""}catch(bg){return""}},Cv.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Og(t)}},Cv.Ia=function(){return this.m},Cv.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Cv=Yg.prototype).ra=8,Cv.H=1,Cv.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Iy(this,this.l,e),n=this.s;if(this.U&&(n?_m(n=gm(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=tk(this,t,r),Xy(i=Ky(this.I),"RID",e),Xy(i,"CVER",22),this.F&&Xy(i,"X-HTTP-Session-Id",this.F),ek(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Hg(n)))+"&"+r:this.o&&Gg(i,this.o,n)),kg(this.i,t),this.bb&&Xy(i,"TYPE","init"),this.P?(Xy(i,"$req",r),Xy(i,"SID","null"),t.aa=!0,Oy(t,i,null)):Oy(t,i,r),this.H=2}}else 3==this.H&&(e?Zg(this,e):0==this.j.length||mg(this.i)||Zg(this))},Cv.Ma=function(){if(this.u=null,ak(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=yy(jv(this.jb,this),e)}},Cv.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,vy(10),$g(this),ak(this))},Cv.ib=function(){null!=this.v&&(this.v=null,$g(this),rk(this),vy(19))},Cv.pb=function(e){e?(this.l.info("Successfully pinged google.com"),vy(2)):(this.l.info("Failed to ping google.com"),vy(1))},Cv.isActive=function(){return!!this.h&&this.h.isActive(this)},(Cv=dk.prototype).Ba=function(){},Cv.Aa=function(){},Cv.za=function(){},Cv.ya=function(){},Cv.isActive=function(){return!0},Cv.Va=function(){},pk.prototype.g=function(e,t){return new vk(e,t)},Vv(vk,Lm),vk.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;vy(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=fk(e,null,e.Y),Jg(e)},vk.prototype.close=function(){Qg(this.g)},vk.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Um(e),e=n);t.j.push(new dg(t.fb++,e)),3==t.H&&Jg(t)},vk.prototype.N=function(){this.g.h=null,delete this.j,Qg(this.g),delete this.g,vk.$.N.call(this)},Vv(mk,Sy),Vv(yk,Ty),Vv(gk,dk),gk.prototype.Ba=function(){Fm(this.g,"a")},gk.prototype.Aa=function(e){Fm(this.g,new mk(e))},gk.prototype.za=function(e){Fm(this.g,new yk)},gk.prototype.ya=function(){Fm(this.g,"b")},Vv(kk,(function(){this.blockSize=-1})),kk.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},kk.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)_k(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){_k(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){_k(this,r),i=0;break}}this.h=i,this.i+=t},kk.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var bk={};function xk(e){return-128<=e&&128>e?function(e,t){var n=bk;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new wk([0|e],0>e?-1:0)})):new wk([0|e],0>e?-1:0)}function Ek(e){if(isNaN(e)||!isFinite(e))return Tk;if(0>e)return Pk(Ek(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Sk;return new wk(t,0)}var Sk=4294967296,Tk=xk(0),Ck=xk(1),Ik=xk(16777216);function Nk(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Rk(e){return-1==e.h}function Pk(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new wk(n,~e.h).add(Ck)}function Dk(e,t){return e.add(Pk(t))}function Ok(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ak(e,t){this.g=e,this.h=t}function Mk(e,t){if(Nk(t))throw Error("division by zero");if(Nk(e))return new Ak(Tk,Tk);if(Rk(e))return t=Mk(Pk(e),t),new Ak(Pk(t.g),Pk(t.h));if(Rk(t))return t=Mk(e,Pk(t)),new Ak(Pk(t.g),t.h);if(30<e.g.length){if(Rk(e)||Rk(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Ck,r=t;0>=r.X(e);)n=Lk(n),r=Lk(r);var i=Fk(n,1),a=Fk(r,1);for(r=Fk(r,2),n=Fk(n,2);!Nk(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Fk(r,1),n=Fk(n,1)}return t=Dk(e,i.R(t)),new Ak(i,t)}for(i=Tk;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Ek(n)).R(t);Rk(o)||0<o.X(e);)o=(a=Ek(n-=r)).R(t);Nk(a)&&(a=Ck),i=i.add(a),e=Dk(e,o)}return new Ak(i,e)}function Lk(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new wk(n,e.h)}function Fk(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new wk(i,e.h)}(Cv=wk.prototype).ea=function(){if(Rk(this))return-Pk(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Sk+r)*t,t*=Sk}return e},Cv.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Nk(this))return"0";if(Rk(this))return"-"+Pk(this).toString(e);for(var t=Ek(Math.pow(e,6)),n=this,r="";;){var i=Mk(n,t).g,a=((0<(n=Dk(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Nk(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Cv.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Cv.X=function(e){return Rk(e=Dk(this,e))?-1:Nk(e)?0:1},Cv.abs=function(){return Rk(this)?Pk(this):this},Cv.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new wk(n,-2147483648&n[n.length-1]?-1:0)},Cv.R=function(e){if(Nk(this)||Nk(e))return Tk;if(Rk(this))return Rk(e)?Pk(this).R(Pk(e)):Pk(Pk(this).R(e));if(Rk(e))return Pk(this.R(Pk(e)));if(0>this.X(Ik)&&0>e.X(Ik))return Ek(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,Ok(n,2*r+2*i),n[2*r+2*i+1]+=a*u,Ok(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,Ok(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,Ok(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new wk(n,0)},Cv.gb=function(e){return Mk(this,e).h},Cv.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new wk(n,this.h&e.h)},Cv.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new wk(n,this.h|e.h)},Cv.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new wk(n,this.h^e.h)},pk.prototype.createWebChannel=pk.prototype.g,vk.prototype.send=vk.prototype.u,vk.prototype.open=vk.prototype.m,vk.prototype.close=vk.prototype.close,gy.NO_ERROR=0,gy.TIMEOUT=8,gy.HTTP_ERROR=6,ky.COMPLETE="complete",by.EventType=Ey,Ey.OPEN="a",Ey.CLOSE="b",Ey.ERROR="c",Ey.MESSAGE="d",Lm.prototype.listen=Lm.prototype.O,Ag.prototype.listenOnce=Ag.prototype.P,Ag.prototype.getLastError=Ag.prototype.Sa,Ag.prototype.getLastErrorCode=Ag.prototype.Ia,Ag.prototype.getStatus=Ag.prototype.da,Ag.prototype.getResponseJson=Ag.prototype.Wa,Ag.prototype.getResponseText=Ag.prototype.ja,Ag.prototype.send=Ag.prototype.ha,Ag.prototype.setWithCredentials=Ag.prototype.Oa,kk.prototype.digest=kk.prototype.l,kk.prototype.reset=kk.prototype.reset,kk.prototype.update=kk.prototype.j,wk.prototype.add=wk.prototype.add,wk.prototype.multiply=wk.prototype.R,wk.prototype.modulo=wk.prototype.gb,wk.prototype.compare=wk.prototype.X,wk.prototype.toNumber=wk.prototype.ea,wk.prototype.toString=wk.prototype.toString,wk.prototype.getBits=wk.prototype.D,wk.fromNumber=Ek,wk.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Pk(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ek(Math.pow(n,8)),i=Tk,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=Ek(Math.pow(n,o)),i=i.R(o).add(Ek(s))):i=(i=i.R(r)).add(Ek(s))}return i};var jk=Nv.createWebChannelTransport=function(){return new pk},Uk=Nv.getStatEventTarget=function(){return fy()},Vk=Nv.ErrorCode=gy,Bk=Nv.EventType=ky,qk=Nv.Event=cy,zk=Nv.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Wk=Nv.FetchXmlHttpFactory=Cg,Hk=Nv.WebChannel=by,Gk=Nv.XhrIo=Ag,Kk=Nv.Md5=kk,Yk=Nv.Integer=wk,Qk="@firebase/firestore",$k=function(){function e(t){c(this,e),this.uid=t}return f(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();$k.UNAUTHENTICATED=new $k(null),$k.GOOGLE_CREDENTIALS=new $k("google-credentials-uid"),$k.FIRST_PARTY=new $k("first-party-uid"),$k.MOCK_USER=new $k("mock-user");var Xk="9.23.0",Jk=new Do("@firebase/firestore");function Zk(){return Jk.logLevel}function e_(e){if(Jk.logLevel<=So.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(r_);Jk.debug.apply(Jk,["Firestore (".concat(Xk,"): ").concat(e)].concat(u(i)))}}function t_(e){if(Jk.logLevel<=So.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(r_);Jk.error.apply(Jk,["Firestore (".concat(Xk,"): ").concat(e)].concat(u(i)))}}function n_(e){if(Jk.logLevel<=So.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(r_);Jk.warn.apply(Jk,["Firestore (".concat(Xk,"): ").concat(e)].concat(u(i)))}}function r_(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function i_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Xk,") INTERNAL ASSERTION FAILED: ")+e;throw t_(t),new Error(t)}function a_(e,t){e||i_()}function o_(e,t){return e}var s_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},u_=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return f(n)}(Ya),c_=f((function e(){var t=this;c(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),l_=f((function e(t,n){c(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),f_=function(){function e(){c(this,e)}return f(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t($k.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),h_=function(){function e(t){c(this,e),this.token=t,this.changeListener=null}return f(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),d_=function(){function e(t){c(this,e),this.t=t,this.currentUser=$k.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return f(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new c_;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new c_,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){e_("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(e_("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new c_)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(e_("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(a_("string"==typeof n.accessToken),new l_(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return a_(null===e||"string"==typeof e),new $k(e)}}]),e}(),p_=function(){function e(t,n,r){c(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=$k.FIRST_PARTY,this.g=new Map}return f(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),v_=function(){function e(t,n,r){c(this,e),this.h=t,this.l=n,this.m=r}return f(e,[{key:"getToken",value:function(){return Promise.resolve(new p_(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t($k.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),m_=f((function e(t){c(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),y_=function(){function e(t){c(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return f(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&e_("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,e_("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){e_("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):e_("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(a_("string"==typeof t.token),e.T=t.token,new m_(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function g_(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var k_=function(){function e(){c(this,e)}return f(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=g_(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function __(e,t){return e<t?-1:e>t?1:0}function w_(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function b_(e){return e+"\0"}var x_=function(){function e(t,n){if(c(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new u_(s_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new u_(s_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new u_(s_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new u_(s_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return f(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?__(this.nanoseconds,e.nanoseconds):__(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),E_=function(){function e(t){c(this,e),this.timestamp=t}return f(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new x_(0,0))}},{key:"max",value:function(){return new e(new x_(253402300799,999999999))}}]),e}(),S_=function(){function e(t,n,r){c(this,e),void 0===n?n=0:n>t.length&&i_(),void 0===r?r=t.length-n:r>t.length-n&&i_(),this.segments=t,this.offset=n,this.len=r}return f(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),T_=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new u_(s_.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,u(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(S_),C_=/^[_a-zA-Z][_a-zA-Z0-9]*$/,I_=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return C_.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new u_(s_.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new u_(s_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new u_(s_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new u_(s_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(S_),N_=function(){function e(t){c(this,e),this.path=t}return f(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===T_.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(T_.fromString(t))}},{key:"fromName",value:function(t){return new e(T_.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(T_.emptyPath())}},{key:"comparator",value:function(e,t){return T_.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new T_(t.slice()))}}]),e}(),R_=f((function e(t,n,r,i){c(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function P_(e){return e.fields.find((function(e){return 2===e.kind}))}function D_(e){return e.fields.filter((function(e){return 2!==e.kind}))}R_.UNKNOWN_ID=-1;var O_=f((function e(t,n){c(this,e),this.fieldPath=t,this.kind=n}));var A_=function(){function e(t,n){c(this,e),this.sequenceNumber=t,this.offset=n}return f(e,null,[{key:"empty",value:function(){return new e(0,F_.min())}}]),e}();function M_(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=E_.fromTimestamp(1e9===r?new x_(n+1,0):new x_(n,r));return new F_(i,N_.empty(),t)}function L_(e){return new F_(e.readTime,e.key,-1)}var F_=function(){function e(t,n,r){c(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return f(e,null,[{key:"min",value:function(){return new e(E_.min(),N_.empty(),-1)}},{key:"max",value:function(){return new e(E_.max(),N_.empty(),-1)}}]),e}();function j_(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=N_.comparator(e.documentKey,t.documentKey))?n:__(e.largestBatchId,t.largestBatchId)}var U_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",V_=function(){function e(){c(this,e),this.onCommittedListeners=[]}return f(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function B_(e){return q_.apply(this,arguments)}function q_(){return(q_=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===s_.FAILED_PRECONDITION&&t.message===U_){e.next=2;break}throw t;case 2:e_("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z_=function(){function e(t){var n=this;c(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return f(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&i_(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=cn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(s){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),W_=function(){function e(t,n){var r=this;c(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new c_,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new K_(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=J_(e.target.error);r.v.reject(new K_(t,n))}}return f(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(e_("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Q_(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new K_(n,t)}}}]),e}(),H_=function(){function e(t,n,r){c(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(Va())&&t_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return f(e,[{key:"$",value:function(){var e=Oe(Pe().mark((function e(t){var n=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return e_("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new K_(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new u_(s_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new u_(s_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new K_(t,n))},i.onupgradeneeded=function(e){e_("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){e_("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Oe(Pe().mark((function e(t,n,r,i){var a,o,s,u,c,l=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Pe().mark((function e(){var n,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.$(t);case 2:return l.db=e.sent,n=W_.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),z_.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.R;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u=e.t1,c="FirebaseError"!==u.name&&o<3,e_("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(u));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return e_("SimpleDb","Removing database:",e),$_(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!Ka())return!1;if(e.C())return!0;var t=Va(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/react-firebase-chatting-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),G_=function(){function e(t){c(this,e),this.L=t,this.q=!1,this.U=null}return f(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return $_(this.L.delete())}}]),e}(),K_=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,s_.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return f(n)}(u_);function Y_(e){return"IndexedDbTransactionError"===e.name}var Q_=function(){function e(t){c(this,e),this.store=t}return f(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(e_("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(e_("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$_(n)}},{key:"add",value:function(e){return e_("SimpleDb","ADD",this.store.name,e,e),$_(this.store.add(e))}},{key:"get",value:function(e){var t=this;return $_(this.store.get(e)).next((function(n){return void 0===n&&(n=null),e_("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return e_("SimpleDb","DELETE",this.store.name,e),$_(this.store.delete(e))}},{key:"count",value:function(){return e_("SimpleDb","COUNT",this.store.name),$_(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new z_((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new z_((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){e_("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new z_((function(n,r){t.onerror=function(e){var t=J_(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new z_((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new G_(i),o=t(i.primaryKey,i.value,a);if(o instanceof z_){var s=o.catch((function(e){return a.done(),z_.reject(e)}));n.push(s)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return z_.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function $_(e){return new z_((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=J_(e.target.error);n(t)}}))}var X_=!1;function J_(e){var t=H_.S(Va());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new u_("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return X_||(X_=!0,setTimeout((function(){throw r}),0)),r}}return e}var Z_=function(){function e(t,n){c(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return f(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;e_("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=e_,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Y_(e.t4)){e.next=17;break}e_("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,B_(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),ew=function(){function e(t,n){c(this,e),this.localStore=t,this.persistence=n}return f(e,[{key:"nt",value:function(){var e=Oe(Pe().mark((function e(){var t,n=this,r=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return z_.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return e_("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return e_("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=L_(t);j_(r,n)>0&&(n=r)})),new F_(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),tw=function(){function e(t,n){var r=this;c(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return f(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function nw(e){return null==e}function rw(e){return 0===e&&1/e==-1/0}function iw(e){return"number"==typeof e&&Number.isInteger(e)&&!rw(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function aw(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=sw(t)),t=ow(e.get(n),t);return sw(t)}function ow(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function sw(e){return e+"\x01\x01"}function uw(e){var t=e.length;if(a_(t>=2),2===t)return a_("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),T_.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&i_(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:i_()}a=o+2}return new T_(r)}tw.ct=-1;var cw=["userId","batchId"];function lw(e,t){return[e,aw(t)]}function fw(e,t,n){return[e,aw(t),n]}var hw={},dw=["prefixPath","collectionGroup","readTime","documentId"],pw=["prefixPath","collectionGroup","documentId"],vw=["collectionGroup","readTime","prefixPath","documentId"],mw=["canonicalId","targetId"],yw=["targetId","path"],gw=["path","targetId"],kw=["collectionId","parent"],_w=["indexId","uid"],ww=["uid","sequenceNumber"],bw=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xw=["indexId","uid","orderedDocumentKey"],Ew=["userId","collectionPath","documentId"],Sw=["userId","collectionPath","largestBatchId"],Tw=["userId","collectionGroup","largestBatchId"],Cw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Iw=[].concat(u(Cw),["documentOverlays"]),Nw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rw=Nw,Pw=[].concat(Rw,["indexConfiguration","indexState","indexEntries"]),Dw=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return f(n)}(V_);function Ow(e,t){var n=o_(e);return H_.M(n.ht,t)}function Aw(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Mw(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Lw(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Fw=function(){function e(t,n){c(this,e),this.comparator=t,this.root=n||Uw.EMPTY}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Uw.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Uw.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new jw(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new jw(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new jw(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new jw(this.root,e,this.comparator,!0)}}]),e}(),jw=function(){function e(t,n,r,i){c(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return f(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Uw=function(){function e(t,n,r,i,a){c(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return f(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw i_();if(this.right.isRed())throw i_();var e=this.left.check();if(e!==this.right.check())throw i_();return e+(this.isRed()?0:1)}}]),e}();Uw.EMPTY=null,Uw.RED=!0,Uw.BLACK=!1,Uw.EMPTY=new(function(){function e(){c(this,e),this.size=0}return f(e,[{key:"key",get:function(){throw i_()}},{key:"value",get:function(){throw i_()}},{key:"color",get:function(){throw i_()}},{key:"left",get:function(){throw i_()}},{key:"right",get:function(){throw i_()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Uw(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Vw=function(){function e(t){c(this,e),this.comparator=t,this.data=new Fw(this.comparator)}return f(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Bw(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Bw(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Bw=function(){function e(t){c(this,e),this.iter=t}return f(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function qw(e){return e.hasNext()?e.getNext():void 0}var zw=function(){function e(t){c(this,e),this.fields=t,t.sort(I_.comparator)}return f(e,[{key:"unionWith",value:function(t){var n,r=new Vw(I_.comparator),i=cn(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=cn(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=cn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return w_(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Ww=function(e){d(n,e);var t=k(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return f(n)}(E(Error));var Hw=function(e){function t(e){c(this,t),this.binaryString=e}return f(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return __(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ww("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Hw.EMPTY_BYTE_STRING=new Hw("");var Gw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kw(e){if(a_(!!e),"string"==typeof e){var t=0,n=Gw.exec(e);if(a_(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Yw(e.seconds),nanos:Yw(e.nanos)}}function Yw(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Qw(e){return"string"==typeof e?Hw.fromBase64String(e):Hw.fromUint8Array(e)}function $w(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Xw(e){var t=e.mapValue.fields.__previous_value__;return $w(t)?Xw(t):t}function Jw(e){var t=Kw(e.mapValue.fields.__local_write_time__.timestampValue);return new x_(t.seconds,t.nanos)}var Zw=f((function e(t,n,r,i,a,o,s,u,l){c(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=l})),eb=function(){function e(t,n){c(this,e),this.projectId=t,this.database=n||"(default)"}return f(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),tb={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},nb={nullValue:"NULL_VALUE"};function rb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?$w(e)?4:yb(e)?9007199254740991:10:i_()}function ib(e,t){if(e===t)return!0;var n=rb(e);if(n!==rb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Jw(e).isEqual(Jw(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Kw(e.timestampValue),r=Kw(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Qw(e.bytesValue).isEqual(Qw(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yw(e.geoPointValue.latitude)===Yw(t.geoPointValue.latitude)&&Yw(e.geoPointValue.longitude)===Yw(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yw(e.integerValue)===Yw(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Yw(e.doubleValue),r=Yw(t.doubleValue);return n===r?rw(n)===rw(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return w_(e.arrayValue.values||[],t.arrayValue.values||[],ib);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Aw(n)!==Aw(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ib(n[i],r[i])))return!1;return!0}(e,t);default:return i_()}}function ab(e,t){return void 0!==(e.values||[]).find((function(e){return ib(e,t)}))}function ob(e,t){if(e===t)return 0;var n=rb(e),r=rb(t);if(n!==r)return __(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return __(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Yw(e.integerValue||e.doubleValue),r=Yw(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return sb(e.timestampValue,t.timestampValue);case 4:return sb(Jw(e),Jw(t));case 5:return __(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Qw(e),r=Qw(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=__(n[i],r[i]);if(0!==a)return a}return __(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=__(Yw(e.latitude),Yw(t.latitude));return 0!==n?n:__(Yw(e.longitude),Yw(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=ob(n[i],r[i]);if(a)return a}return __(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===tb.mapValue&&t===tb.mapValue)return 0;if(e===tb.mapValue)return 1;if(t===tb.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=__(r[o],a[o]);if(0!==s)return s;var u=ob(n[r[o]],i[a[o]]);if(0!==u)return u}return __(r.length,a.length)}(e.mapValue,t.mapValue);default:throw i_()}}function sb(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return __(e,t);var n=Kw(e),r=Kw(t),i=__(n.seconds,r.seconds);return 0!==i?i:__(n.nanos,r.nanos)}function ub(e){return cb(e)}function cb(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Kw(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Qw(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,N_.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=cn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=cb(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=cn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(cb(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):i_();var t,n}function lb(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function fb(e){return!!e&&"integerValue"in e}function hb(e){return!!e&&"arrayValue"in e}function db(e){return!!e&&"nullValue"in e}function pb(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function vb(e){return!!e&&"mapValue"in e}function mb(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Mw(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=mb(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=mb(e.arrayValue.values[r]);return n}return Object.assign({},e)}function yb(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function gb(e){return"nullValue"in e?nb:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?lb(eb.empty(),N_.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:i_()}function kb(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?lb(eb.empty(),N_.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?tb:i_()}function _b(e,t){var n=ob(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function wb(e,t){var n=ob(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var bb=function(){function e(t){c(this,e),this.value=t}return f(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!vb(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mb(t)}},{key:"setAll",value:function(e){var t=this,n=I_.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=mb(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());vb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return ib(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];vb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Mw(t,(function(t,n){return e[t]=n}));var r,i=cn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(mb(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function xb(e){var t=[];return Mw(e.fields,(function(e,n){var r=new I_([e]);if(vb(n)){var i=xb(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=cn(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new zw(t)}var Eb=function(){function e(t,n,r,i,a,o,s){c(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return f(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(E_.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=bb.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=bb.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=E_.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,E_.min(),E_.min(),E_.min(),bb.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,E_.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,E_.min(),E_.min(),bb.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,E_.min(),E_.min(),bb.empty(),2)}}]),e}(),Sb=f((function e(t,n){c(this,e),this.position=t,this.inclusive=n}));function Tb(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?N_.comparator(N_.fromName(o.referenceValue),n.key):ob(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Cb(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!ib(e.position[n],t.position[n]))return!1;return!0}var Ib=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";c(this,e),this.field=t,this.dir=n}));function Nb(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Rb=f((function e(){c(this,e)})),Pb=function(e){d(n,e);var t=k(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ob(t,this.value)):null!==t&&rb(this.value)===rb(t)&&this.matchesComparison(ob(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return i_()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Bb(e,t,r):"array-contains"===t?new Hb(e,r):"in"===t?new Gb(e,r):"not-in"===t?new Kb(e,r):"array-contains-any"===t?new Yb(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new qb(e,n):new zb(e,n)}}]),n}(Rb),Db=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return f(n,[{key:"matches",value:function(e){return Ob(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=cn(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Rb);function Ob(e){return"and"===e.op}function Ab(e){return"or"===e.op}function Mb(e){return Lb(e)&&Ob(e)}function Lb(e){var t,n=cn(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Db)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Fb(e){if(e instanceof Pb)return e.field.canonicalString()+e.op.toString()+ub(e.value);if(Mb(e))return e.filters.map((function(e){return Fb(e)})).join(",");var t=e.filters.map((function(e){return Fb(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function jb(e,t){return e instanceof Pb?function(e,t){return t instanceof Pb&&e.op===t.op&&e.field.isEqual(t.field)&&ib(e.value,t.value)}(e,t):e instanceof Db?function(e,t){return t instanceof Db&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&jb(n,t.filters[r])}),!0)}(e,t):void i_()}function Ub(e,t){var n=e.filters.concat(t);return Db.create(n,e.op)}function Vb(e){return e instanceof Pb?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ub(e.value))}(e):e instanceof Db?function(e){return e.op.toString()+" {"+e.getFilters().map(Vb).join(" ,")+"}"}(e):"Filter"}var Bb=function(e){d(n,e);var t=k(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,e,r,i)).key=N_.fromName(i.referenceValue),a}return f(n,[{key:"matches",value:function(e){var t=N_.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Pb),qb=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,"in",r)).keys=Wb("in",r),i}return f(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Pb),zb=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,"not-in",r)).keys=Wb("not-in",r),i}return f(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Pb);function Wb(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return N_.fromName(e.referenceValue)}))}var Hb=function(e){d(n,e);var t=k(n);function n(e,r){return c(this,n),t.call(this,e,"array-contains",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return hb(t)&&ab(t.arrayValue,this.value)}}]),n}(Pb),Gb=function(e){d(n,e);var t=k(n);function n(e,r){return c(this,n),t.call(this,e,"in",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ab(this.value.arrayValue,t)}}]),n}(Pb),Kb=function(e){d(n,e);var t=k(n);function n(e,r){return c(this,n),t.call(this,e,"not-in",r)}return f(n,[{key:"matches",value:function(e){if(ab(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ab(this.value.arrayValue,t)}}]),n}(Pb),Yb=function(e){d(n,e);var t=k(n);function n(e,r){return c(this,n),t.call(this,e,"array-contains-any",r)}return f(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!hb(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ab(t.value.arrayValue,e)}))}}]),n}(Pb),Qb=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;c(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.dt=null}));function $b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Qb(e,t,n,r,i,a,o)}function Xb(e){var t=o_(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Fb(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),nw(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ub(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ub(e)})).join(",")),t.dt=n}return t.dt}function Jb(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Nb(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!jb(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Cb(e.startAt,t.startAt)&&Cb(e.endAt,t.endAt)}function Zb(e){return N_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ex(e,t){return e.filters.filter((function(e){return e instanceof Pb&&e.field.isEqual(t)}))}function tx(e,t,n){var r,i=nb,a=!0,o=cn(ex(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=nb,c=!0;switch(s.op){case"<":case"<=":u=gb(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=nb}_b({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];_b({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function nx(e,t,n){var r,i=tb,a=!0,o=cn(ex(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=tb,c=!0;switch(s.op){case">=":case">":u=kb(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=tb}wb({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];wb({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var rx=f((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;c(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.wt=null,this._t=null,this.startAt,this.endAt}));function ix(e,t,n,r,i,a,o,s){return new rx(e,t,n,r,i,a,o,s)}function ax(e){return new rx(e)}function ox(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function sx(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ux(e){var t,n=cn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function cx(e){return null!==e.collectionGroup}function lx(e){var t=o_(e);if(null===t.wt){t.wt=[];var n=ux(t),r=sx(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new Ib(n)),t.wt.push(new Ib(I_.keyField(),"asc"));else{var i,a=!1,o=cn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.wt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Ib(I_.keyField(),u))}}}return t.wt}function fx(e){var t=o_(e);if(!t._t)if("F"===t.limitType)t._t=$b(t.path,t.collectionGroup,lx(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=cn(lx(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Ib(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Sb(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Sb(t.startAt.position,t.startAt.inclusive):null;t._t=$b(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function hx(e,t){t.getFirstInequalityField(),ux(e);var n=e.filters.concat([t]);return new rx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function dx(e,t,n){return new rx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function px(e,t){return Jb(fx(e),fx(t))&&e.limitType===t.limitType}function vx(e){return"".concat(Xb(fx(e)),"|lt:").concat(e.limitType)}function mx(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Vb(e)})).join(", "),"]")),nw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ub(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ub(e)})).join(",")),"Target(".concat(t,")")}(fx(e)),"; limitType=").concat(e.limitType,")")}function yx(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):N_.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=cn(lx(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=cn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Tb(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,lx(e),t))&&!(e.endAt&&!function(e,t,n){var r=Tb(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,lx(e),t))}(e,t)}function gx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function kx(e){return function(t,n){var r,i=!1,a=cn(lx(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=_x(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function _x(e,t,n){var r=e.field.isKeyField()?N_.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ob(r,i):i_()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return i_()}}var wx=function(){function e(t,n){c(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return f(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=cn(n);try{for(i.s();!(r=i.n()).done;){var a=b(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Mw(this.inner,(function(t,n){var r,i=cn(n);try{for(i.s();!(r=i.n()).done;){var a=b(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Lw(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),bx=new Fw(N_.comparator);function xx(){return bx}var Ex=new Fw(N_.comparator);function Sx(){for(var e=Ex,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Tx(e){var t=Ex;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Cx(){return Nx()}function Ix(){return Nx()}function Nx(){return new wx((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Rx=new Fw(N_.comparator),Px=new Vw(N_.comparator);function Dx(){for(var e=Px,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Ox=new Vw(__);function Ax(){return Ox}function Mx(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rw(t)?"-0":t}}function Lx(e){return{integerValue:""+e}}function Fx(e,t){return iw(t)?Lx(t):Mx(e,t)}var jx=f((function e(){c(this,e),this._=void 0}));function Ux(e,t,n){return e instanceof qx?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&$w(t)&&(t=Xw(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof zx?Wx(e,t):e instanceof Hx?Gx(e,t):function(e,t){var n=Bx(e,t),r=Yx(n)+Yx(e.gt);return fb(n)&&fb(e.gt)?Lx(r):Mx(e.serializer,r)}(e,t)}function Vx(e,t,n){return e instanceof zx?Wx(e,t):e instanceof Hx?Gx(e,t):n}function Bx(e,t){return e instanceof Kx?fb(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var qx=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n)}(jx),zx=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this)).elements=e,r}return f(n)}(jx);function Wx(e,t){var n,r=Qx(t),i=cn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return ib(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Hx=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this)).elements=e,r}return f(n)}(jx);function Gx(e,t){var n,r=Qx(t),i=cn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!ib(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Kx=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return f(n)}(jx);function Yx(e){return Yw(e.integerValue||e.doubleValue)}function Qx(e){return hb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var $x=f((function e(t,n){c(this,e),this.field=t,this.transform=n}));var Xx=f((function e(t,n){c(this,e),this.version=t,this.transformResults=n})),Jx=function(){function e(t,n){c(this,e),this.updateTime=t,this.exists=n}return f(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Zx(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var eE=f((function e(){c(this,e)}));function tE(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new dE(e.key,Jx.none()):new oE(e.key,e.data,Jx.none());var n,r=e.data,i=bb.empty(),a=new Vw(I_.comparator),o=cn(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new sE(e.key,i,new zw(a.toArray()),Jx.none())}function nE(e,t,n){e instanceof oE?function(e,t,n){var r=e.value.clone(),i=cE(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof sE?function(e,t,n){if(Zx(e.precondition,t)){var r=cE(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(uE(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function rE(e,t,n,r){return e instanceof oE?function(e,t,n,r){if(!Zx(e.precondition,t))return n;var i=e.value.clone(),a=lE(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof sE?function(e,t,n,r){if(!Zx(e.precondition,t))return n;var i=lE(e.fieldTransforms,r,t),a=t.data;return a.setAll(uE(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Zx(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function iE(e,t){var n,r=null,i=cn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Bx(a.transform,o||null);null!=s&&(null===r&&(r=bb.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function aE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&w_(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof zx&&t instanceof zx||e instanceof Hx&&t instanceof Hx?w_(e.elements,t.elements,ib):e instanceof Kx&&t instanceof Kx?ib(e.gt,t.gt):e instanceof qx&&t instanceof qx}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var oE=function(e){d(n,e);var t=k(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return c(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(eE),sE=function(e){d(n,e);var t=k(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return c(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return f(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(eE);function uE(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function cE(e,t,n){var r=new Map;a_(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,Vx(o,s,n[i]))}return r}function lE(e,t,n){var r,i=new Map,a=cn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Ux(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var fE,hE,dE=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(eE),pE=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return f(n,[{key:"getFieldMask",value:function(){return null}}]),n}(eE),vE=function(){function e(t,n,r,i){c(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return f(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&nE(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=cn(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=rE(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=cn(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=rE(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ix();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=tE(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(E_.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Dx())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&w_(this.mutations,e.mutations,(function(e,t){return aE(e,t)}))&&w_(this.baseMutations,e.baseMutations,(function(e,t){return aE(e,t)}))}}]),e}(),mE=function(){function e(t,n,r,i){c(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return f(e,null,[{key:"from",value:function(t,n,r){a_(t.mutations.length===r.length);for(var i=Rx,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),yE=function(){function e(t,n){c(this,e),this.largestBatchId=t,this.mutation=n}return f(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),gE=f((function e(t,n){c(this,e),this.count=t,this.unchangedNames=n}));function kE(e){switch(e){default:return i_();case s_.CANCELLED:case s_.UNKNOWN:case s_.DEADLINE_EXCEEDED:case s_.RESOURCE_EXHAUSTED:case s_.INTERNAL:case s_.UNAVAILABLE:case s_.UNAUTHENTICATED:return!1;case s_.INVALID_ARGUMENT:case s_.NOT_FOUND:case s_.ALREADY_EXISTS:case s_.PERMISSION_DENIED:case s_.FAILED_PRECONDITION:case s_.ABORTED:case s_.OUT_OF_RANGE:case s_.UNIMPLEMENTED:case s_.DATA_LOSS:return!0}}function _E(e){if(void 0===e)return t_("GRPC error has no .code"),s_.UNKNOWN;switch(e){case fE.OK:return s_.OK;case fE.CANCELLED:return s_.CANCELLED;case fE.UNKNOWN:return s_.UNKNOWN;case fE.DEADLINE_EXCEEDED:return s_.DEADLINE_EXCEEDED;case fE.RESOURCE_EXHAUSTED:return s_.RESOURCE_EXHAUSTED;case fE.INTERNAL:return s_.INTERNAL;case fE.UNAVAILABLE:return s_.UNAVAILABLE;case fE.UNAUTHENTICATED:return s_.UNAUTHENTICATED;case fE.INVALID_ARGUMENT:return s_.INVALID_ARGUMENT;case fE.NOT_FOUND:return s_.NOT_FOUND;case fE.ALREADY_EXISTS:return s_.ALREADY_EXISTS;case fE.PERMISSION_DENIED:return s_.PERMISSION_DENIED;case fE.FAILED_PRECONDITION:return s_.FAILED_PRECONDITION;case fE.ABORTED:return s_.ABORTED;case fE.OUT_OF_RANGE:return s_.OUT_OF_RANGE;case fE.UNIMPLEMENTED:return s_.UNIMPLEMENTED;case fE.DATA_LOSS:return s_.DATA_LOSS;default:return i_()}}(hE=fE||(fE={}))[hE.OK=0]="OK",hE[hE.CANCELLED=1]="CANCELLED",hE[hE.UNKNOWN=2]="UNKNOWN",hE[hE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hE[hE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hE[hE.NOT_FOUND=5]="NOT_FOUND",hE[hE.ALREADY_EXISTS=6]="ALREADY_EXISTS",hE[hE.PERMISSION_DENIED=7]="PERMISSION_DENIED",hE[hE.UNAUTHENTICATED=16]="UNAUTHENTICATED",hE[hE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hE[hE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hE[hE.ABORTED=10]="ABORTED",hE[hE.OUT_OF_RANGE=11]="OUT_OF_RANGE",hE[hE.UNIMPLEMENTED=12]="UNIMPLEMENTED",hE[hE.INTERNAL=13]="INTERNAL",hE[hE.UNAVAILABLE=14]="UNAVAILABLE",hE[hE.DATA_LOSS=15]="DATA_LOSS";var wE=function(){function e(){c(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return f(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return bE}},{key:"getOrCreateInstance",value:function(){return null===bE&&(bE=new e),bE}}]),e}(),bE=null;function xE(){return new TextEncoder}var EE=new Yk([4294967295,4294967295],0);function SE(e){var t=xE().encode(e),n=new Kk;return n.update(t),new Uint8Array(n.digest())}function TE(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Yk([n,r],0),new Yk([i,a],0)]}var CE=function(){function e(t,n,r){if(c(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new IE("Invalid padding: ".concat(n));if(r<0)throw new IE("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new IE("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new IE("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=Yk.fromNumber(this.It)}return f(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(Yk.fromNumber(n)));return 1===r.compare(EE)&&(r=new Yk([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=b(TE(SE(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=b(TE(SE(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Et(n,r,i);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),IE=function(e){d(n,e);var t=k(n);function n(){var e;return c(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return f(n)}(E(Error)),NE=function(){function e(t,n,r,i,a){c(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return f(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,RE.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(E_.min(),i,new Fw(__),xx(),Dx())}}]),e}(),RE=function(){function e(t,n,r,i,a){c(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return f(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Dx(),Dx(),Dx())}}]),e}(),PE=f((function e(t,n,r,i){c(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),DE=f((function e(t,n){c(this,e),this.targetId=t,this.Vt=n})),OE=f((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hw.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;c(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),AE=function(){function e(){c(this,e),this.St=0,this.Dt=FE(),this.Ct=Hw.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return f(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=Dx(),t=Dx(),n=Dx();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:i_()}})),new RE(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=FE()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),ME=function(){function e(t){c(this,e),this.Gt=t,this.Qt=new Map,this.jt=xx(),this.zt=LE(),this.Wt=new Fw(__)}return f(e,[{key:"Ht",value:function(e){var t,n=cn(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(s){n.e(s)}finally{n.f()}var i,a=cn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:i_()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(Zb(a))if(0===r){var o=new N_(a.path);this.Yt(n,o,Eb.newNoDocument(o,E_.min()))}else a_(1===r);else{var s=this.ie(n);if(s!==r){var u=this.re(e,s);if(0!==u){this.ee(n);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=wE.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,s,u,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(u=null===(s=null==l?void 0:l.bits)||void 0===s?void 0:s.padding)&&void 0!==u?u:0}),c}(u,s,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,s=r.bits,u=s.bitmap,c=void 0===u?"":u,l=s.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=Qw(c).toUint8Array()}catch(e){if(e instanceof Ww)return n_("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new CE(a,f,d)}catch(e){return n_(e instanceof IE?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&Zb(a.target)){var o=new N_(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,Eb.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=Dx();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new NE(e,n,this.Wt,this.jt,r);return this.jt=xx(),this.zt=LE(),this.Wt=new Fw(__),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new AE,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new Vw(__),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||e_("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new AE),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function LE(){return new Fw(N_.comparator)}function FE(){return new Fw(N_.comparator)}var jE={asc:"ASCENDING",desc:"DESCENDING"},UE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VE={and:"AND",or:"OR"},BE=f((function e(t,n){c(this,e),this.databaseId=t,this.useProto3Json=n}));function qE(e,t){return e.useProto3Json||nw(t)?t:{value:t}}function zE(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function WE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function HE(e,t){return zE(e,t.toTimestamp())}function GE(e){return a_(!!e),E_.fromTimestamp(function(e){var t=Kw(e);return new x_(t.seconds,t.nanos)}(e))}function KE(e,t){return function(e){return new T_(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function YE(e){var t=T_.fromString(e);return a_(yS(t)),t}function QE(e,t){return KE(e.databaseId,t.path)}function $E(e,t){var n=YE(t);if(n.get(1)!==e.databaseId.projectId)throw new u_(s_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new u_(s_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new N_(eS(n))}function XE(e,t){return KE(e.databaseId,t)}function JE(e){var t=YE(e);return 4===t.length?T_.emptyPath():eS(t)}function ZE(e){return new T_(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function eS(e){return a_(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function tS(e,t,n){return{name:QE(e,t),fields:n.value.mapValue.fields}}function nS(e,t,n){var r=$E(e,t.name),i=GE(t.updateTime),a=t.createTime?GE(t.createTime):E_.min(),o=new bb({mapValue:{fields:t.fields}}),s=Eb.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function rS(e,t){return"found"in t?function(e,t){a_(!!t.found),t.found.name,t.found.updateTime;var n=$E(e,t.found.name),r=GE(t.found.updateTime),i=t.found.createTime?GE(t.found.createTime):E_.min(),a=new bb({mapValue:{fields:t.found.fields}});return Eb.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){a_(!!t.missing),a_(!!t.readTime);var n=$E(e,t.missing),r=GE(t.readTime);return Eb.newNoDocument(n,r)}(e,t):i_()}function iS(e,t){var n;if(t instanceof oE)n={update:tS(e,t.key,t.value)};else if(t instanceof dE)n={delete:QE(e,t.key)};else if(t instanceof sE)n={update:tS(e,t.key,t.data),updateMask:mS(t.fieldMask)};else{if(!(t instanceof pE))return i_();n={verify:QE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof qx)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof zx)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Hx)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Kx)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw i_()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:HE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:i_()}(e,t.precondition)),n}function aS(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Jx.updateTime(GE(e.updateTime)):void 0!==e.exists?Jx.exists(e.exists):Jx.none()}(t.currentDocument):Jx.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)a_("REQUEST_TIME"===t.setToServerValue),n=new qx;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new zx(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Hx(i)}else"increment"in t?n=new Kx(e,t.increment):i_();var a=I_.fromServerFormat(t.fieldPath);return new $x(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=$E(e,t.update.name),a=new bb({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new zw(t.map((function(e){return I_.fromServerFormat(e)})))}(t.updateMask);return new sE(i,a,o,n,r)}return new oE(i,a,n,r)}if(t.delete){var s=$E(e,t.delete);return new dE(s,n)}if(t.verify){var u=$E(e,t.verify);return new pE(u,n)}return i_()}function oS(e,t){return{documents:[XE(e,t.path)]}}function sS(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=XE(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=XE(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return vS(Db.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:dS(e.field),direction:lS(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=qE(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function uS(e){var t=JE(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){a_(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=cS(e);return t instanceof Db&&Mb(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Ib(pS(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return nw(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Sb(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Sb(n,t)}(n.endAt)),ix(t,i,s,o,u,"F",c,l)}function cS(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=pS(e.unaryFilter.field);return Pb.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=pS(e.unaryFilter.field);return Pb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=pS(e.unaryFilter.field);return Pb.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=pS(e.unaryFilter.field);return Pb.create(i,"!=",{nullValue:"NULL_VALUE"});default:return i_()}}(e):void 0!==e.fieldFilter?function(e){return Pb.create(pS(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return i_()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Db.create(e.compositeFilter.filters.map((function(e){return cS(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return i_()}}(e.compositeFilter.op))}(e):i_()}function lS(e){return jE[e]}function fS(e){return UE[e]}function hS(e){return VE[e]}function dS(e){return{fieldPath:e.canonicalString()}}function pS(e){return I_.fromServerFormat(e.fieldPath)}function vS(e){return e instanceof Pb?function(e){if("=="===e.op){if(pb(e.value))return{unaryFilter:{field:dS(e.field),op:"IS_NAN"}};if(db(e.value))return{unaryFilter:{field:dS(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(pb(e.value))return{unaryFilter:{field:dS(e.field),op:"IS_NOT_NAN"}};if(db(e.value))return{unaryFilter:{field:dS(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dS(e.field),op:fS(e.op),value:e.value}}}(e):e instanceof Db?function(e){var t=e.getFilters().map((function(e){return vS(e)}));return 1===t.length?t[0]:{compositeFilter:{op:hS(e.op),filters:t}}}(e):i_()}function mS(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function yS(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var gS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:E_.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:E_.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Hw.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;c(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return f(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),kS=f((function e(t){c(this,e),this.fe=t}));function _S(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:wS(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:QE(e,t.key),fields:t.data.value.mapValue.fields,updateTime:zE(e,t.version.toTimestamp()),createTime:zE(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bS(t.version)};else{if(!t.isUnknownDocument())return i_();r.unknownDocument={path:n.path.toArray(),version:bS(t.version)}}return r}function wS(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function bS(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function xS(e){var t=new x_(e.seconds,e.nanoseconds);return E_.fromTimestamp(t)}function ES(e,t){for(var n=(t.baseMutations||[]).map((function(t){return aS(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return aS(e.fe,t)})),s=x_.fromMillis(t.localWriteTimeMs);return new vE(t.batchId,s,n,o)}function SS(e){var t,n,r=xS(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?xS(e.lastLimboFreeSnapshotVersion):E_.min();return void 0!==e.query.documents?(a_(1===(n=e.query).documents.length),t=fx(ax(JE(n.documents[0])))):t=function(e){return fx(uS(e))}(e.query),new gS(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,Hw.fromBase64String(e.resumeToken))}function TS(e,t){var n,r=bS(t.snapshotVersion),i=bS(t.lastLimboFreeSnapshotVersion);n=Zb(t.target)?oS(e.fe,t.target):sS(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Xb(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function CS(e){var t=uS({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?dx(t,t.limit,"L"):t}function IS(e,t){return new yE(t.largestBatchId,aS(e.fe,t.overlayMutation))}function NS(e,t){var n=t.path.lastSegment();return[e,aw(t.path.popLast()),n]}function RS(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:bS(r.readTime),documentKey:aw(r.documentKey.path),largestBatchId:r.largestBatchId}}var PS=function(){function e(){c(this,e)}return f(e,[{key:"getBundleMetadata",value:function(e,t){return DS(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:xS(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return DS(e).put({bundleId:(n=t).id,createTime:bS(GE(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return OS(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:CS(t.bundledQuery),readTime:xS(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return OS(e).put(function(e){return{name:e.name,readTime:bS(GE(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function DS(e){return Ow(e,"bundles")}function OS(e){return Ow(e,"namedQueries")}var AS=function(){function e(t,n){c(this,e),this.serializer=t,this.userId=n}return f(e,[{key:"getOverlay",value:function(e,t){var n=this;return MS(e).get(NS(this.userId,t)).next((function(e){return e?IS(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Cx();return z_.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new yE(t,a);i.push(r.we(e,o))})),z_.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(aw(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(MS(e).J("collectionPathOverlayIndex",i))})),z_.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Cx(),a=aw(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return MS(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=cn(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=IS(r.serializer,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Cx(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return MS(e).X({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=IS(a.serializer,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return MS(e).put(function(e,t,n){var r=b(NS(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:iS(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function MS(e){return Ow(e,"documentOverlays")}var LS=function(){function e(){c(this,e)}return f(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Yw(e.integerValue));else if("doubleValue"in e){var n=Yw(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),rw(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Qw(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?yb(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):i_()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=cn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),N_.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function FS(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function jS(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=FS(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}LS.Ve=new LS;var US=function(){function e(){c(this,e),this.buffer=new Uint8Array(1024),this.position=0}return f(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=cn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=cn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=jS(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=jS(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),VS=function(){function e(t){c(this,e),this.je=t}return f(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),BS=function(){function e(t){c(this,e),this.je=t}return f(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),qS=function(){function e(){c(this,e),this.je=new US,this.ze=new VS(this.je),this.We=new BS(this.je)}return f(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),zS=function(){function e(t,n,r,i){c(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return f(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function WS(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=HS(e.arrayValue,t.arrayValue))?n:0!==(n=HS(e.directionalValue,t.directionalValue))?n:N_.comparator(e.documentKey,t.documentKey)}function HS(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var GS=function(){function e(t){c(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=cn(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return f(e,[{key:"tn",value:function(e){a_(e.collectionGroup===this.collectionId);var t=P_(e);if(void 0!==t&&!this.en(t))return!1;for(var n=D_(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var s=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],s))return!1}return!0}},{key:"en",value:function(e){var t,n=cn(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function KS(e){var t,n;if(a_(e instanceof Pb||e instanceof Db),e instanceof Pb){if(e instanceof Gb){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Pb.create(e.field,"==",t)})))||[];return Db.create(r,"or")}return e}var i=e.filters.map((function(e){return KS(e)}));return Db.create(i,e.op)}function YS(e){if(0===e.getFilters().length)return[];var t=JS(KS(e));return a_(XS(t)),QS(t)||$S(t)?[t]:t.getFilters()}function QS(e){return e instanceof Pb}function $S(e){return e instanceof Db&&Mb(e)}function XS(e){return QS(e)||$S(e)||function(e){if(e instanceof Db&&Ab(e)){var t,n=cn(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!QS(r)&&!$S(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function JS(e){if(a_(e instanceof Pb||e instanceof Db),e instanceof Pb)return e;if(1===e.filters.length)return JS(e.filters[0]);var t=e.filters.map((function(e){return JS(e)})),n=Db.create(t,e.op);return XS(n=tT(n))?n:(a_(n instanceof Db),a_(Ob(n)),a_(n.filters.length>1),n.filters.reduce((function(e,t){return ZS(e,t)})))}function ZS(e,t){var n;return a_(e instanceof Pb||e instanceof Db),a_(t instanceof Pb||t instanceof Db),n=e instanceof Pb?t instanceof Pb?function(e,t){return Db.create([e,t],"and")}(e,t):eT(e,t):t instanceof Pb?eT(t,e):function(e,t){if(a_(e.filters.length>0&&t.filters.length>0),Ob(e)&&Ob(t))return Ub(e,t.getFilters());var n=Ab(e)?e:t,r=Ab(e)?t:e,i=n.filters.map((function(e){return ZS(e,r)}));return Db.create(i,"or")}(e,t),tT(n)}function eT(e,t){if(Ob(t))return Ub(t,e.getFilters());var n=t.filters.map((function(t){return ZS(e,t)}));return Db.create(n,"or")}function tT(e){if(a_(e instanceof Pb||e instanceof Db),e instanceof Pb)return e;var t=e.getFilters();if(1===t.length)return tT(t[0]);if(Lb(e))return e;var n=t.map((function(e){return tT(e)})),r=[];return n.forEach((function(t){t instanceof Pb?r.push(t):t instanceof Db&&(t.op===e.op?r.push.apply(r,u(t.filters)):r.push(t))})),1===r.length?r[0]:Db.create(r,e.op)}var nT=function(){function e(){c(this,e),this.rn=new rT}return f(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),z_.resolve()}},{key:"getCollectionParents",value:function(e,t){return z_.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return z_.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return z_.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return z_.resolve(null)}},{key:"getIndexType",value:function(e,t){return z_.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return z_.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return z_.resolve(null)}},{key:"getMinOffset",value:function(e,t){return z_.resolve(F_.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return z_.resolve(F_.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return z_.resolve()}},{key:"updateIndexEntries",value:function(e,t){return z_.resolve()}}]),e}(),rT=function(){function e(){c(this,e),this.index={}}return f(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Vw(T_.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Vw(T_.comparator)).toArray()}}]),e}(),iT=new Uint8Array(0),aT=function(){function e(t,n){c(this,e),this.user=t,this.databaseId=n,this.on=new rT,this.un=new wx((function(e){return Xb(e)}),(function(e,t){return Jb(e,t)})),this.uid=t.uid||""}return f(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:aw(i)};return oT(e).put(a)}return z_.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[b_(t),""],!1,!0);return oT(e).j(r).next((function(e){var r,i=cn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(uw(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=uT(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=cT(e);return a.next((function(e){o.put(RS(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=uT(e),r=cT(e),i=sT(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=sT(e),i=!0,a=new Map;return z_.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Dx(),o=[];return z_.forEach(a,(function(i,a){var s;e_("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Xb(t)));var u=function(e,t){var n=P_(t);if(void 0===n)return null;var r,i=cn(ex(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=cn(D_(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=cn(ex(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=cn(D_(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?tx(e,o.fieldPath,e.startAt):nx(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Sb(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=cn(D_(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?nx(e,o.fieldPath,e.endAt):tx(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Sb(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),p=n.ln(i,a,c),v=n.fn(i.indexId,u,h,l.inclusive,d,f.inclusive,p);return z_.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=N_.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return z_.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:YS(Db.create(e.filters,"and")).map((function(t){return $b(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var s=this,c=(null!=t?t.length:1)*Math.max(n.length,i.length),l=c/(null!=t?t.length:1),f=[],h=function(c){var h=t?s.dn(t[c/l]):iT,d=s.wn(e,h,n[c%l],r),p=s._n(e,h,i[c%l],a),v=o.map((function(t){return s.wn(e,h,t,!0)}));f.push.apply(f,u(s.createRange(d,p,v)))},d=0;d<c;++d)h(d);return f}},{key:"wn",value:function(e,t,n,r){var i=new zS(e,N_.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new zS(e,N_.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new GS(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=cn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return z_.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Vw(I_.comparator),r=!1,i=cn(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=cn(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var u,c=cn(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new qS,i=cn(D_(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.He(a.kind);LS.Ve._e(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new qS;return LS.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new qS;return LS.Ve._e(lb(this.databaseId,t),n.He(function(e){var t=D_(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new qS);var i,a=0,o=cn(D_(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=cn(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.yn(t,u.fieldPath)&&hb(c))r=this.pn(r,u,c);else{var h=f.He(u.kind);LS.Ve._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=u(e),a=[],o=cn(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,c=r.value,l=cn(i);try{for(l.s();!(s=l.n()).done;){var f=s.value,h=new qS;h.seed(f.Qe()),LS.Ve._e(c,h.He(t.kind)),a.push(h)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Pb&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=uT(e),i=cT(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return z_.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new A_(t.sequenceNumber,new F_(xS(t.readTime),new N_(uw(t.documentKey)),t.largestBatchId)):A_.empty(),r=e.fields.map((function(e){var t=b(e,2),n=t[0],r=t[1];return new O_(I_.fromServerFormat(n),r)}));return new R_(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:__(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=uT(e),a=cT(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return z_.forEach(t,(function(t){return a.put(RS(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return z_.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?z_.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),z_.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?z_.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return sT(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return sT(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=sT(e),i=new Vw(WS);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new zS(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new Vw(WS),r=this.mn(t,e);if(null==r)return n;var i=P_(t);if(null!=i){var a=e.data.field(i.fieldPath);if(hb(a)){var o,s=cn(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new zS(t.indexId,e.key,this.dn(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new zS(t.indexId,e.key,iT,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;e_("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=qw(a),u=qw(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=qw(o)):l?(i(s),s=qw(a)):(s=qw(a),u=qw(o))}}(r,i,WS,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),z_.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return cT(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return WS(e,t)})).filter((function(e,t,n){return!t||0!==WS(e,n[t-1])}));var r=[];r.push(e);var i,a=cn(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=WS(o,e),u=WS(o,t);if(0===s)r[0]=e.Je();else if(s>0&&u<0)r.push(o),r.push(o.Je());else if(u>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,iT,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,iT,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return WS(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(lT)}},{key:"getMinOffset",value:function(e,t){var n=this;return z_.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||i_()}))})).next(lT)}}]),e}();function oT(e){return Ow(e,"collectionParents")}function sT(e){return Ow(e,"indexEntries")}function uT(e){return Ow(e,"indexConfiguration")}function cT(e){return Ow(e,"indexState")}function lT(e){a_(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;j_(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new F_(t.readTime,t.documentKey,n)}var fT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hT=function(){function e(t,n,r){c(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return f(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function dT(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.X({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){a_(1===s)})));var c,l=[],f=cn(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=fw(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return z_.waitFor(a).next((function(){return l}))}function pT(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw i_();t=e.noDocument}return JSON.stringify(t).length}hT.DEFAULT_COLLECTION_PERCENTILE=10,hT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hT.DEFAULT=new hT(41943040,hT.DEFAULT_COLLECTION_PERCENTILE,hT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hT.DISABLED=new hT(-1,0,0);var vT=function(){function e(t,n,r,i){c(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return f(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yT(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=gT(e),o=yT(e);return o.add({}).next((function(s){a_("number"==typeof s);var u,c=new vE(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return iS(e.fe,t)})),i=n.mutations.map((function(t){return iS(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Vw((function(e,t){return __(e.canonicalString(),t.canonicalString())})),d=cn(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=fw(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,hw))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[s]=c.keys()})),z_.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return yT(e).get(t).next((function(e){return e?(a_(e.userId===n.userId),ES(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?z_.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return yT(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(a_(t.batchId>=r),a=ES(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return yT(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yT(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return ES(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=lw(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return gT(e).X({range:i},(function(r,i,o){var s=b(r,3),u=s[0],c=s[1],l=s[2],f=uw(c);if(u===n.userId&&t.path.isEqual(f))return yT(e).get(l).next((function(e){if(!e)throw i_();a_(e.userId===n.userId),a.push(ES(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Vw(__),i=[];return t.forEach((function(t){var a=lw(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=gT(e).X({range:o},(function(e,i,a){var o=b(e,3),s=o[0],u=o[1],c=o[2],l=uw(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),z_.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=lw(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new Vw(__);return gT(e).X({range:o},(function(e,t,a){var o=b(e,3),u=o[0],c=o[1],l=o[2],f=uw(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.Dn(e,s)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(yT(e).get(t).next((function(e){if(null===e)throw i_();a_(e.userId===n.userId),r.push(ES(n.serializer,e))})))})),z_.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return dT(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),z_.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return z_.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return gT(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=uw(e[1]);i.push(a)}else r.done()})).next((function(){a_(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return mT(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return kT(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return a_(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function mT(e,t,n){var r=lw(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return gT(e).X({range:a,Y:!0},(function(e,n,r){var a=b(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function yT(e){return Ow(e,"mutations")}function gT(e){return Ow(e,"documentMutations")}function kT(e){return Ow(e,"mutationQueues")}var _T=function(){function e(t){c(this,e),this.Nn=t}return f(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),wT=function(){function e(t,n){c(this,e),this.referenceDelegate=t,this.serializer=n}return f(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new _T(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return E_.fromTimestamp(new x_(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return bT(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return a_(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return bT(e).X((function(o,s){var u=SS(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return z_.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return bT(e).X((function(e,n){var r=SS(n);t(r)}))}},{key:"$n",value:function(e){return xT(e).get("targetGlobalKey").next((function(e){return a_(null!==e),e}))}},{key:"On",value:function(e,t){return xT(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return bT(e).put(TS(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Xb(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bT(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=SS(n);Jb(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=ET(e);return t.forEach((function(t){var o=aw(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),z_.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=ET(e);return z_.forEach(t,(function(t){var a=aw(t.path);return z_.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=ET(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ET(e),i=Dx();return r.X({range:n,Y:!0},(function(e,t,n){var r=uw(e[1]),a=new N_(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=aw(t.path),r=IDBKeyRange.bound([n],[b_(n)],!1,!0),i=0;return ET(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=b(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return bT(e).get(t).next((function(e){return e?SS(e):null}))}}]),e}();function bT(e){return Ow(e,"targets")}function xT(e){return Ow(e,"targetGlobal")}function ET(e){return Ow(e,"targetDocuments")}function ST(e,t){var n=b(e,2),r=n[0],i=n[1],a=b(t,2),o=a[0],s=a[1],u=__(r,o);return 0===u?__(i,s):u}var TT=function(){function e(t){c(this,e),this.Ln=t,this.buffer=new Vw(ST),this.qn=0}return f(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ST(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),CT=function(){function e(t,n,r){c(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return f(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;e_("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Y_(e.t0)){e.next=12;break}e_("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,B_(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),IT=function(){function e(t,n){c(this,e),this.jn=t,this.params=n}return f(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return z_.resolve(tw.ct);var r=new TT(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(e_("LruGarbageCollector","Garbage collection skipped; disabled"),z_.resolve(fT)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(e_("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),fT):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(e_("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Zk()<=So.DEBUG&&e_("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),z_.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function NT(e,t){return new IT(e,t)}var RT=function(){function e(t,n){c(this,e),this.db=t,this.garbageCollector=NT(this,n)}return f(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return PT(e,n)}},{key:"removeReference",value:function(e,t,n){return PT(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return PT(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return kT(e).Z((function(r){return mT(e,r,t).next((function(e){return e&&(n=!0),z_.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,s){if(s<=t){var u=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,E_.min()),ET(e).delete([0,aw(o.path)])}))}));i.push(u)}})).next((function(){return z_.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return PT(e,t)}},{key:"Yn",value:function(e,t){var n,r=ET(e),i=tw.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=b(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==tw.ct&&t(new N_(uw(n)),i),i=u,n=s):i=tw.ct})).next((function(){i!==tw.ct&&t(new N_(uw(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function PT(e,t){return ET(e).put(function(e,t){return{targetId:0,path:aw(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var DT=function(){function e(){c(this,e),this.changes=new wx((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return f(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Eb.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?z_.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),OT=function(){function e(t){c(this,e),this.serializer=t}return f(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return FT(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return FT(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],wS(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Eb.newInvalidDocument(t);return FT(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(jT(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:Eb.newInvalidDocument(t)};return FT(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(jT(t))},(function(e,i){r={document:n.ts(t,i),size:pT(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=xx();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=xx(),i=new Fw(N_.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,pT(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return z_.resolve();var r=new Vw(VT);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(jT(r.first()),jT(r.last())),a=r.getIterator(),o=a.getNext();return FT(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=N_.fromSegments([].concat(u(t.prefixPath),[t.collectionGroup,t.documentId]));o&&VT(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(jT(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),wS(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return FT(e).j(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=xx(),o=cn(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.ts(N_.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(yx(t,u)||r.has(u.key))&&(a=a.insert(u.key,u))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=xx(),o=UT(t,n),s=UT(t,F_.max());return FT(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.ts(N_.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new MT(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return LT(e).get("remoteDocumentGlobalKey").next((function(e){return a_(!!e),e}))}},{key:"Zn",value:function(e,t){return LT(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=nS(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=N_.fromSegments(t.noDocument.path),i=xS(t.noDocument.readTime);n=Eb.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return i_();var a=N_.fromSegments(t.unknownDocument.path),o=xS(t.unknownDocument.version);n=Eb.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new x_(e[0],e[1]);return E_.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(E_.min()))return n}return Eb.newInvalidDocument(e)}}]),e}();function AT(e){return new OT(e)}var MT=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new wx((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return f(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Vw((function(e,t){return __(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.us.get(a);if(n.push(t.os.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=_S(t.os.serializer,o);i=i.add(a.path.popLast());var c=pT(u);r+=c-s.size,n.push(t.os.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=_S(t.os.serializer,o.convertToNoDocument(E_.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),z_.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(DT);function LT(e){return Ow(e,"remoteDocumentGlobal")}function FT(e){return Ow(e,"remoteDocumentsV14")}function jT(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function UT(e,t){var n=t.documentKey.path.toArray();return[e,wS(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function VT(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=__(n[a],r[a]))return i;return(i=__(n.length,r.length))||((i=__(n[n.length-2],r[r.length-2]))||__(n[n.length-1],r[r.length-1]))}var BT=f((function e(t,n){c(this,e),this.overlayedDocument=t,this.mutatedFields=n})),qT=function(){function e(t,n,r,i){c(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return f(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&rE(r.mutation,e,zw.empty(),x_.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Dx()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dx(),i=Cx();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Sx();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Cx();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Dx())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=xx(),a=Nx(),o=Nx();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof sE)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),rE(o.mutation,t,o.mutation.getFieldMask(),x_.now())):a.set(t.key,zw.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new BT(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Nx(),i=new Fw((function(e,t){return e-t})),a=Dx();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=cn(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||zw.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||Dx()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=Ix();c.forEach((function(e){if(!a.has(e)){var n=tE(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return z_.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return N_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):z_.resolve(Cx()),s=-1,u=a;return o.next((function(t){return z_.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?z_.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,Dx())})).next((function(e){return{batchId:s,changes:Tx(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new N_(t)).next((function(e){var t=Sx();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Sx();return this.indexManager.getCollectionParents(e,i).next((function(o){return z_.forEach(o,(function(o){var s=function(e,t){return new rx(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Eb.newInvalidDocument(r)))}));var n=Sx();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&rE(a.mutation,i,zw.empty(),x_.now()),yx(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),zT=function(){function e(t){c(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return f(e,[{key:"getBundleMetadata",value:function(e,t){return z_.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:GE(n.createTime)}),z_.resolve()}},{key:"getNamedQuery",value:function(e,t){return z_.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:CS(e.bundledQuery),readTime:GE(e.readTime)}}(t)),z_.resolve()}}]),e}(),WT=function(){function e(){c(this,e),this.overlays=new Fw(N_.comparator),this.ls=new Map}return f(e,[{key:"getOverlay",value:function(e,t){return z_.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Cx();return z_.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),z_.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),z_.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Cx(),i=t.length+1,a=new N_(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return z_.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Fw((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Cx(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Cx(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return z_.resolve(u)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new yE(t,n));var a=this.ls.get(t);void 0===a&&(a=Dx(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),HT=function(){function e(){c(this,e),this.fs=new Vw(GT.ds),this.ws=new Vw(GT._s)}return f(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new GT(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new GT(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new N_(new T_([])),r=new GT(n,e),i=new GT(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new N_(new T_([])),n=new GT(t,e),r=new GT(t,e+1),i=Dx();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new GT(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),GT=function(){function e(t,n){c(this,e),this.key=t,this.As=n}return f(e,null,[{key:"ds",value:function(e,t){return N_.comparator(e.key,t.key)||__(e.As,t.As)}},{key:"_s",value:function(e,t){return __(e.As,t.As)||N_.comparator(e.key,t.key)}}]),e}(),KT=function(){function e(t,n){c(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Vw(GT.ds)}return f(e,[{key:"checkEmpty",value:function(e){return z_.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new vE(i,t,n,r);this.mutationQueue.push(a);var o,s=cn(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Rs=this.Rs.add(new GT(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return z_.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return z_.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return z_.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return z_.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return z_.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new GT(t,0),i=new GT(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),z_.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Vw(__);return t.forEach((function(e){var t=new GT(e,0),i=new GT(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),z_.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;N_.isDocumentKey(i)||(i=i.child(""));var a=new GT(new N_(i),0),o=new Vw(__);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),z_.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;a_(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return z_.forEach(t.mutations,(function(i){var a=new GT(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new GT(t,0),r=this.Rs.firstAfterOrEqual(n);return z_.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,z_.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),YT=function(){function e(t){c(this,e),this.Ds=t,this.docs=new Fw(N_.comparator),this.size=0}return f(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return z_.resolve(n?n.document.mutableCopy():Eb.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=xx();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Eb.newInvalidDocument(e))})),z_.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=xx(),a=t.path,o=new N_(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||j_(L_(l),n)<=0||(r.has(l.key)||yx(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return z_.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){i_()}},{key:"Cs",value:function(e,t){return z_.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new QT(this)}},{key:"getSize",value:function(e){return z_.resolve(this.size)}}]),e}(),QT=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this)).os=e,r}return f(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),z_.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(DT),$T=function(){function e(t){c(this,e),this.persistence=t,this.xs=new wx((function(e){return Xb(e)}),Jb),this.lastRemoteSnapshotVersion=E_.min(),this.highestTargetId=0,this.Ns=0,this.ks=new HT,this.targetCount=0,this.Ms=_T.kn()}return f(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),z_.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return z_.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return z_.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),z_.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),z_.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new _T(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,z_.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),z_.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,z_.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),z_.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return z_.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return z_.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),z_.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),z_.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),z_.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return z_.resolve(n)}},{key:"containsKey",value:function(e,t){return z_.resolve(this.ks.containsKey(t))}}]),e}(),XT=function(){function e(t,n){var r=this;c(this,e),this.$s={},this.overlays={},this.Os=new tw(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new $T(this),this.indexManager=new nT,this.remoteDocumentCache=new YT((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new kS(n),this.qs=new zT(this.serializer)}return f(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new WT,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new KT(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;e_("MemoryPersistence","Starting transaction:",e);var i=new JT(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return z_.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),JT=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return f(n)}(V_),ZT=function(){function e(t){c(this,e),this.persistence=t,this.Qs=new HT,this.js=null}return f(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw i_()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),z_.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),z_.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),z_.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z_.forEach(this.Ws,(function(r){var i=N_.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,E_.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return z_.or([function(){return z_.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),eC=function(){function e(t){c(this,e),this.serializer=t}return f(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new W_("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cw,{unique:!0}),e.createObjectStore("documentMutations")}(e),tC(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=z_.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),tC(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:E_.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cw,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return z_.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Ew});t.createIndex("collectionPathOverlayIndex",Sw,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Tw,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:dw});t.createIndex("documentKeyIndex",pw),t.createIndex("collectionGroupIndex",vw)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:_w}).createIndex("sequenceNumberIndex",ww,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:bw}).createIndex("documentKeyIndex",xw,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=pT(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return z_.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return z_.forEach(r,(function(r){a_(r.userId===n.userId);var i=ES(t.serializer,r);return dT(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new T_(n),o=function(e){return[0,aw(e)]}(a);r.push(t.get(o).next((function(n){return n?z_.resolve():function(n){return t.put({targetId:0,path:aw(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return z_.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:kw});var n=t.store("collectionParents"),r=new rT,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:aw(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new T_(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=b(e,3),r=(n[0],n[1]),a=(n[2],uw(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=SS(r),a=TS(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new N_(T_.fromString(i.document.name).popFirst(5)):i.noDocument?N_.fromSegments(i.noDocument.path):i.unknownDocument?N_.fromSegments(i.unknownDocument.path):i_()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return z_.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=AT(this.serializer),a=new XT(ZT.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Dx();ES(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),z_.forEach(r,(function(e,r){var o=new $k(r),s=AS.de(n.serializer,o),u=a.getIndexManager(o),c=vT.de(o,n.serializer,u,a.referenceDelegate);return new qT(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new Dw(t,tw.ct),e).next()}))}))}}]),e}();function tC(e){e.createObjectStore("targetDocuments",{keyPath:yw}).createIndex("documentTargetsIndex",gw,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",mw,{unique:!0}),e.createObjectStore("targetGlobal")}var nC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rC=function(){function e(t,n,r,i,a,o,s,u,l,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(c(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=s,this.ri=l,this.oi=f,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new u_(s_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new RT(this,i),this.di=n+"main",this.serializer=new kS(u),this.wi=new H_(this.di,this.ui,new eC(this.serializer)),this.Bs=new wT(this.referenceDelegate,this.serializer),this.remoteDocumentCache=AT(this.serializer),this.qs=new PS,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===f&&t_("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return f(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new u_(s_.FAILED_PRECONDITION,nC);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new tw(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=Oe(Pe().mark((function n(r){return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=Oe(Pe().mark((function t(n){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return aC(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(Y_(t))return e_("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return e_("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return iC(e).get("owner").next((function(e){return z_.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return aC(e).delete(this.clientId)}},{key:"bi",value:function(){var e=Oe(Pe().mark((function e(){var t,n,r,i,a=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Ow(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return z_.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=cn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?z_.resolve(!0):iC(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new u_(s_.FAILED_PRECONDITION,nC);return!1}}return!(!t.networkEnabled||!t.inForeground)||aC(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&e_("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Oe(Pe().mark((function e(){var t=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Dw(e,tw.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return aC(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return vT.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new aT(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return AS.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;e_("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.ui)?Pw:14===i?Rw:13===i?Nw:12===i?Iw:11===i?Cw:void i_();return this.wi.runTransaction(e,o,s,(function(i){return a=new Dw(i,r.Os?r.Os.next():tw.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw t_("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new u_(s_.FAILED_PRECONDITION,U_);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return iC(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new u_(s_.FAILED_PRECONDITION,nC)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return iC(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=iC(e);return n.get("owner").next((function(e){return t.Ri(e)?(e_("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):z_.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(t_("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!qa()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return e_("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return t_("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){t_("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return H_.D()}}]),e}();function iC(e){return Ow(e,"owner")}function aC(e){return Ow(e,"clientMetadata")}function oC(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var sC=function(){function e(t,n,r,i){c(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return f(e,null,[{key:"Li",value:function(t,n){var r,i=Dx(),a=Dx(),o=cn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),uC=function(){function e(){c(this,e),this.qi=!1}return f(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(ox(t))return z_.resolve(null);var r=fx(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=dx(t,null,"F"),r=fx(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Dx.apply(void 0,u(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,dx(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return ox(t)||r.isEqual(E_.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(Zk()<=So.DEBUG&&e_("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),mx(t)),i.Wi(e,o,t,M_(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new Vw(kx(e));return t.forEach((function(t,r){yx(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return Zk()<=So.DEBUG&&e_("QueryEngine","Using full collection scan to execute query:",mx(t)),this.Ui.getDocumentsMatchingQuery(e,t,F_.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),cC=function(){function e(t,n,r,i){c(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Fw(__),this.Yi=new wx((function(e){return Xb(e)}),Jb),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return f(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qT(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function lC(e,t,n,r){return new cC(e,t,n,r)}function fC(e,t){return hC.apply(this,arguments)}function hC(){return hC=Oe(Pe().mark((function e(t,n){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o_(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Dx(),u=cn(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=cn(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=cn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=cn(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),hC.apply(this,arguments)}function dC(e,t){var n=o_(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=z_.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);a_(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Dx(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function pC(e){var t=o_(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function vC(e,t){var n=o_(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(Hw.EMPTY_BYTE_STRING,E_.min()).withLastLimboFreeSnapshotVersion(E_.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var s=xx(),u=Dx();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(mC(e,a,t.documentUpdates).next((function(e){s=e.nr,u=e.sr}))),!r.isEqual(E_.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return z_.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function mC(e,t,n){var r=Dx(),i=Dx();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=xx();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(E_.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):e_("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function yC(e,t){var n=o_(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function gC(e,t){var n=o_(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,z_.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new gS(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function kC(e,t,n){return _C.apply(this,arguments)}function _C(){return _C=Oe(Pe().mark((function e(t,n,r){var i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o_(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Y_(e.t1)){e.next=12;break}throw e.t1;case 12:e_("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),_C.apply(this,arguments)}function wC(e,t,n){var r=o_(e),i=E_.min(),a=Dx();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=o_(e),i=r.Yi.get(n);return void 0!==i?z_.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,fx(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:E_.min(),n?a:Dx())})).next((function(e){return EC(r,gx(t),e),{documents:e,ir:a}}))}))}function bC(e,t){var n=o_(e),r=o_(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function xC(e,t){var n=o_(e),r=n.Xi.get(t)||E_.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,M_(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return EC(n,t,e),e}))}function EC(e,t,n){var r=e.Xi.get(t)||E_.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function SC(e,t,n,r){return TC.apply(this,arguments)}function TC(){return TC=Oe(Pe().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o_(t),o=Dx(),s=xx(),u=cn(r);try{for(u.s();!(c=u.n()).done;)l=c.value,f=n.rr(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),s=s.insert(f,h)}catch(v){u.e(v)}finally{u.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,gC(a,function(e){return fx(ax(T_.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return mC(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),TC.apply(this,arguments)}function CC(e,t){return IC.apply(this,arguments)}function IC(){return IC=Oe(Pe().mark((function e(t,n){var r,i,a,o=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Dx(),e.next=3,gC(t,fx(CS(n.bundledQuery)));case 3:return i=e.sent,a=o_(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=GE(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(Hw.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),IC.apply(this,arguments)}function NC(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function RC(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function PC(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var DC=function(){function e(t,n,r,i){c(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return f(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new u_(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(t_("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),OC=function(){function e(t,n,r){c(this,e),this.targetId=t,this.state=n,this.error=r}return f(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new u_(i.error.code,i.error.message))),a?new e(t,i.state,r):(t_("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),AC=function(){function e(t,n){c(this,e),this.clientId=t,this.activeTargetIds=n}return f(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ax(),o=0;i&&o<r.activeTargetIds.length;++o)i=iw(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(t_("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),MC=function(){function e(t,n){c(this,e),this.clientId=t,this.onlineState=n}return f(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(t_("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),LC=function(){function e(){c(this,e),this.activeTargetIds=Ax()}return f(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),FC=function(){function e(t,n,r,i,a){c(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Fw(__),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=NC(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new LC),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return f(e,[{key:"start",value:function(){var e=Oe(Pe().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=cn(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(NC(this.persistenceKey,i)))&&(o=AC.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(s=this.storage.getItem(this.vr))&&(u=this.br(s))&&this.Vr(u),c=cn(this.yr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.mr(f)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(PC(this.persistenceKey,e));if(n){var r=OC.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(PC(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return e_("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){e_("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){e_("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(e_("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void t_("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(Oe(Pe().mark((function e(){var r,i,a,o,s,u,c;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(s));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}u=function(e){var t=tw.ct;if(null!=e)try{var n=JSON.parse(e);a_("number"==typeof n),t=n}catch(e){t_("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==tw.ct&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new DC(this.currentUser,e,t,n),i=RC(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=RC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=PC(this.persistenceKey,e),i=new OC(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return AC.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return DC.ar(new $k(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return OC.ar(r,t)}},{key:"br",value:function(e){return MC.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:e_("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Wr(o,s).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=Ax();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),jC=function(){function e(){c(this,e),this.Hr=new LC,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return f(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new LC,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),UC=function(){function e(){c(this,e)}return f(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),VC=function(){function e(){var t=this;c(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return f(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){e_("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=cn(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){e_("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=cn(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),BC=null;function qC(){return null===BC?BC=268435456+Math.round(2147483648*Math.random()):BC++,"0x"+BC.toString(16)}var zC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},WC=function(){function e(t){c(this,e),this.ro=t.ro,this.oo=t.oo}return f(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),HC="WebChannelConnection",GC=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return f(n,[{key:"Ao",value:function(e,t,n,r){var i=qC();return new Promise((function(a,o){var s=new Gk;s.setWithCredentials(!0),s.listenOnce(Bk.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Vk.NO_ERROR:var t=s.getResponseJson();e_(HC,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Vk.TIMEOUT:e_(HC,"RPC '".concat(e,"' ").concat(i," timed out")),o(new u_(s_.DEADLINE_EXCEEDED,"Request time out"));break;case Vk.HTTP_ERROR:var n=s.getStatus();if(e_(HC,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(s_).indexOf(t)>=0?t:s_.UNKNOWN}(u.status);o(new u_(c,u.message))}else o(new u_(s_.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new u_(s_.UNAVAILABLE,"Connection failed."));break;default:i_()}}finally{e_(HC,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);e_(HC,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=qC(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=jk(),o=Uk(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new Wk({})),this.Eo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");e_(HC,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),f=!1,h=!1,d=new WC({ro:function(t){h?e_(HC,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(e_(HC,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),e_(HC,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Hk.EventType.OPEN,(function(){h||e_(HC,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Hk.EventType.CLOSE,(function(){h||(h=!0,e_(HC,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,Hk.EventType.ERROR,(function(t){h||(h=!0,n_(HC,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new u_(s_.UNAVAILABLE,"The operation could not be completed")))})),p(l,Hk.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];a_(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){e_(HC,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=fE[e];if(void 0!==t)return _E(t)}(s),c=o.message;void 0===u&&(u=s_.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),h=!0,d.wo(new u_(u,c)),l.close()}else e_(HC,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,qk.STAT_EVENT,(function(t){t.stat===zk.PROXY?e_(HC,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===zk.NOPROXY&&e_(HC,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){c(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return f(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=qC(),o=this.To(e,t);e_("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.Eo(s,r,i),this.Ao(e,o,s,n).then((function(t){return e_("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw n_("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Xk,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=zC[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function KC(){return"undefined"!=typeof window?window:null}function YC(){return"undefined"!=typeof document?document:null}function QC(e){return new BE(e,!0)}var $C=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;c(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return f(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&e_("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),XC=function(){function e(t,n,r,i,a,o,s,u){c(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new $C(t,n)}return f(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===s_.RESOURCE_EXHAUSTED?(t_(n.toString()),t_("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===s_.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=b(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new u_(s_.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(Oe(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return e_("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(e_("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),JC=function(e){d(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return c(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return f(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:i_()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(a_(void 0===t||"string"==typeof t),Hw.fromBase64String(t||"")):(a_(void 0===t||t instanceof Uint8Array),Hw.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?s_.UNKNOWN:_E(e.code);return new u_(t,e.message||"")}(o);n=new OE(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=$E(e,u.document.name),l=GE(u.document.updateTime),f=u.document.createTime?GE(u.document.createTime):E_.min(),h=new bb({mapValue:{fields:u.document.fields}}),d=Eb.newFoundDocument(c,l,f,h),p=u.targetIds||[],v=u.removedTargetIds||[];n=new PE(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=$E(e,m.document),g=m.readTime?GE(m.readTime):E_.min(),k=Eb.newNoDocument(y,g),_=m.removedTargetIds||[];n=new PE([],_,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=$E(e,w.document),x=w.removedTargetIds||[];n=new PE([],x,b,null)}else{if(!("filter"in t))return i_();t.filter;var E=t.filter;E.targetId;var S=E.count,T=void 0===S?0:S,C=E.unchangedNames,I=new gE(T,C),N=E.targetId;n=new DE(N,I)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return E_.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?E_.min():t.readTime?GE(t.readTime):E_.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=ZE(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=Zb(r)?{documents:oS(e,r)}:{query:sS(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=WE(e,t.resumeToken);var i=qE(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(E_.min())>0){n.readTime=zE(e,t.snapshotVersion.toTimestamp());var a=qE(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return i_()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=ZE(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(XC),ZC=function(e){d(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return c(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.ru=!1,u}return f(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,Gs(p(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(a_(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(a_(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?GE(e.updateTime):GE(t);return n.isEqual(E_.min())&&(n=GE(t)),new Xx(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=GE(e.commitTime);return this.listener.cu(n,t)}return a_(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=ZE(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return iS(t.serializer,e)}))};this.Wo(n)}}]),n}(XC),eI=function(e){d(n,e);var t=k(n);function n(e,r,i,a){var o;return c(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return f(n,[{key:"fu",value:function(){if(this.lu)throw new u_(s_.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=b(i,2),o=a[0],s=a[1];return r.connection.Io(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===s_.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new u_(s_.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=b(a,2),s=o[0],u=o[1];return i.connection.vo(e,t,n,s,u,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===s_.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new u_(s_.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return f((function e(){c(this,e)}))}());var tI=function(){function e(t,n){c(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return f(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(t_(t),this.mu=!1):e_("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),nI=f((function e(t,n,r,i,a){var o=this;c(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=dI(o),!e.t0){e.next=5;break}return e_("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=o_(t)).vu.add(4),e.next=4,aI(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,rI(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new tI(r,i)}));function rI(e){return iI.apply(this,arguments)}function iI(){return(iI=Oe(Pe().mark((function e(t){var n,r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dI(t)){e.next=18;break}n=cn(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function aI(e){return oI.apply(this,arguments)}function oI(){return(oI=Oe(Pe().mark((function e(t){var n,r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=cn(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function sI(e,t){var n=o_(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),hI(n)?fI(n):qI(n).Ko()&&cI(n,t))}function uI(e,t){var n=o_(e),r=qI(n);n.Au.delete(t),r.Ko()&&lI(n,t),0===n.Au.size&&(r.Ko()?r.jo():dI(n)&&n.bu.set("Unknown"))}function cI(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(E_.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}qI(e).su(t)}function lI(e,t){e.Vu.qt(t),qI(e).iu(t)}function fI(e){e.Vu=new ME({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),qI(e).start(),e.bu.gu()}function hI(e){return dI(e)&&!qI(e).Uo()&&e.Au.size>0}function dI(e){return 0===o_(e).vu.size}function pI(e){e.Vu=void 0}function vI(e){return mI.apply(this,arguments)}function mI(){return(mI=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){cI(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yI(e,t){return gI.apply(this,arguments)}function gI(){return(gI=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pI(t),hI(t)?(t.bu.Iu(n),fI(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kI(e,t,n){return _I.apply(this,arguments)}function _I(){return _I=Oe(Pe().mark((function e(t,n,r){var i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof OE&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Oe(Pe().mark((function e(t,n){var r,i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=cn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),e_("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,wI(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof PE?t.Vu.Ht(n):n instanceof DE?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(E_.min())){e.next=29;break}return e.prev=14,e.next=17,pC(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(Hw.EMPTY_BYTE_STRING,r.snapshotVersion)),lI(e,t);var i=new gS(r.target,t,n,r.sequenceNumber);cI(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),e_("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,wI(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),_I.apply(this,arguments)}function wI(e,t,n){return bI.apply(this,arguments)}function bI(){return(bI=Oe(Pe().mark((function e(t,n,r){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Y_(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,aI(t);case 5:t.bu.set("Offline"),r||(r=function(){return pC(t.localStore)}),t.asyncQueue.enqueueRetryable(Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e_("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,rI(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xI(e,t){return t().catch((function(n){return wI(e,n,t)}))}function EI(e){return SI.apply(this,arguments)}function SI(){return(SI=Oe(Pe().mark((function e(t){var n,r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o_(t),r=zI(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!TI(n)){e.next=19;break}return e.prev=3,e.next=6,yC(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,CI(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,wI(n,e.t0);case 17:e.next=2;break;case 19:II(n)&&NI(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function TI(e){return dI(e)&&e.Eu.length<10}function CI(e,t){e.Eu.push(t);var n=zI(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function II(e){return dI(e)&&!zI(e).Uo()&&e.Eu.length>0}function NI(e){zI(e).start()}function RI(e){return PI.apply(this,arguments)}function PI(){return(PI=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zI(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DI(e){return OI.apply(this,arguments)}function OI(){return(OI=Oe(Pe().mark((function e(t){var n,r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=zI(t),r=cn(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AI(e,t,n){return MI.apply(this,arguments)}function MI(){return(MI=Oe(Pe().mark((function e(t,n,r){var i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=mE.from(i,n,r),e.next=3,xI(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,EI(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LI(e,t){return FI.apply(this,arguments)}function FI(){return FI=Oe(Pe().mark((function e(t,n){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&zI(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=Oe(Pe().mark((function e(t,n){var r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!kE(i=n.code)||i===s_.ABORTED){e.next=7;break}return r=t.Eu.shift(),zI(t).Qo(),e.next=5,xI(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,EI(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:II(t)&&NI(t);case 5:case"end":return e.stop()}}),e)}))),FI.apply(this,arguments)}function jI(e,t){return UI.apply(this,arguments)}function UI(){return(UI=Oe(Pe().mark((function e(t,n){var r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=o_(t)).asyncQueue.verifyOperationInProgress(),e_("RemoteStore","RemoteStore received new credentials"),i=dI(r),r.vu.add(3),e.next=6,aI(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,rI(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VI(e,t){return BI.apply(this,arguments)}function BI(){return(BI=Oe(Pe().mark((function e(t,n){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o_(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,rI(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,aI(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qI(e){return e.Su||(e.Su=function(e,t,n){var r=o_(e);return r.fu(),new JC(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:vI.bind(null,e),ao:yI.bind(null,e),nu:kI.bind(null,e)}),e.Ru.push(function(){var t=Oe(Pe().mark((function t(n){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),hI(e)?fI(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:pI(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function zI(e){return e.Du||(e.Du=function(e,t,n){var r=o_(e);return r.fu(),new ZC(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:RI.bind(null,e),ao:LI.bind(null,e),au:DI.bind(null,e),cu:AI.bind(null,e)}),e.Ru.push(function(){var t=Oe(Pe().mark((function t(n){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,EI(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(e_("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var WI=function(){function e(t,n,r,i,a){c(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new c_,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return f(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new u_(s_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function HI(e,t){if(t_("AsyncQueue","".concat(t,": ").concat(e)),Y_(e))return new u_(s_.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var GI=function(){function e(t){c(this,e),this.comparator=t?function(e,n){return t(e,n)||N_.comparator(e.key,n.key)}:function(e,t){return N_.comparator(e.key,t.key)},this.keyedMap=Sx(),this.sortedSet=new Fw(this.comparator)}return f(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),KI=function(){function e(){c(this,e),this.Cu=new Fw(N_.comparator)}return f(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):i_():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),YI=function(){function e(t,n,r,i,a,o,s,u,l){c(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=l}return f(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&px(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,GI.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),QI=f((function e(){c(this,e),this.Nu=void 0,this.listeners=[]})),$I=f((function e(){c(this,e),this.queries=new wx((function(e){return vx(e)}),px),this.onlineState="Unknown",this.ku=new Set}));function XI(e,t){return JI.apply(this,arguments)}function JI(){return JI=Oe(Pe().mark((function e(t,n){var r,i,a,o,s;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o_(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new QI),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=HI(e.t0,"Initialization of query '".concat(mx(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&rN(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),JI.apply(this,arguments)}function ZI(e,t){return eN.apply(this,arguments)}function eN(){return eN=Oe(Pe().mark((function e(t,n){var r,i,a,o,s;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o_(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),eN.apply(this,arguments)}function tN(e,t){var n,r=o_(e),i=!1,a=cn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=cn(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&rN(r)}function nN(e,t,n){var r=o_(e),i=r.queries.get(t);if(i){var a,o=cn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function rN(e){e.ku.forEach((function(e){e.next()}))}var iN=function(){function e(t,n,r){c(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return f(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=cn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new YI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=YI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),aN=function(){function e(t,n){c(this,e),this.Gu=t,this.byteLength=n}return f(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),oN=function(){function e(t){c(this,e),this.serializer=t}return f(e,[{key:"rr",value:function(e){return $E(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?nS(this.serializer,e.document,!1):Eb.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return GE(e)}}]),e}(),sN=function(){function e(t,n,r){c(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uN(t)}return f(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=T_.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new oN(this.serializer),i=cn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.rr(a.metadata.name),u=cn(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Dx()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Oe(Pe().mark((function e(){var t,n,r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SC(this.localStore,new oN(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=cn(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,CC(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function uN(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var cN=f((function e(t){c(this,e),this.key=t})),lN=f((function e(t){c(this,e),this.key=t})),fN=function(){function e(t,n){c(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Dx(),this.mutatedKeys=Dx(),this.tc=kx(t),this.ec=new GI(this.tc)}return f(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new KI,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=yx(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.tc(f,u)>0||c&&n.tc(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:s,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return i_()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,u=s!==this.Xu;return this.Xu=s,0!==a.length||u?{snapshot:new YI(this.query,e.ec,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new KI,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=Dx(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new lN(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new cN(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=Dx();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return YI.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),hN=f((function e(t,n,r){c(this,e),this.query=t,this.targetId=n,this.view=r})),dN=f((function e(t){c(this,e),this.key=t,this.fc=!1})),pN=function(){function e(t,n,r,i,a,o){c(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new wx((function(e){return vx(e)}),px),this._c=new Map,this.mc=new Set,this.gc=new Fw(N_.comparator),this.yc=new Map,this.Ic=new HT,this.Tc={},this.Ec=new Map,this.Ac=_T.Mn(),this.onlineState="Unknown",this.vc=void 0}return f(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function vN(e,t){return mN.apply(this,arguments)}function mN(){return mN=Oe(Pe().mark((function e(t,n){var r,i,a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=uR(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,gC(r.localStore,fx(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,yN(r,n,i,"current"===u,s.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&sI(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),mN.apply(this,arguments)}function yN(e,t,n,r,i){return gN.apply(this,arguments)}function gN(){return gN=Oe(Pe().mark((function e(t,n,r,i,a){var o,s,u,c,l,f;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=Oe(Pe().mark((function e(t,n,r,i){var a,o,s;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,wC(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(jN(t,n.targetId,s.cc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,wC(t.localStore,n,!0);case 3:return o=e.sent,s=new fN(n,o.ir),u=s.sc(o.documents),c=RE.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=s.applyChanges(u,t.isPrimaryClient,c),jN(t,r,l.cc),f=new hN(n,r,s),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),gN.apply(this,arguments)}function kN(e,t){return _N.apply(this,arguments)}function _N(){return(_N=Oe(Pe().mark((function e(t,n){var r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o_(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!px(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,kC(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),uI(r.remoteStore,i.targetId),LN(r,i.targetId)})).catch(B_);case 9:e.next=14;break;case 11:return LN(r,i.targetId),e.next=14,kC(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wN(e,t,n){return bN.apply(this,arguments)}function bN(){return bN=Oe(Pe().mark((function e(t,n,r){var i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=cR(t),e.prev=1,e.next=4,function(e,t){var n,r,i=o_(e),a=x_.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Dx());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=xx(),u=Dx();return i.Zi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=cn(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=iE(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new sE(c.key,l,xb(l.value.mapValue),Jx.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Tx(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new Fw(__)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,BN(i,a.changes);case 9:return e.next=11,EI(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=HI(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),bN.apply(this,arguments)}function xN(e,t){return EN.apply(this,arguments)}function EN(){return(EN=Oe(Pe().mark((function e(t,n){var r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o_(t),e.prev=1,e.next=4,vC(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(a_(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?a_(n.fc):e.removedDocuments.size>0&&(a_(n.fc),n.fc=!1))})),e.next=8,BN(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,B_(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function SN(e,t,n){var r=o_(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=o_(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=cn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&rN(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function TN(e,t,n){return CN.apply(this,arguments)}function CN(){return CN=Oe(Pe().mark((function e(t,n,r){var i,a,o,s,u,c;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=o_(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new Fw(N_.comparator)).insert(o,Eb.newNoDocument(o,E_.min())),u=Dx().add(o),c=new NE(E_.min(),new Map,new Fw(__),s,u),e.next=9,xN(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),VN(i),e.next=16;break;case 14:return e.next=16,kC(i.localStore,n,!1).then((function(){return LN(i,n,r)})).catch(B_);case 16:case"end":return e.stop()}}),e)}))),CN.apply(this,arguments)}function IN(e,t){return NN.apply(this,arguments)}function NN(){return(NN=Oe(Pe().mark((function e(t,n){var r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o_(t),i=n.batch.batchId,e.prev=1,e.next=4,dC(r.localStore,n);case 4:return a=e.sent,MN(r,i,null),AN(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,BN(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,B_(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function RN(e,t,n){return PN.apply(this,arguments)}function PN(){return(PN=Oe(Pe().mark((function e(t,n,r){var i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o_(t),e.prev=1,e.next=4,function(e,t){var n=o_(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return a_(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,MN(i,n,r),AN(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,BN(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,B_(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function DN(e,t){return ON.apply(this,arguments)}function ON(){return(ON=Oe(Pe().mark((function e(t,n){var r,i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dI((r=o_(t)).remoteStore)||e_("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=o_(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=HI(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function AN(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function MN(e,t,n){var r=o_(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function LN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=cn(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||FN(e,t)}))}function FN(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(uI(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),VN(e))}function jN(e,t,n){var r,i=cn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof cN?(e.Ic.addReference(a.key,t),UN(e,a)):a instanceof lN?(e_("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||FN(e,a.key)):i_()}}catch(o){i.e(o)}finally{i.f()}}function UN(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(e_("SyncEngine","New document in limbo: "+n),e.mc.add(r),VN(e))}function VN(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new N_(T_.fromString(t)),r=e.Ac.next();e.yc.set(r,new dN(n)),e.gc=e.gc.insert(n,r),sI(e.remoteStore,new gS(fx(ax(n.path)),r,"TargetPurposeLimboResolution",tw.ct))}}function BN(e,t,n){return qN.apply(this,arguments)}function qN(){return qN=Oe(Pe().mark((function e(t,n,r){var i,a,o,s;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=o_(t),a=[],o=[],s=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){s.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=sC.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.dc.nu(a),e.next=9,function(){var e=Oe(Pe().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o_(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return z_.forEach(n,(function(t){return z_.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return z_.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Y_(e.t0)){e.next=10;break}throw e.t0;case 10:e_("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=cn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ji.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),qN.apply(this,arguments)}function zN(e,t){return WN.apply(this,arguments)}function WN(){return(WN=Oe(Pe().mark((function e(t,n){var r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=o_(t)).currentUser.isEqual(n)){e.next=11;break}return e_("SyncEngine","User change. New user:",n.toKey()),e.next=5,fC(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new u_(s_.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,BN(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HN(e,t){var n=o_(e),r=n.yc.get(t);if(r&&r.fc)return Dx().add(r.key);var i=Dx(),a=n._c.get(t);if(!a)return i;var o,s=cn(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.wc.get(u);i=i.unionWith(c.view.nc)}}catch(l){s.e(l)}finally{s.f()}return i}function GN(e,t){return KN.apply(this,arguments)}function KN(){return(KN=Oe(Pe().mark((function e(t,n){var r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o_(t),e.next=3,wC(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&jN(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YN(e,t){return QN.apply(this,arguments)}function QN(){return(QN=Oe(Pe().mark((function e(t,n){var r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o_(t),e.abrupt("return",xC(r.localStore,n).then((function(e){return BN(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $N(e,t,n,r){return XN.apply(this,arguments)}function XN(){return XN=Oe(Pe().mark((function e(t,n,r,i){var a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o_(t),e.next=3,function(e,t){var n=o_(e),r=o_(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):z_.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,EI(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(MN(a,n,i||null),AN(a,n),function(e,t){o_(o_(e).mutationQueue).Cn(t)}(a.localStore,n)):i_();case 11:return e.next=13,BN(a,o);case 13:e.next=16;break;case 15:e_("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),XN.apply(this,arguments)}function JN(e,t){return ZN.apply(this,arguments)}function ZN(){return(ZN=Oe(Pe().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uR(r=o_(t)),cR(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,eR(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,VI(r.remoteStore,!0);case 9:o=cn(a);try{for(o.s();!(s=o.n()).done;)u=s.value,sI(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return LN(r,t),kC(r.localStore,t,!0)})),uI(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,eR(r,c);case 21:return function(e){var t=o_(e);t.yc.forEach((function(e,n){uI(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Fw(N_.comparator)}(r),r.vc=!1,e.next=25,VI(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eR(e,t,n){return tR.apply(this,arguments)}function tR(){return tR=Oe(Pe().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,m,y;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=o_(t),a=[],o=[],s=cn(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,gC(i.localStore,fx(f[0]));case 11:l=e.sent,h=cn(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,GN(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,bC(i.localStore,c);case 36:return y=e.sent,e.next=39,gC(i.localStore,y);case 39:return l=e.sent,e.next=42,yN(i,nR(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),tR.apply(this,arguments)}function nR(e){return ix(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function rR(e){var t=o_(e);return o_(o_(t.localStore).persistence).$i()}function iR(e,t,n,r){return aR.apply(this,arguments)}function aR(){return aR=Oe(Pe().mark((function e(t,n,r,i){var a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=o_(t)).vc){e.next=3;break}return e.abrupt("return",void e_("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,xC(a.localStore,gx(o[0]));case 10:return s=e.sent,u=NE.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Hw.EMPTY_BYTE_STRING),e.next=14,BN(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,kC(a.localStore,n,!0);case 17:return LN(a,n,i),e.abrupt("break",20);case 19:i_();case 20:case"end":return e.stop()}}),e)}))),aR.apply(this,arguments)}function oR(e,t,n){return sR.apply(this,arguments)}function sR(){return(sR=Oe(Pe().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=uR(t)).vc){e.next=45;break}a=cn(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i._c.has(s)){e.next=10;break}return e_("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,bC(i.localStore,s);case 12:return u=e.sent,e.next=15,gC(i.localStore,u);case 15:return c=e.sent,e.next=18,yN(i,nR(u),c.targetId,!1,c.resumeToken);case 18:sI(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=cn(r),e.prev=30,h=Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,kC(i.localStore,t,!1).then((function(){uI(i.remoteStore,t),LN(i,t)})).catch(B_);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function uR(e){var t=o_(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=HN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TN.bind(null,t),t.dc.nu=tN.bind(null,t.eventManager),t.dc.Pc=nN.bind(null,t.eventManager),t}function cR(e){var t=o_(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=IN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=RN.bind(null,t),t}function lR(e,t,n){var r=o_(e);(function(){var e=Oe(Pe().mark((function e(t,n,r){var i,a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=o_(e),r=GE(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(uN(i)),a=new sN(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,BN(t,u.Ju,void 0);case 31:return e.next=33,function(e,t){var n=o_(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(n_("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var fR=function(){function e(){c(this,e),this.synchronizeTabs=!1}return f(e,[{key:"initialize",value:function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=QC(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return lC(this.persistence,new uC,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new XT(ZT.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new jC}},{key:"terminate",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),hR=function(e){d(n,e);var t=k(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return f(n,[{key:"initialize",value:function(){var e=Oe(Pe().mark((function e(t){var r=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gs(p(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,cR(this.Vc.syncEngine);case 6:return e.next=8,EI(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return lC(this.persistence,new uC,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new CT(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new ew(t,this.persistence);return new Z_(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=oC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?hT.withCacheSize(this.cacheSizeBytes):hT.DEFAULT;return new rC(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,KC(),YC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new jC}}]),n}(fR),dR=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return f(n,[{key:"initialize",value:function(){var e=Oe(Pe().mark((function e(t){var r,i=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gs(p(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof FC,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:$N.bind(null,r),zr:iR.bind(null,r),Wr:oR.bind(null,r),$i:rR.bind(null,r),Qr:YN.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JN(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=KC();if(!FC.D(t))throw new u_(s_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=oC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new FC(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(hR),pR=function(){function e(){c(this,e)}return f(e,[{key:"initialize",value:function(){var e=Oe(Pe().mark((function e(t,n){var r=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return SN(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=zN.bind(null,this.syncEngine),e.next=12,VI(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new $I}},{key:"createDatastore",value:function(e){var t,n=QC(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new GC(t));return function(e,t,n,r){return new eI(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return SN(o.syncEngine,e,0)},a=VC.D()?new VC:new UC,new nI(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new pN(e,t,n,r,i,a);return o&&(s.vc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o_(t),e_("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,aI(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function vR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Oe(Pe().mark((function r(){var i;return Pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var mR=function(){function e(t){c(this,e),this.observer=t,this.muted=!1}return f(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):t_("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),yR=function(){function e(t,n){var r=this;c(this,e),this.Cc=t,this.serializer=n,this.metadata=new c_,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return f(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=Oe(Pe().mark((function e(){var t,n,r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new aN(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=Oe(Pe().mark((function e(){var t,n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=Oe(Pe().mark((function e(){var t,n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),gR=function(){function e(t){c(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return f(e,[{key:"lookup",value:function(){var e=Oe(Pe().mark((function e(t){var n,r=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new u_(s_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Oe(Pe().mark((function e(t,n){var r,i,a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o_(t),i=ZE(r.serializer)+"/documents",a={documents:n.map((function(e){return QE(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=rS(r.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());a_(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new dE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Oe(Pe().mark((function e(){var t,n=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=N_.fromPath(t);n.mutations.push(new pE(r,n.precondition(r)))})),e.next=7,function(){var e=Oe(Pe().mark((function e(t,n){var r,i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o_(t),i=ZE(r.serializer)+"/documents",a={writes:n.map((function(e){return iS(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw i_();t=E_.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new u_(s_.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(E_.min())?Jx.exists(!1):Jx.updateTime(t):Jx.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(E_.min()))throw new u_(s_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jx.updateTime(t)}return Jx.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),kR=function(){function e(t,n,r,i,a){c(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new $C(this.asyncQueue,"transaction_retry")}return f(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(Oe(Pe().mark((function t(){var n,r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new gR(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!nw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!kE(t)}return!1}}]),e}(),_R=function(){function e(t,n,r,i){var a=this;c(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$k.UNAUTHENTICATED,this.clientId=k_.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e_("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return e_("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return f(e,[{key:"getConfiguration",value:function(){var e=Oe(Pe().mark((function e(){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new u_(s_.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new c_;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Oe(Pe().mark((function n(){var r;return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=HI(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function wR(e,t){return bR.apply(this,arguments)}function bR(){return bR=Oe(Pe().mark((function e(t,n){var r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e_("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,fC(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),bR.apply(this,arguments)}function xR(e,t){return ER.apply(this,arguments)}function ER(){return(ER=Oe(Pe().mark((function e(t,n){var r,i;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,TR(t);case 3:return r=e.sent,e_("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return jI(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return jI(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SR(e){return"FirebaseError"===e.name?e.code===s_.FAILED_PRECONDITION||e.code===s_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function TR(e){return CR.apply(this,arguments)}function CR(){return(CR=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return e_("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,wR(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),SR(n=e.t0)){e.next=13;break}throw n;case 13:return n_("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,wR(t,new fR);case 16:e.next=21;break;case 18:return e_("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,wR(t,new fR);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function IR(e){return NR.apply(this,arguments)}function NR(){return(NR=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return e_("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,xR(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return e_("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,xR(t,new pR);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RR(e){return TR(e).then((function(e){return e.persistence}))}function PR(e){return TR(e).then((function(e){return e.localStore}))}function DR(e){return IR(e).then((function(e){return e.remoteStore}))}function OR(e){return IR(e).then((function(e){return e.syncEngine}))}function AR(e){return IR(e).then((function(e){return e.datastore}))}function MR(e){return LR.apply(this,arguments)}function LR(){return(LR=Oe(Pe().mark((function e(t){var n,r;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,IR(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=vN.bind(null,n.syncEngine),r.onUnlisten=kN.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new c_;return e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function i(){return Pe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new mR({next:function(a){t.enqueueAndForget((function(){return ZI(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new u_(s_.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new u_(s_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new iN(ax(n.path),a,{includeMetadataChanges:!0,Ku:!0});return XI(e,o)},i.next=3,MR(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function jR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new c_;return e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function i(){return Pe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new mR({next:function(n){t.enqueueAndForget((function(){return ZI(e,o)})),n.fromCache&&"server"===r.source?i.reject(new u_(s_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new iN(n,a,{includeMetadataChanges:!0,Ku:!0});return XI(e,o)},i.next=3,MR(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function UR(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var VR=new Map;function BR(e,t,n){if(!n)throw new u_(s_.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function qR(e,t,n,r){if(!0===t&&!0===r)throw new u_(s_.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function zR(e){if(!N_.isDocumentKey(e))throw new u_(s_.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function WR(e){if(N_.isDocumentKey(e))throw new u_(s_.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function HR(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":i_()}function GR(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new u_(s_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=HR(e);throw new u_(s_.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function KR(e,t){if(t<=0)throw new u_(s_.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var YR=function(){function e(t){var n,r;if(c(this,e),void 0===t.host){if(void 0!==t.ssl)throw new u_(s_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new u_(s_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qR("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=UR(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new u_(s_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new u_(s_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new u_(s_.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return f(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),QR=function(){function e(t,n,r,i){c(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YR({}),this._settingsFrozen=!1}return f(e,[{key:"app",get:function(){if(!this._app)throw new u_(s_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new u_(s_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YR(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new f_;switch(e.type){case"firstParty":return new v_(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new u_(s_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=VR.get(e);t&&(e_("ComponentProvider","Removing Datastore"),VR.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function $R(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=GR(e,QR))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&n_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=$k.MOCK_USER;else{s=Ua(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new u_(s_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new $k(c)}e._authCredentials=new h_(new l_(s,u))}}var XR=function(){function e(t,n,r){c(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return f(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ZR(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),JR=function(){function e(t,n,r){c(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return f(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ZR=function(e){d(n,e);var t=k(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this,e,r,ax(i)))._path=i,a.type="collection",a}return f(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new XR(this.firestore,null,new N_(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(JR);function eP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=_o(e),BR("collection","path",t),e instanceof QR){var a=T_.fromString.apply(T_,[t].concat(r));return WR(a),new ZR(e,null,a)}if(!(e instanceof XR||e instanceof ZR))throw new u_(s_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(T_.fromString.apply(T_,[t].concat(r)));return WR(o),new ZR(e.firestore,null,o)}function tP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=_o(e),1===arguments.length&&(t=k_.A()),BR("doc","path",t),e instanceof QR){var a=T_.fromString.apply(T_,[t].concat(r));return zR(a),new XR(e,null,new N_(a))}if(!(e instanceof XR||e instanceof ZR))throw new u_(s_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(T_.fromString.apply(T_,[t].concat(r)));return zR(o),new XR(e.firestore,e instanceof ZR?e.converter:null,new N_(o))}function nP(e,t){return e=_o(e),t=_o(t),(e instanceof XR||e instanceof ZR)&&(t instanceof XR||t instanceof ZR)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function rP(e,t){return e=_o(e),t=_o(t),e instanceof JR&&t instanceof JR&&e.firestore===t.firestore&&px(e._query,t._query)&&e.converter===t.converter}var iP=function(){function e(){var t=this;c(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new $C(this,"async_queue_retry"),this.Xc=function(){var e=YC();e&&e_("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=YC();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return f(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=YC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new c_;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=Oe(Pe().mark((function e(){var t=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Y_(e.t0)){e.next=12;break}throw e.t0;case 12:e_("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw t_("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=WI.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&i_()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=Oe(Pe().mark((function e(){var t;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=cn(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=cn(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function aP(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=cn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var oP=function(){function e(){c(this,e),this._progressObserver={},this._taskCompletionResolver=new c_,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return f(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),sP=function(e){d(n,e);var t=k(n);function n(e,r,i,a){var o;return c(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new iP,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return f(n,[{key:"_terminate",value:function(){return this._firestoreClient||cP(this),this._firestoreClient.terminate()}}]),n}(QR);function uP(e){return e._firestoreClient||cP(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function cP(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Zw(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,UR(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new _R(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function lP(e,t,n){var r=new c_;return e.asyncQueue.enqueue(Oe(Pe().mark((function i(){var a;return Pe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,wR(e,n);case 3:return i.next=5,xR(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),SR(a=i.t0)){i.next=13;break}throw a;case 13:n_("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function fP(e){return function(e){return e.asyncQueue.enqueue(Oe(Pe().mark((function t(){var n,r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,RR(e);case 2:return n=t.sent,t.next=5,DR(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=o_(e);return t.vu.delete(0),rI(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(uP(e=GR(e,sP)))}function hP(e){return function(e){return e.asyncQueue.enqueue(Oe(Pe().mark((function t(){var n,r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,RR(e);case 2:return n=t.sent,t.next=5,DR(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=o_(t)).vu.add(0),e.next=4,aI(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(uP(e=GR(e,sP)))}function dP(e,t){var n=uP(e=GR(e,sP)),r=new oP;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new yR(e,t)}(function(e,t){if(e instanceof Uint8Array)return vR(e,t);if(e instanceof ArrayBuffer)return vR(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?xE().encode(e):e),t)}(n,QC(t));e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lR,t.next=3,OR(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function pP(e,t){return function(e,t){return e.asyncQueue.enqueue(Oe(Pe().mark((function n(){return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=o_(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,PR(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(uP(e=GR(e,sP)),t).then((function(t){return t?new JR(e,null,t.query):null}))}function vP(e){if(e._initialized||e._terminated)throw new u_(s_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var mP=function(){function e(t){c(this,e),this._byteString=t}return f(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Hw.fromBase64String(t))}catch(t){throw new u_(s_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Hw.fromUint8Array(t))}}]),e}(),yP=function(){function e(){c(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new u_(s_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new I_(n)}return f(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var gP=f((function e(t){c(this,e),this._methodName=t})),kP=function(){function e(t,n){if(c(this,e),!isFinite(t)||t<-90||t>90)throw new u_(s_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new u_(s_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return f(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return __(this._lat,e._lat)||__(this._long,e._long)}}]),e}(),_P=/^__.*__$/,wP=function(){function e(t,n,r){c(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new sE(e,this.data,this.fieldMask,t,this.fieldTransforms):new oE(e,this.data,t,this.fieldTransforms)}}]),e}(),bP=function(){function e(t,n,r){c(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return new sE(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function xP(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw i_()}}var EP=function(){function e(t,n,r,i,a,o){c(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return f(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return WP(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(xP(this.ca)&&_P.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),SP=function(){function e(t,n,r){c(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||QC(t)}return f(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new EP({ca:e,methodName:t,ga:n,path:I_.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function TP(e){var t=e._freezeSettings(),n=QC(e._databaseId);return new SP(e._databaseId,!!t.ignoreUndefinedProperties,n)}function CP(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);VP("Data must be an object, but it was:",o,r);var s,u,c=jP(r,o);if(a.merge)s=new zw(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=cn(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=BP(t,d,n);if(!o.contains(p))throw new u_(s_.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));HP(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}s=new zw(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new wP(new bb(c),s,u)}var IP=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(gP);function NP(e,t,n){return new EP({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var RP=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"_toFieldTransform",value:function(e){return new $x(e.path,new qx)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(gP),PP=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e)).pa=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=NP(this,e,!0),n=this.pa.map((function(e){return FP(e,t)})),r=new zx(n);return new $x(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gP),DP=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e)).pa=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=NP(this,e,!0),n=this.pa.map((function(e){return FP(e,t)})),r=new Hx(n);return new $x(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gP),OP=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e)).Ia=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=new Kx(e.serializer,Fx(e.serializer,this.Ia));return new $x(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(gP);function AP(e,t,n,r){var i=e.ya(1,t,n);VP("Data must be an object, but it was:",i,r);var a=[],o=bb.empty();Mw(r,(function(e,r){var s=zP(t,e,n);r=_o(r);var u=i.da(s);if(r instanceof IP)a.push(s);else{var c=FP(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new zw(a);return new bP(o,s,i.fieldTransforms)}function MP(e,t,n,r,i,a){var o=e.ya(1,t,n),s=[BP(t,r,n)],u=[i];if(a.length%2!=0)throw new u_(s_.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(BP(t,a[c])),u.push(a[c+1]);for(var l=[],f=bb.empty(),h=s.length-1;h>=0;--h)if(!HP(l,s[h])){var d=s[h],p=u[h];p=_o(p);var v=o.da(d);if(p instanceof IP)l.push(d);else{var m=FP(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new zw(l);return new bP(f,y,o.fieldTransforms)}function LP(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return FP(n,e.ya(r?4:3,t))}function FP(e,t){if(UP(e=_o(e)))return VP("Unsupported field value:",t,e),jP(e,t);if(e instanceof gP)return function(e,t){if(!xP(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=cn(e);try{for(a.s();!(n=a.n()).done;){var o=FP(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=_o(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Fx(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=x_.fromDate(e);return{timestampValue:zE(t.serializer,n)}}if(e instanceof x_){var r=new x_(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:zE(t.serializer,r)}}if(e instanceof kP)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof mP)return{bytesValue:WE(t.serializer,e._byteString)};if(e instanceof XR){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:KE(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(HR(e)))}(e,t)}function jP(e,t){var n={};return Lw(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Mw(e,(function(e,r){var i=FP(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function UP(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof x_||e instanceof kP||e instanceof mP||e instanceof XR||e instanceof gP)}function VP(e,t,n){if(!UP(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=HR(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function BP(e,t,n){if((t=_o(t))instanceof yP)return t._internalPath;if("string"==typeof t)return zP(e,t);throw WP("Field path arguments must be of type string or ",e,!1,void 0,n)}var qP=new RegExp("[~\\*/\\[\\]]");function zP(e,t,n){if(t.search(qP)>=0)throw WP("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return x(yP,u(t.split(".")))._internalPath}catch(r){throw WP("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function WP(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new u_(s_.INVALID_ARGUMENT,s+e+u)}function HP(e,t){return e.some((function(e){return e.isEqual(t)}))}var GP=function(){function e(t,n,r,i,a){c(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return f(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new XR(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new KP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(YP("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),KP=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){return Gs(p(n.prototype),"data",this).call(this)}}]),n}(GP);function YP(e,t){return"string"==typeof t?zP(e,t):t instanceof yP?t._internalPath:t._delegate._internalPath}function QP(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new u_(s_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $P=f((function e(){c(this,e)})),XP=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n)}($P);function JP(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof $P&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof eD})).length,n=e.filter((function(e){return e instanceof ZP})).length;if(t>1||t>0&&n>0)throw new u_(s_.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=cn(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;e=u._apply(e)}}catch(c){s.e(c)}finally{s.f()}return e}var ZP=function(e){d(n,e);var t=k(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return f(n,[{key:"_apply",value:function(e){var t=this._parse(e);return hD(e._query,t),new JR(e.firestore,e.converter,hx(e._query,t))}},{key:"_parse",value:function(e){var t=TP(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new u_(s_.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){fD(o,a);var u,c=[],l=cn(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(lD(r,e,f))}}catch(h){l.e(h)}finally{l.f()}s={arrayValue:{values:c}}}else s=lD(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||fD(o,a),s=LP(n,"where",o,"in"===a||"not-in"===a);return Pb.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(XP);var eD=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return f(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Db.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=cn(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;hD(r,a),r=hx(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new JR(e.firestore,e.converter,hx(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}($P);var tD=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return f(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new u_(s_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new u_(s_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ib(t,n);return function(e,t){if(null===sx(e)){var n=ux(e);null!==n&&dD(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new JR(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new rx(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(XP);var nD=function(e){d(n,e);var t=k(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return f(n,[{key:"_apply",value:function(e){return new JR(e.firestore,e.converter,dx(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(XP);var rD=function(e){d(n,e);var t=k(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return f(n,[{key:"_apply",value:function(e){var t=cD(e,this.type,this._docOrFields,this._inclusive);return new JR(e.firestore,e.converter,function(e,t){return new rx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(XP);function iD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rD._create("startAt",t,!0)}function aD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rD._create("startAfter",t,!1)}var oD=function(e){d(n,e);var t=k(n);function n(e,r,i){var a;return c(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return f(n,[{key:"_apply",value:function(e){var t=cD(e,this.type,this._docOrFields,this._inclusive);return new JR(e.firestore,e.converter,function(e,t){return new rx(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(XP);function sD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oD._create("endBefore",t,!1)}function uD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return oD._create("endAt",t,!0)}function cD(e,t,n,r){if(n[0]=_o(n[0]),n[0]instanceof GP)return function(e,t,n,r,i){if(!r)throw new u_(s_.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=cn(lx(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(lb(t,r.key));else{var c=r.data.field(u.field);if($w(c))throw new u_(s_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new u_(s_.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new Sb(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=TP(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new u_(s_.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new u_(s_.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!cx(e)&&-1!==c.indexOf("/"))throw new u_(s_.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(T_.fromString(c));if(!N_.isDocumentKey(l))throw new u_(s_.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new N_(l);s.push(lb(t,f))}else{var h=LP(n,r,c);s.push(h)}}return new Sb(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function lD(e,t,n){if("string"==typeof(n=_o(n))){if(""===n)throw new u_(s_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cx(t)&&-1!==n.indexOf("/"))throw new u_(s_.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(T_.fromString(n));if(!N_.isDocumentKey(r))throw new u_(s_.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return lb(e,new N_(r))}if(n instanceof XR)return lb(e,n._key);throw new u_(s_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(HR(n),"."))}function fD(e,t){if(!Array.isArray(e)||0===e.length)throw new u_(s_.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function hD(e,t){if(t.isInequality()){var n=ux(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new u_(s_.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=sx(e);null!==i&&dD(e,r,i)}var a=function(e,t){var n,r=cn(e);try{for(r.s();!(n=r.n()).done;){var i,a=cn(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){r.e(s)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new u_(s_.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new u_(s_.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function dD(e,t,n){if(!n.isEqual(t))throw new u_(s_.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var pD=function(){function e(){c(this,e)}return f(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(rb(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yw(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qw(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw i_()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Mw(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new kP(Yw(e.latitude),Yw(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Xw(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Jw(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Kw(e);return new x_(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=T_.fromString(e);a_(yS(n));var r=new eb(n.get(1),n.get(3)),i=new N_(n.popFirst(5));return r.isEqual(t)||t_("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function vD(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var mD=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new mP(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new XR(this.firestore,null,t)}}]),n}(pD);var yD=function(){function e(t,n){c(this,e),this.hasPendingWrites=t,this.fromCache=n}return f(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),gD=function(e){d(n,e);var t=k(n);function n(e,r,i,a,o,s){var u;return c(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return f(n,[{key:"exists",value:function(){return Gs(p(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new kD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(YP("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(GP),kD=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Gs(p(n.prototype),"data",this).call(this,e)}}]),n}(gD),_D=function(){function e(t,n,r,i){c(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new yD(i.hasPendingWrites,i.fromCache),this.query=r}return f(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new kD(n._firestore,n._userDataWriter,r.key,r,new yD(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new u_(s_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new kD(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yD(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new kD(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yD(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:wD(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function wD(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return i_()}}function bD(e,t){return e instanceof gD&&t instanceof gD?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof _D&&t instanceof _D&&e._firestore===t._firestore&&rP(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var xD=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new mP(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new XR(this.firestore,null,t)}}]),n}(pD);function ED(e){e=GR(e,XR);var t=GR(e.firestore,sP),n=uP(t),r=new xD(t);return function(e,t){var n=new c_;return e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function r(){return Pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Oe(Pe().mark((function e(t,n,r){var i,a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=o_(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new u_(s_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=HI(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,PR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new gD(t,r,e._key,n,new yD(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function SD(e){e=GR(e,JR);var t=GR(e.firestore,sP),n=uP(t),r=new xD(t);return function(e,t){var n=new c_;return e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function r(){return Pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Oe(Pe().mark((function e(t,n,r){var i,a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wC(t,n,!0);case 3:i=e.sent,a=new fN(n,i.ir),o=a.sc(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=HI(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,PR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new _D(t,r,e,n)}))}function TD(e,t,n){e=GR(e,XR);var r=GR(e.firestore,sP),i=vD(e.converter,t,n);return RD(r,[CP(TP(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Jx.none())])}function CD(e,t,n){e=GR(e,XR);for(var r=GR(e.firestore,sP),i=TP(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return RD(r,[("string"==typeof(t=_o(t))||t instanceof yP?MP(i,"updateDoc",e._key,t,n,o):AP(i,"updateDoc",e._key,t)).toMutation(e._key,Jx.exists(!0))])}function ID(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=_o(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||aP(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(aP(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof XR)l=GR(e.firestore,sP),f=ax(e._key.path),c={next:function(t){n[u]&&n[u](PD(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=GR(e,JR);l=GR(p.firestore,sP),f=p._query;var v=new xD(l);c={next:function(e){n[u]&&n[u](new _D(l,v,p,e))},error:n[u+1],complete:n[u+2]},QP(e._query)}return function(e,t,n,r){var i=new mR(r),a=new iN(t,i,n);return e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=XI,t.next=3,MR(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ZI,t.next=3,MR(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(uP(l),f,h,c)}function ND(e,t){return function(e,t){var n=new mR(t);return e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){o_(e).ku.add(t),t.next()},t.next=3,MR(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){o_(e).ku.delete(t)},t.next=3,MR(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(uP(e=GR(e,sP)),aP(t)?t:{next:t})}function RD(e,t){return function(e,t){var n=new c_;return e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function r(){return Pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=wN,r.next=3,OR(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(uP(e),t)}function PD(e,t,n){var r=n.docs.get(t._key),i=new xD(e);return new gD(e,i,t._key,r,new yD(n.hasPendingWrites,n.fromCache),t.converter)}var DD={maxAttempts:5},OD=function(){function e(t,n){c(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=TP(t)}return f(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=AD(e,this._firestore),i=vD(r.converter,t,n),a=CP(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Jx.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=AD(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=_o(t))||t instanceof yP?MP(this._dataReader,"WriteBatch.update",i._key,t,n,o):AP(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Jx.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=AD(e,this._firestore);return this._mutations=this._mutations.concat(new dE(t._key,Jx.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new u_(s_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function AD(e,t){if((e=_o(e)).firestore!==t)throw new u_(s_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var MD=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,r))._firestore=e,i}return f(n,[{key:"get",value:function(e){var t=this,r=AD(e,this._firestore),i=new xD(this._firestore);return Gs(p(n.prototype),"get",this).call(this,e).then((function(e){return new gD(t._firestore,i,r._key,e._document,new yD(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){c(this,e),this._firestore=t,this._transaction=n,this._dataReader=TP(t)}return f(e,[{key:"get",value:function(e){var t=this,n=AD(e,this._firestore),r=new mD(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return i_();var i=e[0];if(i.isFoundDocument())return new GP(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new GP(t._firestore,r,n._key,null,n.converter);throw i_()}))}},{key:"set",value:function(e,t,n){var r=AD(e,this._firestore),i=vD(r.converter,t,n),a=CP(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=AD(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=_o(t))||t instanceof yP?MP(this._dataReader,"Transaction.update",i._key,t,n,o):AP(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=AD(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function LD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new PP("arrayUnion",t)}function FD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new DP("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Xk=e}(ps),ss(new wo("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new sP(new d_(e.getProvider("auth-internal")),new y_(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new u_(s_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eb(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),_s(Qk,"3.13.0",e),_s(Qk,"3.13.0","esm2017")}();function jD(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new u_("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function UD(){if("undefined"===typeof Uint8Array)throw new u_("unimplemented","Uint8Arrays are not available in this environment.")}function VD(){if("undefined"==typeof atob)throw new u_("unimplemented","Blobs are unavailable in Firestore in this environment.")}var BD=function(){function e(t){c(this,e),this._delegate=t}return f(e,[{key:"toBase64",value:function(){return VD(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return UD(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return VD(),new e(mP.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return UD(),new e(mP.fromUint8Array(t))}}]),e}();function qD(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=cn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var zD=function(){function e(){c(this,e)}return f(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){vP(e=GR(e,sP));var n=uP(e);if(n._uninitializedComponentsProvider)throw new u_(s_.FAILED_PRECONDITION,"SDK cache is already specified.");n_("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new pR;return lP(n,i,new hR(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){vP(e=GR(e,sP));var t=uP(e);if(t._uninitializedComponentsProvider)throw new u_(s_.FAILED_PRECONDITION,"SDK cache is already specified.");n_("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new pR;return lP(t,r,new dR(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new u_(s_.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new c_;return e._queue.enqueueAndForgetEvenWhileRestricted(Oe(Pe().mark((function n(){return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H_.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,H_.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(oC(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),WD=function(){function e(t,n,r){var i=this;c(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof eb||(this._appCompat=t)}return f(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||n_("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$R(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return fP(this._delegate)}},{key:"disableNetwork",value:function(){return hP(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&qR("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new c_;return e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function n(){return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=DN,n.next=3,OR(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(uP(GR(this._delegate,sP)))}},{key:"onSnapshotsInSync",value:function(e){return ND(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new u_("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new iO(this,eP(this._delegate,e))}catch(kY){throw $D(kY,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new QD(this,tP(this._delegate,e))}catch(kY){throw $D(kY,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new tO(this,function(e,t){if(e=GR(e,QR),BR("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new u_(s_.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new JR(e,null,function(e){return new rx(T_.emptyPath(),e)}(t))}(this._delegate,e))}catch(kY){throw $D(kY,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=GR(e,sP);var r=Object.assign(Object.assign({},DD),n);return function(e){if(e.maxAttempts<1)throw new u_(s_.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new c_;return e.asyncQueue.enqueueAndForget(Oe(Pe().mark((function i(){var a;return Pe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,AR(e);case 2:a=i.sent,new kR(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(uP(e),(function(n){return t(new MD(e,n))}),r)}(this._delegate,(function(n){return e(new GD(t,n))}))}},{key:"batch",value:function(){var e=this;return uP(this._delegate),new KD(new OD(this._delegate,(function(t){return RD(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return dP(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return pP(this._delegate,e).then((function(e){return e?new tO(t,e):null}))}}]),e}(),HD=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new BD(new mP(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return QD.forKey(t,this.firestore,null)}}]),n}(pD);var GD=function(){function e(t,n){c(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new HD(t)}return f(e,[{key:"get",value:function(e){var t=this,n=aO(e);return this._delegate.get(n).then((function(e){return new ZD(t._firestore,new gD(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=aO(e);return n?(jD("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=aO(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=aO(e);return this._delegate.delete(t),this}}]),e}(),KD=function(){function e(t){c(this,e),this._delegate=t}return f(e,[{key:"set",value:function(e,t,n){var r=aO(e);return n?(jD("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=aO(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=aO(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),YD=function(){function e(t,n,r){c(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return f(e,[{key:"fromFirestore",value:function(e,t){var n=new kD(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eO(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new HD(t),n),i.set(n,a)),a}}]),e}();YD.INSTANCES=new WeakMap;var QD=function(){function e(t,n){c(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new HD(t)}return f(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new iO(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new iO(this.firestore,eP(this._delegate,e))}catch(kY){throw $D(kY,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=_o(e))instanceof XR&&nP(this._delegate,e)}},{key:"set",value:function(e,t){t=jD("DocumentReference.set",t);try{return t?TD(this._delegate,e,t):TD(this._delegate,e)}catch(kY){throw $D(kY,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?CD(this._delegate,e):CD.apply(void 0,[this._delegate,e,t].concat(r))}catch(kY){throw $D(kY,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return RD(GR((e=this._delegate).firestore,sP),[new dE(e._key,Jx.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=XD(n),a=JD(n,(function(t){return new ZD(e.firestore,new gD(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return ID(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?ED(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=GR(e,XR);var t=GR(e.firestore,sP);return FR(uP(t),e._key,{source:"server"}).then((function(n){return PD(t,e,n)}))}(this._delegate):function(e){e=GR(e,XR);var t=GR(e.firestore,sP);return FR(uP(t),e._key).then((function(n){return PD(t,e,n)}))}(this._delegate)).then((function(e){return new ZD(t.firestore,new gD(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(YD.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new u_("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new XR(n._delegate,r,new N_(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new XR(n._delegate,r,t))}}]),e}();function $D(e,t,n){return e.message=e.message.replace(t,n),e}function XD(e){var t,n=cn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!qD(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function JD(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=qD(e[0])?e[0]:qD(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ZD=function(){function e(t,n){c(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"ref",get:function(){return new QD(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return bD(this._delegate,e._delegate)}}]),e}(),eO=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||i_(),t}}]),n}(ZD),tO=function(){function e(t,n){c(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new HD(t)}return f(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,JP(this._delegate,function(e,t,n){var r=t,i=YP("where",e);return ZP._create(i,r,n)}(t,n,r)))}catch(kY){throw $D(kY,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,JP(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=YP("orderBy",e);return tD._create(n,t)}(t,n)))}catch(kY){throw $D(kY,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,JP(this._delegate,(KR("limit",n=t),nD._create("limit",n,"F"))))}catch(kY){throw $D(kY,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,JP(this._delegate,(KR("limitToLast",n=t),nD._create("limitToLast",n,"L"))))}catch(kY){throw $D(kY,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,JP(this._delegate,iD.apply(void 0,arguments)))}catch(kY){throw $D(kY,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,JP(this._delegate,aD.apply(void 0,arguments)))}catch(kY){throw $D(kY,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,JP(this._delegate,sD.apply(void 0,arguments)))}catch(kY){throw $D(kY,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,JP(this._delegate,uD.apply(void 0,arguments)))}catch(kY){throw $D(kY,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return rP(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?SD(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=GR(e,JR);var t=GR(e.firestore,sP),n=uP(t),r=new xD(t);return jR(n,e._query,{source:"server"}).then((function(n){return new _D(t,r,e,n)}))}(this._delegate):function(e){e=GR(e,JR);var t=GR(e.firestore,sP),n=uP(t),r=new xD(t);return QP(e._query),jR(n,e._query).then((function(n){return new _D(t,r,e,n)}))}(this._delegate)).then((function(e){return new rO(t.firestore,new _D(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=XD(n),a=JD(n,(function(t){return new rO(e.firestore,new _D(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return ID(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(YD.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),nO=function(){function e(t,n){c(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new eO(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),rO=function(){function e(t,n){c(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"query",get:function(){return new tO(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new eO(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new nO(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new eO(n._firestore,r))}))}},{key:"isEqual",value:function(e){return bD(this._delegate,e._delegate)}}]),e}(),iO=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return f(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new QD(this.firestore,e):null}},{key:"doc",value:function(e){try{return new QD(this.firestore,void 0===e?tP(this._delegate):tP(this._delegate,e))}catch(kY){throw $D(kY,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=GR(e.firestore,sP),r=tP(e),i=vD(e.converter,t);return RD(n,[CP(TP(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Jx.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new QD(t.firestore,e)}))}},{key:"isEqual",value:function(e){return nP(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(YD.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(tO);function aO(e){return GR(e,XR)}var oO=function(){function e(){c(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=x(yP,n)}return f(e,[{key:"isEqual",value:function(e){return(e=_o(e))instanceof yP&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(I_.keyField().canonicalString())}}]),e}(),sO=function(){function e(t){c(this,e),this._delegate=t}return f(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new RP("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new IP("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=LD.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=FD.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new OP("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),uO={Firestore:WD,GeoPoint:kP,Timestamp:x_,Blob:BD,Transaction:GD,WriteBatch:KD,DocumentReference:QD,DocumentSnapshot:ZD,Query:tO,QueryDocumentSnapshot:eO,QuerySnapshot:rO,CollectionReference:iO,FieldPath:oO,FieldValue:sO,setLogLevel:function(e){var t;t=e,Jk.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new wo("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},uO)))}(e,(function(e,t){return new WD(e,t,new zD)})),e.registerVersion("@firebase/firestore-compat","0.3.12")}(Ws);var cO="@firebase/database",lO="0.14.4",fO="";function hO(e){fO=e}var dO=function(){function e(t){c(this,e),this.domStorage_=t,this.prefix_="firebase:"}return f(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Za(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ja(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),pO=function(){function e(){c(this,e),this.cache_={},this.isInMemoryStorage=!0}return f(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return to(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),vO=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new dO(t)}}catch(kY){}return new pO},mO=vO("localStorage"),yO=vO("sessionStorage"),gO=new Do("@firebase/database"),kO=function(){var e=1;return function(){return e++}}(),_O=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Ta(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new lo;n.update(t);var r=n.digest();return Na.encodeByteArray(r)},wO=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Za(r):r,t+=" "}return t},bO=null,xO=!0,EO=function(e,t){Ta(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(gO.logLevel=So.VERBOSE,bO=gO.log.bind(gO),t&&yO.set("logging_enabled",!0)):"function"===typeof e?bO=e:(bO=null,yO.remove("logging_enabled"))},SO=function(){if(!0===xO&&(xO=!1,null===bO&&!0===yO.get("logging_enabled")&&EO(!0)),bO){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=wO.apply(null,t);bO(r)}},TO=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];SO.apply(void 0,[e].concat(n))}},CO=function(){var e="FIREBASE INTERNAL ERROR: "+wO.apply(void 0,arguments);gO.error(e)},IO=function(){var e="FIREBASE FATAL ERROR: ".concat(wO.apply(void 0,arguments));throw gO.error(e),new Error(e)},NO=function(){var e="FIREBASE WARNING: "+wO.apply(void 0,arguments);gO.warn(e)},RO=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},PO="[MIN_NAME]",DO="[MAX_NAME]",OO=function(e,t){if(e===t)return 0;if(e===PO||t===DO)return-1;if(t===PO||e===DO)return 1;var n=BO(e),r=BO(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},AO=function(e,t){return e===t?0:e<t?-1:1},MO=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Za(t))},LO=function e(t){if("object"!==typeof t||null===t)return Za(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Za(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},FO=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function jO(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var UO=function(e){Ta(!RO(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var VO=new RegExp("^-?(0*)\\d{1,10}$"),BO=function(e){if(VO.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},qO=function(e){try{e()}catch(kY){setTimeout((function(){var t=kY.stack||"";throw NO("Exception was thrown by user callback.",t),kY}),Math.floor(0))}},zO=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},WO=function(){function e(t,n){var r=this;c(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return f(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){NO('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),HO=function(){function e(t,n,r){var i=this;c(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return f(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(SO("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',NO(e)}}]),e}(),GO=function(){function e(t){c(this,e),this.accessToken=t}return f(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();GO.OWNER="owner";var KO="5",YO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,QO="websocket",$O="long_polling",XO=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];c(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mO.get("host:"+t)||this._host}return f(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mO.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function JO(e,t,n){var r;if(Ta("string"===typeof t,"typeof type must == string"),Ta("object"===typeof n,"typeof params must == object"),t===QO)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==$O)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return jO(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var ZO=function(){function e(){c(this,e),this.counters_={}}return f(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;to(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Aa(void 0,this.counters_)}}]),e}(),eA={},tA={};function nA(e){var t=e.toString();return eA[t]||(eA[t]=new ZO),eA[t]}var rA=function(){function e(t){c(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return f(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&qO((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),iA="start",aA="close",oA=function(){function e(t,n,r,i,a,o,s){var u=this;c(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=TO(t),this.stats_=nA(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),JO(n,$O,e)}}return f(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new rA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ga()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new sA((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===iA)n.id=a,n.password=o;else{if(i!==aA)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=KO,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&YO.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Za(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Pa(t),r=FO(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Ga()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Za(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Ga()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),sA=function(){function e(t,n,r,i){if(c(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ga())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=kO(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(kY){SO("frame writing exception"),kY.stack&&SO(kY.stack),SO(kY)}}}return f(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Ga()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){SO("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(kY){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||SO("No IE domain setting required")}catch(kY){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),uA=null;"undefined"!==typeof MozWebSocket?uA=MozWebSocket:"undefined"!==typeof WebSocket&&(uA=WebSocket);var cA=function(){function e(t,n,r,i,a,o,s){c(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=TO(this.connId),this.stats_=nA(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return f(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mO.set("previous_websocket_failure",!0);try{var r;if(Ga()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(KO,"/").concat(fO,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/react-firebase-chatting-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new uA(this.connURL,[],r)}catch(kY){this.log_("Error instantiating WebSocket.");var s=kY.message||kY.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){mO.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Ja(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ta(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Za(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=FO(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(kY){this.log_("Exception thrown from WebSocket.send():",kY.message||kY.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=KO,!Ga()&&"undefined"!==typeof location&&location.hostname&&YO.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),JO(e,QO,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==uA&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return mO.isInMemoryStorage||!0===mO.get("previous_websocket_failure")}}]),e}();cA.responsesRequiredToBeHealthy=2,cA.healthyTimeout=3e4;var lA=function(){function e(t){c(this,e),this.initTransports_(t)}return f(e,[{key:"initTransports_",value:function(t){var n=cA&&cA.isAvailable(),r=n&&!cA.previouslyFailed();if(t.webSocketOnly&&(n||NO("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[cA];else{var i,a=this.transports_=[],o=cn(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[oA,cA]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();lA.globalTransportInitialized_=!1;var fA=function(){function e(t,n,r,i,a,o,s,u,l,f){c(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=TO("c:"+this.id+":"),this.transportManager_=new lA(n),this.log_("Connection created"),this.start_()}return f(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=zO((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=MO("t",e),n=MO("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=MO("t",e),n=MO("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=MO("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?CO("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):CO("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),KO!==n&&NO("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),zO((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zO((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mO.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),hA=function(){function e(){c(this,e)}return f(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),dA=function(){function e(t){c(this,e),this.allowedEvents_=t,this.listeners_={},Ta(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return f(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=u(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ta(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),pA=function(e){d(n,e);var t=k(n);function n(){var e;return c(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ba()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return f(n,[{key:"getInitialEvent",value:function(e){return Ta("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(dA),vA=function(){function e(t,n){if(c(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return f(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function mA(){return new vA("")}function yA(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function gA(e){return e.pieces_.length-e.pieceNum_}function kA(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new vA(e.pieces_,t)}function _A(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function wA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function bA(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new vA(t,0)}function xA(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof vA)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new vA(n,0)}function EA(e){return e.pieceNum_>=e.pieces_.length}function SA(e,t){var n=yA(e),r=yA(t);if(null===n)return t;if(n===r)return SA(kA(e),kA(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function TA(e,t){for(var n=wA(e,0),r=wA(t,0),i=0;i<n.length&&i<r.length;i++){var a=OO(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function CA(e,t){if(gA(e)!==gA(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function IA(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(gA(e)>gA(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var NA=f((function e(t,n){c(this,e),this.errorPrefix_=n,this.parts_=wA(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ko(this.parts_[r]);RA(this)}));function RA(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+PA(e))}function PA(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var DA=function(e){d(n,e);var t=k(n);function n(){var e,r,i;return c(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return f(n,[{key:"getInitialEvent",value:function(e){return Ta("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(dA),OA=1e3,AA=function(e){d(n,e);var t=k(n);function n(e,r,i,a,o,s,u,l){var f;if(c(this,n),(f=t.call(this)).repoInfo_=e,f.applicationId_=r,f.onDataUpdate_=i,f.onConnectStatus_=a,f.onServerInfoUpdate_=o,f.authTokenProvider_=s,f.appCheckTokenProvider_=u,f.authOverride_=l,f.id=n.nextPersistentConnectionId_++,f.log_=TO("p:"+f.id+":"),f.interruptReasons_={},f.listens=new Map,f.outstandingPuts_=[],f.outstandingGets_=[],f.outstandingPutCount_=0,f.outstandingGetCount_=0,f.onDisconnectRequestQueue_=[],f.connected_=!1,f.reconnectDelay_=OA,f.maxReconnectDelay_=3e5,f.securityDebugCallback_=null,f.lastSessionId=null,f.establishConnectionTimer_=null,f.visible_=!1,f.requestCBHash_={},f.requestNumber_=0,f.realtime_=null,f.authToken_=null,f.appCheckToken_=null,f.forceTokenRefresh_=!1,f.invalidAuthTokenCount_=0,f.invalidAppCheckTokenCount_=0,f.firstConnection_=!0,f.lastConnectionAttemptTime_=null,f.lastConnectionEstablishedTime_=null,l&&!Ga())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return DA.getInstance().on("visible",f.onVisible_,y(f)),-1===e.host.indexOf("fblocal")&&pA.getInstance().on("online",f.onOnline_,y(f)),f}return f(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Za(i)),Ta(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new ja,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Ta(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ta(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=eo(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=eo(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ta(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Za(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):CO("Unrecognized action received from server: "+Za(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ta(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=OA,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=OA,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=OA),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Oe(Pe().mark((function e(){var t,r,i,a,o,s,u,c,l,f,h,d,p,v,m=this;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},l=function(e){Ta(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:h=e.sent,d=b(h,2),p=d[0],v=d[1],s?SO("getToken() completed but was canceled"):(SO("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,u=new fA(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){NO(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&NO(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){SO("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){SO("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ro(this.interruptReasons_)&&(this.reconnectDelay_=OA,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return LO(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new vA(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){SO("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){SO("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=cn(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=cn(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Ga()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+fO.replace(/\./g,"-")]=1,Ba()?e["framework.cordova"]=1:Wa()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=pA.getInstance().currentlyOnline();return ro(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&to(e,"w")){var n=no(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();NO("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(hA);AA.nextPersistentConnectionId_=0,AA.nextConnectionId_=0;var MA,LA=function(){function e(t,n){c(this,e),this.name=t,this.node=n}return f(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),FA=function(){function e(){c(this,e)}return f(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new LA(PO,e),r=new LA(PO,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return LA.MIN}}]),e}(),jA=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){return OO(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Ca("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return LA.MIN}},{key:"maxPost",value:function(){return new LA(DO,MA)}},{key:"makePost",value:function(e,t){return Ta("string"===typeof e,"KeyIndex indexValue must always be a string."),new LA(e,MA)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return MA},set:function(e){MA=e}}]),n}(FA),UA=new jA,VA=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;c(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return f(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),BA=function(){function e(t,n,r,i,a){c(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:WA.EMPTY_NODE,this.right=null!=a?a:WA.EMPTY_NODE}return f(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return WA.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return WA.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();BA.RED=!0,BA.BLACK=!1;var qA,zA=function(){function e(){c(this,e)}return f(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new BA(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),WA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;c(this,e),this.comparator_=t,this.root_=n}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,BA.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,BA.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new VA(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new VA(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new VA(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new VA(this.root_,null,this.comparator_,!0,e)}}]),e}();function HA(e,t){return OO(e.name,t.name)}function GA(e,t){return OO(e,t)}WA.EMPTY_NODE=new zA;var KA,YA,QA,$A=function(e){return"number"===typeof e?"number:"+UO(e):"string:"+e},XA=function(e){if(e.isLeafNode()){var t=e.val();Ta("string"===typeof t||"number"===typeof t||"object"===typeof t&&to(t,".sv"),"Priority must be a string or number.")}else Ta(e===qA||e.isEmpty(),"priority of unexpected type.");Ta(e===qA||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},JA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;c(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ta(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),XA(this.priorityNode_)}return f(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return EA(t)?this:".priority"===yA(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=yA(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ta(".priority"!==r||1===gA(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(kA(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+$A(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?UO(this.value_):this.value_,this.lazyHash_=_O(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ta(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Ta(i>=0,"Unknown leaf type: "+n),Ta(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return KA},set:function(e){KA=e}}]),e}();JA.VALUE_TYPE_ORDER=["object","boolean","number","string"];var ZA,eM,tM=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?OO(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return LA.MIN}},{key:"maxPost",value:function(){return new LA(DO,new JA("[PRIORITY-POST]",QA))}},{key:"makePost",value:function(e,t){var n=YA(e);return new LA(t,new JA("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(FA),nM=new tM,rM=Math.log(2),iM=function(){function e(t){c(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/rM,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return f(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),aM=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new BA(o,a.node,BA.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new BA(o,a.node,BA.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],f=n?n(l):l;u(new BA(f,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?s(f,BA.BLACK):(s(f,BA.BLACK),s(f,BA.RED))}return a}(new iM(e.length));return new WA(r||t,a)},oM={},sM=function(){function e(t,n){c(this,e),this.indexes_=t,this.indexSet_=n}return f(e,[{key:"get",value:function(e){var t=no(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof WA?t:null}},{key:"hasIndex",value:function(e){return to(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ta(t!==UA,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(LA.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?aM(i,t.getCompare()):oM;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(io(this.indexes_,(function(e,i){var a=no(r.indexSet_,i);if(Ta(a,"Missing index implementation for "+i),e===oM){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(LA.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),aM(o,a.getCompare())}return oM}var c=n.get(t.name),l=e;return c&&(l=l.remove(new LA(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(io(this.indexes_,(function(e){if(e===oM)return e;var r=n.get(t.name);return r?e.remove(new LA(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ta(oM&&nM,"ChildrenNode.ts has not been loaded"),ZA=ZA||new e({".priority":oM},{".priority":nM})}}]),e}(),uM=function(){function e(t,n,r){c(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&XA(this.priorityNode_),this.children_.isEmpty()&&Ta(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return f(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||eM}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?eM:t}},{key:"getChild",value:function(e){var t=yA(e);return null===t?this:this.getImmediateChild(t).getChild(kA(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ta(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new LA(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?eM:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=yA(e);if(null===n)return t;Ta(".priority"!==yA(e)||1===gA(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(kA(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(nM,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+$A(this.getPriority().val())+":"),this.forEachChild(nM,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":_O(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new LA(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new LA(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new LA(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,LA.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,LA.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===cM?-1:0}},{key:"withIndex",value:function(t){if(t===UA||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===UA||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(nM),r=t.getIterator(nM),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===UA?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return eM||(eM=new e(new WA(GA),null,sM.Default))}}]),e}();uM.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var cM=new(function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.call(this,new WA(GA),uM.EMPTY_NODE,sM.Default)}return f(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return uM.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(uM));Object.defineProperties(LA,{MIN:{value:new LA(PO,uM.EMPTY_NODE)},MAX:{value:new LA(DO,cM)}}),jA.__EMPTY_NODE=uM.EMPTY_NODE,JA.__childrenNodeConstructor=uM,qA=cM,function(e){QA=e}(cM);function lM(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return uM.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ta(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new JA(n,lM(t))}if(e instanceof Array){var r=uM.EMPTY_NODE;return jO(e,(function(t,n){if(to(e,t)&&"."!==t.substring(0,1)){var i=lM(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(lM(t))}var i=[],a=!1,o=e;if(jO(o,(function(e,t){if("."!==e.substring(0,1)){var n=lM(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new LA(e,n)))}})),0===i.length)return uM.EMPTY_NODE;var s=aM(i,HA,(function(e){return e.name}),GA);if(a){var u=aM(i,nM.getCompare());return new uM(s,lM(t),new sM({".priority":u},{".priority":nM}))}return new uM(s,lM(t),sM.Default)}!function(e){YA=e}(lM);var fM=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this)).indexPath_=e,Ta(!EA(e)&&".priority"!==yA(e),"Can't create PathIndex with empty path or .priority key"),r}return f(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?OO(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=lM(e),r=uM.EMPTY_NODE.updateChild(this.indexPath_,n);return new LA(t,r)}},{key:"maxPost",value:function(){var e=uM.EMPTY_NODE.updateChild(this.indexPath_,cM);return new LA(DO,e)}},{key:"toString",value:function(){return wA(this.indexPath_,0).join("/")}}]),n}(FA),hM=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?OO(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return LA.MIN}},{key:"maxPost",value:function(){return LA.MAX}},{key:"makePost",value:function(e,t){var n=lM(e);return new LA(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(FA),dM=new hM;function pM(e){return{type:"value",snapshotNode:e}}function vM(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function mM(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function yM(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var gM=function(){function e(t){c(this,e),this.index_=t}return f(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Ta(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(mM(t,o)):Ta(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(vM(t,n)):a.trackChildChange(yM(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(nM,(function(e,r){t.hasChild(e)||n.trackChildChange(mM(e,r))})),t.isLeafNode()||t.forEachChild(nM,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(yM(t,r,i))}else n.trackChildChange(vM(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?uM.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),kM=function(){function e(t){c(this,e),this.indexedFilter_=new gM(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return f(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new LA(t,n))||(n=uM.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=uM.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(uM.EMPTY_NODE);var i=this;return t.forEachChild(nM,(function(e,t){i.matches(new LA(e,t))||(r=r.updateImmediateChild(e,uM.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),_M=function(){function e(t){var n=this;c(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new kM(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return f(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new LA(t,n))||(n=uM.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=uM.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=uM.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(uM.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var c=s.getNext();u<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?u++:r=r.updateImmediateChild(c.name,uM.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;Ta(s.numChildren()===this.limit_,"");var u=new LA(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var f=s.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||s.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(yM(t,n,f)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(mM(t,f));var p=s.updateImmediateChild(t,uM.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(vM(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(mM(c.name,c.node)),i.trackChildChange(vM(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,uM.EMPTY_NODE)):e}}]),e}(),wM=function(){function e(){c(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nM}return f(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ta(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ta(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:PO}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ta(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ta(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:DO}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ta(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===nM}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function bM(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function xM(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function EM(e,t){var n=e.copy();return n.index_=t,n}function SM(e){var t,n={};if(e.isDefault())return n;if(e.index_===nM?t="$priority":e.index_===dM?t="$value":e.index_===UA?t="$key":(Ta(e.index_ instanceof fM,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Za(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=Za(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Za(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=Za(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+Za(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function TM(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==nM&&(t.i=e.index_.toString()),t}var CM=function(e){d(n,e);var t=k(n);function n(e,r,i,a){var o;return c(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=TO("p:rest:"),o.listens_={},o}return f(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=SM(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),no(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=SM(e._queryParams),r=e._path.toString(),i=new ja;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=b(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+so(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Ja(c.responseText)}catch(kY){NO("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&NO("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ta(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(hA),IM=function(){function e(){c(this,e),this.rootNode_=uM.EMPTY_NODE}return f(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function NM(){return{value:null,children:new Map}}function RM(e,t,n){if(EA(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=yA(t);e.children.has(r)||e.children.set(r,NM()),RM(e.children.get(r),t=kA(t),n)}}function PM(e,t){if(EA(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(nM,(function(t,n){RM(e,new vA(t),n)})),PM(e,t)}if(e.children.size>0){var r=yA(t);if(t=kA(t),e.children.has(r))PM(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function DM(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){DM(r,new vA(t.toString()+"/"+e),n)}))}var OM,AM=function(){function e(t){c(this,e),this.collection_=t,this.last_=null}return f(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&jO(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),MM=function(){function e(t,n){c(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new AM(t);var r=1e4+2e4*Math.random();zO(this.reportStats_.bind(this),Math.floor(r))}return f(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;jO(t,(function(t,i){i>0&&to(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),zO(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function LM(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(OM||(OM={}));var FM,jM=function(){function e(t,n,r){c(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=OM.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return f(e,[{key:"operationForChild",value:function(t){if(EA(this.path)){if(null!=this.affectedTree.value)return Ta(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new vA(t));return new e(mA(),n,this.revert)}return Ta(yA(this.path)===t,"operationForChild called for unrelated child."),new e(kA(this.path),this.affectedTree,this.revert)}}]),e}(),UM=function(){function e(t,n){c(this,e),this.source=t,this.path=n,this.type=OM.LISTEN_COMPLETE}return f(e,[{key:"operationForChild",value:function(t){return EA(this.path)?new e(this.source,mA()):new e(this.source,kA(this.path))}}]),e}(),VM=function(){function e(t,n,r){c(this,e),this.source=t,this.path=n,this.snap=r,this.type=OM.OVERWRITE}return f(e,[{key:"operationForChild",value:function(t){return EA(this.path)?new e(this.source,mA(),this.snap.getImmediateChild(t)):new e(this.source,kA(this.path),this.snap)}}]),e}(),BM=function(){function e(t,n,r){c(this,e),this.source=t,this.path=n,this.children=r,this.type=OM.MERGE}return f(e,[{key:"operationForChild",value:function(t){if(EA(this.path)){var n=this.children.subtree(new vA(t));return n.isEmpty()?null:n.value?new VM(this.source,mA(),n.value):new e(this.source,mA(),n)}return Ta(yA(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,kA(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),qM=function(){function e(t,n,r){c(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return f(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(EA(e))return this.isFullyInitialized()&&!this.filtered_;var t=yA(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),zM=f((function e(t){c(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function WM(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Ca("Should only compare child_ events.");var r=new LA(t.childName,t.snapshotNode),i=new LA(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function HM(e,t){return{eventCache:e,serverCache:t}}function GM(e,t,n,r){return HM(new qM(t,n,r),e.serverCache)}function KM(e,t,n,r){return HM(e.eventCache,new qM(t,n,r))}function YM(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function QM(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var $M=function(){return FM||(FM=new WA(AO)),FM},XM=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$M();c(this,e),this.value=t,this.children=n}return f(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:mA(),value:this.value};if(EA(e))return null;var n=yA(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(kA(e),t);return null!=i?{path:xA(new vA(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(EA(t))return this;var n=yA(t),r=this.children.get(n);return null!==r?r.subtree(kA(t)):new e(null)}},{key:"set",value:function(t,n){if(EA(t))return new e(n,this.children);var r=yA(t),i=(this.children.get(r)||new e(null)).set(kA(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(EA(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=yA(t),r=this.children.get(n);if(r){var i,a=r.remove(kA(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(EA(e))return this.value;var t=yA(e),n=this.children.get(t);return n?n.get(kA(e)):null}},{key:"setTree",value:function(t,n){if(EA(t))return n;var r,i=yA(t),a=(this.children.get(i)||new e(null)).setTree(kA(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(mA(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(xA(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,mA(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(EA(e))return null;var i=yA(e),a=this.children.get(i);return a?a.findOnPath_(kA(e),xA(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,mA(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(EA(t))return this;this.value&&r(n,this.value);var i=yA(t),a=this.children.get(i);return a?a.foreachOnPath_(kA(t),xA(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(mA(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(xA(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return jO(t,(function(e,t){n=n.set(new vA(e),t)})),n}}]),e}(),JM=function(){function e(t){c(this,e),this.writeTree_=t}return f(e,null,[{key:"empty",value:function(){return new e(new XM(null))}}]),e}();function ZM(e,t,n){if(EA(t))return new JM(new XM(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=SA(i,t);return a=a.updateChild(o,n),new JM(e.writeTree_.set(i,a))}var s=new XM(n),u=e.writeTree_.setTree(t,s);return new JM(u)}function eL(e,t,n){var r=e;return jO(n,(function(e,n){r=ZM(r,xA(t,e),n)})),r}function tL(e,t){if(EA(t))return JM.empty();var n=e.writeTree_.setTree(t,new XM(null));return new JM(n)}function nL(e,t){return null!=rL(e,t)}function rL(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(SA(n.path,t)):null}function iL(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(nM,(function(e,n){t.push(new LA(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new LA(e,n.value))})),t}function aL(e,t){if(EA(t))return e;var n=rL(e,t);return new JM(null!=n?new XM(n):e.writeTree_.subtree(t))}function oL(e){return e.writeTree_.isEmpty()}function sL(e,t){return uL(mA(),e.writeTree_,t)}function uL(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ta(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=uL(xA(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(xA(e,".priority"),r)),n}function cL(e,t){return xL(t,e)}function lL(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function fL(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ta(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&hL(s,r.path)?i=!1:IA(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=pL(e.allWrites,dL,mA()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=tL(e.visibleWrites,r.path):jO(r.children,(function(t){e.visibleWrites=tL(e.visibleWrites,xA(r.path,t))}));return!0}return!1}function hL(e,t){if(e.snap)return IA(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&IA(xA(e.path,n),t))return!0;return!1}function dL(e){return e.visible}function pL(e,t,n){for(var r=JM.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)IA(n,o)?r=ZM(r,s=SA(n,o),a.snap):IA(o,n)&&(s=SA(o,n),r=ZM(r,mA(),a.snap.getChild(s)));else{if(!a.children)throw Ca("WriteRecord should have .snap or .children");if(IA(n,o))r=eL(r,s=SA(n,o),a.children);else if(IA(o,n))if(EA(s=SA(o,n)))r=eL(r,mA(),a.children);else{var u=no(a.children,yA(s));if(u){var c=u.getChild(kA(s));r=ZM(r,mA(),c)}}}}}return r}function vL(e,t,n,r,i){if(r||i){var a=aL(e.visibleWrites,t);if(!i&&oL(a))return n;if(i||null!=n||nL(a,mA())){var o=pL(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(IA(e.path,t)||IA(t,e.path))}),t);return sL(o,n||uM.EMPTY_NODE)}return null}var s=rL(e.visibleWrites,t);if(null!=s)return s;var u=aL(e.visibleWrites,t);return oL(u)?n:null!=n||nL(u,mA())?sL(u,n||uM.EMPTY_NODE):null}function mL(e,t,n,r){return vL(e.writeTree,e.treePath,t,n,r)}function yL(e,t){return function(e,t,n){var r=uM.EMPTY_NODE,i=rL(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(nM,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=aL(e.visibleWrites,t);return n.forEachChild(nM,(function(e,t){var n=sL(aL(a,new vA(e)),t);r=r.updateImmediateChild(e,n)})),iL(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return iL(aL(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function gL(e,t,n,r){return function(e,t,n,r,i){Ta(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=xA(t,n);if(nL(e.visibleWrites,a))return null;var o=aL(e.visibleWrites,a);return oL(o)?i.getChild(n):sL(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function kL(e,t){return function(e,t){return rL(e.visibleWrites,t)}(e.writeTree,xA(e.treePath,t))}function _L(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=aL(e.visibleWrites,t),c=rL(u,mA());if(null!=c)s=c;else{if(null==n)return[];s=sL(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function wL(e,t,n){return function(e,t,n,r){var i=xA(t,n),a=rL(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?sL(aL(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function bL(e,t){return xL(xA(e.treePath,t),e.writeTree)}function xL(e,t){return{treePath:e,writeTree:t}}var EL=function(){function e(){c(this,e),this.changeMap=new Map}return f(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ta("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ta(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,yM(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,mM(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,vM(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ca("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,yM(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),SL=new(function(){function e(){c(this,e)}return f(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),TL=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return f(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new qM(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wL(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:QM(this.viewCache_),i=_L(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function CL(e,t,n,r,i){var a,o,s=new EL;if(n.type===OM.OVERWRITE){var u=n;u.source.fromUser?a=RL(e,t,u.path,u.snap,r,i,s):(Ta(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!EA(u.path),a=NL(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===OM.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=xA(n,r);PL(t,yA(c))&&(s=RL(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=xA(n,r);PL(t,yA(c))||(s=RL(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(Ta(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=OL(e,t,c.path,c.children,r,i,o,s))}else if(n.type===OM.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=kL(r,n))return t;var s,u=new TL(r,t,i),c=t.eventCache.getNode();if(EA(n)||".priority"===yA(n)){var l;if(t.serverCache.isFullyInitialized())l=mL(r,QM(t));else{var f=t.serverCache.getNode();Ta(f instanceof uM,"serverChildren would be complete if leaf node"),l=yL(r,f)}s=e.filter.updateFullNode(c,l,a)}else{var h=yA(n),d=wL(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(s=null!=d?e.filter.updateChild(c,h,d,kA(n),u,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,uM.EMPTY_NODE,kA(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=mL(r,QM(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=kL(r,mA()),GM(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=kL(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(EA(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return NL(e,t,n,u.getNode().getChild(n),i,a,s,o);if(EA(n)){var c=new XM(null);return u.getNode().forEachChild(UA,(function(e,t){c=c.set(new vA(e),t)})),OL(e,t,n,c,i,a,s,o)}return t}var l=new XM(null);return r.foreach((function(e,t){var r=xA(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),OL(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==OM.LISTEN_COMPLETE)throw Ca("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=KM(t,a.getNode(),a.isFullyInitialized()||EA(n),a.isFiltered());return IL(e,o,n,r,SL,i)}(e,t,n.path,r,s)}var f=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=YM(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(pM(YM(t)))}}(t,a,f),{viewCache:a,changes:f}}function IL(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=kL(r,n))return t;if(EA(n))if(Ta(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=QM(t),l=yL(r,c instanceof uM?c:uM.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=mL(r,QM(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=yA(n);if(".priority"===h){Ta(1===gA(n),"Can't have a priority with additional path components");var d=u.getNode(),p=gL(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=kA(n);if(u.isCompleteForChild(h)){s=t.serverCache.getNode();var y=gL(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(h).updateChild(m,y):u.getNode().getImmediateChild(h)}else v=wL(r,h,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),h,v,m,i,a):u.getNode()}}return GM(t,o,u.isFullyInitialized()||EA(n),e.filter.filtersNodes())}function NL(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(EA(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{var h=yA(n);if(!c.isCompleteForPath(n)&&gA(n)>1)return t;var d=kA(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);u=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,SL,null)}var v=KM(t,u,c.isFullyInitialized()||EA(n),l.filtersNodes());return IL(e,v,n,i,new TL(i,v,a),s)}function RL(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new TL(i,t,a);if(EA(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=GM(t,u,!0,e.filter.filtersNodes());else{var f=yA(n);if(".priority"===f)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=GM(t,u,c.isFullyInitialized(),c.isFiltered());else{var h,d=kA(n),p=c.getNode().getImmediateChild(f);if(EA(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===_A(d)&&v.getChild(bA(d)).isEmpty()?v:v.updateChild(d,r):uM.EMPTY_NODE}if(p.equals(h))s=t;else s=GM(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function PL(e,t){return e.eventCache.isCompleteForChild(t)}function DL(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function OL(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=EA(n)?r:new XM(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=DL(0,t.serverCache.getNode().getImmediateChild(n),r);c=NL(e,c,new vA(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var f=DL(0,t.serverCache.getNode().getImmediateChild(n),r);c=NL(e,c,new vA(n),f,i,a,o,s)}})),c}var AL,ML=function(){function e(t,n){c(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new gM(i.getIndex()),o=(r=i).loadsAllData()?new gM(r.getIndex()):r.hasLimit()?new _M(r):new kM(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,l=a.updateFullNode(uM.EMPTY_NODE,s.getNode(),null),f=o.updateFullNode(uM.EMPTY_NODE,u.getNode(),null),h=new qM(l,s.isFullyInitialized(),a.filtersNodes()),d=new qM(f,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=HM(d,h),this.eventGenerator_=new zM(this.query_)}return f(e,[{key:"query",get:function(){return this.query_}}]),e}();function LL(e,t){var n=QM(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!EA(t)&&!n.getImmediateChild(yA(t)).isEmpty())?n.getChild(t):null}function FL(e){return 0===e.eventRegistrations_.length}function jL(e,t,n){var r=[];if(n){Ta(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function UL(e,t,n,r){t.type===OM.MERGE&&null!==t.source.queryId&&(Ta(QM(e.viewCache_),"We should always have a full cache before handling merges"),Ta(YM(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=CL(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,Ta(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ta(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ta(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,VL(e,s.changes,s.viewCache.eventCache.getNode(),null)}function VL(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),WM(e,i,"child_removed",t,r,n),WM(e,i,"child_added",t,r,n),WM(e,i,"child_moved",a,r,n),WM(e,i,"child_changed",t,r,n),WM(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var BL,qL=f((function e(){c(this,e),this.views=new Map}));function zL(e){return 0===e.views.size}function WL(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Ta(null!=a,"SyncTree gave us an op for an invalid query."),UL(a,t,n,r)}var o,s=[],u=cn(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(UL(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function HL(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=mL(n,i?r:null),u=!1;s?u=!0:r instanceof uM?(s=yL(n,r),u=!1):(s=uM.EMPTY_NODE,u=!1);var c=HM(new qM(s,u,!1),new qM(r,i,!1));return new ML(t,c)}return o}function GL(e,t,n,r,i,a){var o=HL(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(nM,(function(e,t){r.push(vM(e,t))})),n.isFullyInitialized()&&r.push(pM(n.getNode())),VL(e,r,n.getNode(),t)}(o,n)}function KL(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=JL(e);if("default"===i){var u,c=cn(e.views.entries());try{for(c.s();!(u=c.n()).done;){var l=b(u.value,2),f=l[0],h=l[1];o=o.concat(jL(h,n,r)),FL(h)&&(e.views.delete(f),h.query._queryParams.loadsAllData()||a.push(h.query))}}catch(p){c.e(p)}finally{c.f()}}else{var d=e.views.get(i);d&&(o=o.concat(jL(d,n,r)),FL(d)&&(e.views.delete(i),d.query._queryParams.loadsAllData()||a.push(d.query)))}return s&&!JL(e)&&a.push(new(Ta(AL,"Reference.ts has not been loaded"),AL)(t._repo,t._path)),{removed:a,events:o}}function YL(e){var t,n=[],r=cn(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function QL(e,t){var n,r=null,i=cn(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||LL(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function $L(e,t){if(t._queryParams.loadsAllData())return ZL(e);var n=t._queryIdentifier;return e.views.get(n)}function XL(e,t){return null!=$L(e,t)}function JL(e){return null!=ZL(e)}function ZL(e){var t,n=cn(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var eF=1,tF=f((function e(t){c(this,e),this.listenProvider_=t,this.syncPointTree_=new XM(null),this.pendingWriteTree_={visibleWrites:JM.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function nF(e,t,n,r,i){return function(e,t,n,r,i){Ta(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=ZM(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?fF(e,new VM({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function rF(e,t,n,r){!function(e,t,n,r){Ta(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=eL(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=XM.fromObject(n);return fF(e,new BM({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function iF(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=lL(e.pendingWriteTree_,t),i=fL(e.pendingWriteTree_,t);if(i){var a=new XM(null);return null!=r.snap?a=a.set(mA(),!0):jO(r.children,(function(e){a=a.set(new vA(e),!0)})),fF(e,new jM(r.path,a,n))}return[]}function aF(e,t,n){return fF(e,new VM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function oF(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||XL(o,t))){var u=KL(o,t,n,r);zL(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return JL(t)}));if(l&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=_F(h),p=0;p<d.length;++p){var v=d[p],m=v.query,y=pF(e,v);e.listenProvider_.startListening(wF(m),vF(e,m),y.hashFn,y.onComplete)}}if(!f&&c.length>0&&!r)if(l){var g=null;e.listenProvider_.stopListening(wF(t),g)}else c.forEach((function(t){var n=e.queryToTagMap.get(mF(t));e.listenProvider_.stopListening(wF(t),n)}))}bF(e,c)}return s}function sF(e,t,n,r){var i=yF(e,r);if(null!=i){var a=gF(i),o=a.path,s=a.queryId,u=SA(o,t);return kF(e,o,new VM(LM(s),u,n))}return[]}function uF(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=SA(e,i);a=a||QL(t,n),o=o||JL(t)}));var s,u=e.syncPointTree_.get(i);if(u?(o=o||JL(u),a=a||QL(u,mA())):(u=new qL,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)s=!0;else{s=!1,a=uM.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=QL(t,mA());n&&(a=a.updateImmediateChild(e,n))}))}var l=XL(u,t);if(!l&&!t._queryParams.loadsAllData()){var f=mF(t);Ta(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");var h=xF();e.queryToTagMap.set(f,h),e.tagToQueryMap.set(h,f)}var d=cL(e.pendingWriteTree_,i),p=GL(u,t,n,d,a,s);if(!l&&!o&&!r){var v=$L(u,t);p=p.concat(EF(e,t,v))}return p}function cF(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=QL(n,SA(e,t));if(r)return r}));return vL(r,t,i,n,!0)}function lF(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=SA(e,n);r=r||QL(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||QL(i,mA()):(i=new qL,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new qM(r,!0,!1):null;return function(e){return YM(e.viewCache_)}(HL(i,t,cL(e.pendingWriteTree_,t._path),a?o.getNode():uM.EMPTY_NODE,a))}function fF(e,t){return hF(t,e.syncPointTree_,null,cL(e.pendingWriteTree_,mA()))}function hF(e,t,n,r){if(EA(e.path))return dF(e,t,n,r);var i=t.get(mA());null==n&&null!=i&&(n=QL(i,mA()));var a=[],o=yA(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=bL(r,o);a=a.concat(hF(s,u,c,l))}return i&&(a=a.concat(WL(i,e,r,n))),a}function dF(e,t,n,r){var i=t.get(mA());null==n&&null!=i&&(n=QL(i,mA()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=bL(r,t),u=e.operationForChild(t);u&&(a=a.concat(dF(u,i,o,s)))})),i&&(a=a.concat(WL(i,e,r,n))),a}function pF(e,t){var n=t.query,r=vF(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||uM.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=yF(e,n);if(r){var i=gF(r),a=i.path,o=i.queryId,s=SA(a,t);return kF(e,a,new UM(LM(o),s))}return[]}(e,n._path,r):function(e,t){return fF(e,new UM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return oF(e,n,null,i)}}}function vF(e,t){var n=mF(t);return e.queryToTagMap.get(n)}function mF(e){return e._path.toString()+"$"+e._queryIdentifier}function yF(e,t){return e.tagToQueryMap.get(t)}function gF(e){var t=e.indexOf("$");return Ta(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new vA(e.substr(0,t))}}function kF(e,t,n){var r=e.syncPointTree_.get(t);return Ta(r,"Missing sync point for query tag that we're tracking"),WL(r,n,cL(e.pendingWriteTree_,t),null)}function _F(e){return e.fold((function(e,t,n){if(t&&JL(t))return[ZL(t)];var r=[];return t&&(r=YL(t)),jO(n,(function(e,t){r=r.concat(t)})),r}))}function wF(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ta(BL,"Reference.ts has not been loaded"),BL)(e._repo,e._path):e}function bF(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=mF(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function xF(){return eF++}function EF(e,t,n){var r=t._path,i=vF(e,t),a=pF(e,n),o=e.listenProvider_.startListening(wF(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)Ta(!JL(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!EA(e)&&t&&JL(t))return[ZL(t).query];var r=[];return t&&(r=r.concat(YL(t).map((function(e){return e.query})))),jO(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(wF(l),vF(e,l))}return o}var SF=function(){function e(t){c(this,e),this.node_=t}return f(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),TF=function(){function e(t,n){c(this,e),this.syncTree_=t,this.path_=n}return f(e,[{key:"getImmediateChild",value:function(t){var n=xA(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return cF(this.syncTree_,this.path_)}}]),e}(),CF=function(e,t,n){return e&&"object"===typeof e?(Ta(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?IF(e[".sv"],t,n):"object"===typeof e[".sv"]?NF(e[".sv"],t):void Ta(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},IF=function(e,t,n){if("timestamp"===e)return n.timestamp;Ta(!1,"Unexpected server value: "+e)},NF=function(e,t,n){e.hasOwnProperty("increment")||Ta(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ta(!1,"Unexpected increment value: "+r);var i=t.node();if(Ta(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},RF=function(e,t,n,r){return DF(t,new TF(n,e),r)},PF=function(e,t,n){return DF(e,new SF(t),n)};function DF(e,t,n){var r,i=e.getPriority().val(),a=CF(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=CF(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new JA(s,lM(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new JA(a))),u.forEachChild(nM,(function(e,i){var a=DF(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var OF=f((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};c(this,e),this.name=t,this.parent=n,this.node=r}));function AF(e,t){for(var n=t instanceof vA?t:new vA(t),r=e,i=yA(n);null!==i;){var a=no(r.node.children,i)||{children:{},childCount:0};r=new OF(i,r,a),i=yA(n=kA(n))}return r}function MF(e){return e.node.value}function LF(e,t){e.node.value=t,BF(e)}function FF(e){return e.node.childCount>0}function jF(e,t){jO(e.node.children,(function(n,r){t(new OF(n,e,r))}))}function UF(e,t,n,r){n&&!r&&t(e),jF(e,(function(e){UF(e,t,!0,r)})),n&&r&&t(e)}function VF(e){return new vA(null===e.parent?e.name:VF(e.parent)+"/"+e.name)}function BF(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===MF(e)&&!FF(e)}(n),i=to(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,BF(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,BF(e))}(e.parent,e.name,e)}var qF=/[\[\].#$\/\u0000-\u001F\u007F]/,zF=/[\[\].#$\u0000-\u001F\u007F]/,WF=10485760,HF=function(e){return"string"===typeof e&&0!==e.length&&!qF.test(e)},GF=function(e){return"string"===typeof e&&0!==e.length&&!zF.test(e)},KF=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!RO(e)||e&&"object"===typeof e&&to(e,".sv")},YF=function(e,t,n,r){r&&void 0===t||QF(mo(e,"value"),t,n)},QF=function e(t,n,r){var i=r instanceof vA?new NA(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+PA(i));if("function"===typeof n)throw new Error(t+"contains a function "+PA(i)+" with contents = "+n.toString());if(RO(n))throw new Error(t+"contains "+n.toString()+" "+PA(i));if("string"===typeof n&&n.length>WF/3&&ko(n)>WF)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+PA(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(jO(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!HF(n)))throw new Error(t+" contains an invalid key ("+n+") "+PA(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ko(t),RA(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ko(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+PA(i)+" in addition to actual children.")}},$F=function(e,t,n,r){if(!r||void 0!==t){var i=mo(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];jO(t,(function(e,t){var r=new vA(e);if(QF(i,t,xA(n,r)),".priority"===_A(r)&&!KF(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=wA(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!HF(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(TA);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&IA(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},XF=function(e,t,n){if(!n||void 0!==t){if(RO(t))throw new Error(mo(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!KF(t))throw new Error(mo(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},JF=function(e,t,n,r){if((!r||void 0!==n)&&!HF(n))throw new Error(mo(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ZF=function(e,t,n,r){if((!r||void 0!==n)&&!GF(n))throw new Error(mo(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ej=function(e,t){if(".info"===yA(t))throw new Error(e+" failed = Can't modify data under /.info/")},tj=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!HF(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),GF(e)}(n))throw new Error(mo(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},nj=f((function e(){c(this,e),this.eventLists_=[],this.recursionDepth_=0}));function rj(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||CA(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function ij(e,t,n){rj(e,n),oj(e,(function(e){return CA(e,t)}))}function aj(e,t,n){rj(e,n),oj(e,(function(e){return IA(e,t)||IA(t,e)}))}function oj(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(sj(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function sj(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();bO&&SO("event: "+n.toString()),qO(r)}}}var uj="repo_interrupt",cj=function(){function e(t,n,r,i){c(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new nj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=NM(),this.transactionQueueTree_=new OF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return f(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function lj(e,t,n){if(e.stats_=nA(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new CM(e.repoInfo_,(function(t,n,r,i){dj(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return pj(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Za(n)}catch(kY){throw new Error("Invalid authOverride provided: "+kY)}}e.persistentConnection_=new AA(e.repoInfo_,t,(function(t,n,r,i){dj(e,t,n,r,i)}),(function(t){pj(e,t)}),(function(t){!function(e,t){jO(t,(function(t,n){vj(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return tA[n]||(tA[n]=t()),tA[n]}(e.repoInfo_,(function(){return new MM(e.stats_,e.server_)})),e.infoData_=new IM,e.infoSyncTree_=new tF({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=aF(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),vj(e,"connected",!1),e.serverSyncTree_=new tF({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);aj(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function fj(e){var t=e.infoData_.getNode(new vA(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function hj(e){return(t=(t={timestamp:fj(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function dj(e,t,n,r,i){e.dataUpdateCount++;var a=new vA(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=io(n,(function(e){return lM(e)}));o=function(e,t,n,r){var i=yF(e,r);if(i){var a=gF(i),o=a.path,s=a.queryId,u=SA(o,t),c=XM.fromObject(n);return kF(e,o,new BM(LM(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=lM(n);o=sF(e.serverSyncTree_,a,u,i)}else if(r){var c=io(n,(function(e){return lM(e)}));o=function(e,t,n){var r=XM.fromObject(n);return fF(e,new BM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=lM(n);o=aF(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=Cj(e,a)),aj(e.eventQueue_,f,o)}function pj(e,t){vj(e,"connected",t),!1===t&&function(e){bj(e,"onDisconnectEvents");var t=hj(e),n=NM();DM(e.onDisconnect_,mA(),(function(r,i){var a=RF(r,i,e.serverSyncTree_,t);RM(n,r,a)}));var r=[];DM(n,mA(),(function(t,n){r=r.concat(aF(e.serverSyncTree_,t,n));var i=Dj(e,t);Cj(e,i)})),e.onDisconnect_=NM(),aj(e.eventQueue_,mA(),r)}(e)}function vj(e,t,n){var r=new vA("/.info/"+t),i=lM(n);e.infoData_.updateSnapshot(r,i);var a=aF(e.infoSyncTree_,r,i);aj(e.eventQueue_,r,a)}function mj(e){return e.nextWriteId_++}function yj(e,t,n,r,i){bj(e,"set",{path:t.toString(),value:n,priority:r});var a=hj(e),o=lM(n,r),s=cF(e.serverSyncTree_,t),u=PF(o,s,a),c=mj(e),l=nF(e.serverSyncTree_,t,u,c,!0);rj(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||NO("set at "+t+" failed: "+n);var o=iF(e.serverSyncTree_,c,!a);aj(e.eventQueue_,t,o),xj(e,i,n,r)}));var f=Dj(e,t);Cj(e,f),aj(e.eventQueue_,f,[])}function gj(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&PM(e.onDisconnect_,t),xj(e,n,r,i)}))}function kj(e,t,n,r){var i=lM(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&RM(e.onDisconnect_,t,i),xj(e,r,n,a)}))}function _j(e,t,n){var r;r=".info"===yA(t._path)?oF(e.infoSyncTree_,t,n):oF(e.serverSyncTree_,t,n),ij(e.eventQueue_,t._path,r)}function wj(e){e.persistentConnection_&&e.persistentConnection_.interrupt(uj)}function bj(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];SO.apply(void 0,[t].concat(r))}function xj(e,t,n,r){t&&qO((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function Ej(e,t,n){return cF(e.serverSyncTree_,t,n)||uM.EMPTY_NODE}function Sj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Pj(e,t),MF(t)){var n=Nj(e,t);Ta(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&Tj(e,VF(t),n)}else FF(t)&&jF(t,(function(t){Sj(e,t)}))}function Tj(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Ej(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];Ta(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=SA(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){bj(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(iF(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);Pj(e,AF(e.transactionQueueTree_,t)),Sj(e,e.transactionQueueTree_),aj(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)qO(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{NO("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Cj(e,t)}}),o)}function Cj(e,t){var n=Ij(e,t),r=VF(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=SA(n,u.path),l=!1,f=void 0;if(Ta(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,f=u.abortReason,i=i.concat(iF(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,f="maxretry",i=i.concat(iF(e.serverSyncTree_,u.currentWriteId,!0));else{var h=Ej(e,u.path,o);u.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){QF("transaction failed: Data returned ",d,u.path);var p=lM(d);"object"===typeof d&&null!=d&&to(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=u.currentWriteId,m=hj(e),y=PF(p,h,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=y,u.currentWriteId=mj(e),o.splice(o.indexOf(v),1),i=(i=i.concat(nF(e.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally))).concat(iF(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(iF(e.serverSyncTree_,u.currentWriteId,!0))}aj(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},u=0;u<t.length;u++)s(u);Pj(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)qO(r[c]);Sj(e,e.transactionQueueTree_)}(e,Nj(e,n),r),r}function Ij(e,t){var n,r=e.transactionQueueTree_;for(n=yA(t);null!==n&&void 0===MF(r);)r=AF(r,n),n=yA(t=kA(t));return r}function Nj(e,t){var n=[];return Rj(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Rj(e,t,n){var r=MF(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);jF(t,(function(t){Rj(e,t,n)}))}function Pj(e,t){var n=MF(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,LF(t,n.length>0?n:void 0)}jF(t,(function(t){Pj(e,t)}))}function Dj(e,t){var n=VF(Ij(e,t)),r=AF(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Oj(e,t)})),Oj(e,r),UF(r,(function(t){Oj(e,t)})),n}function Oj(e,t){var n=MF(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Ta(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Ta(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(iF(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?LF(t,void 0):n.length=a+1,aj(e.eventQueue_,VF(t),i);for(var s=0;s<r.length;s++)qO(r[s])}}var Aj=function(e,t){var n=Mj(e),r=n.namespace;"firebase.com"===n.domain&&IO(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||IO("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&NO("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new XO(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new vA(n.pathString)}},Mj=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(kY){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=cn(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):NO("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},Lj="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Fj=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Lj.charAt(n%64),n=Math.floor(n/64);Ta(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Lj.charAt(t[r]);return Ta(20===o.length,"nextPushId: Length should be 20."),o}}(),jj=function(){function e(t,n,r,i){c(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return f(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+Za(this.snapshot.exportVal())}}]),e}(),Uj=function(){function e(t,n,r){c(this,e),this.eventRegistration=t,this.error=n,this.path=r}return f(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Vj=function(){function e(t,n){c(this,e),this.snapshotCallback=t,this.cancelCallback=n}return f(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Ta(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Bj=function(){function e(t,n){c(this,e),this._repo=t,this._path=n}return f(e,[{key:"cancel",value:function(){var e=new ja;return gj(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){ej("OnDisconnect.remove",this._path);var e=new ja;return kj(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){ej("OnDisconnect.set",this._path),YF("OnDisconnect.set",e,this._path,!1);var t=new ja;return kj(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){ej("OnDisconnect.setWithPriority",this._path),YF("OnDisconnect.setWithPriority",e,this._path,!1),XF("OnDisconnect.setWithPriority",t,!1);var n=new ja;return function(e,t,n,r,i){var a=lM(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&RM(e.onDisconnect_,t,a),xj(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){ej("OnDisconnect.update",this._path),$F("OnDisconnect.update",e,this._path,!1);var t=new ja;return function(e,t,n,r){if(ro(n))return SO("onDisconnect().update() called with empty data.  Don't do anything."),void xj(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&jO(n,(function(n,r){var i=lM(r);RM(e.onDisconnect_,xA(t,n),i)})),xj(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),qj=function(){function e(t,n,r,i){c(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return f(e,[{key:"key",get:function(){return EA(this._path)?null:_A(this._path)}},{key:"ref",get:function(){return new Gj(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=TM(this._queryParams),t=LO(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return TM(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=_o(t))instanceof e))return!1;var n=this._repo===t._repo,r=CA(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function zj(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Wj(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===UA){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==PO)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==DO)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===nM){if(null!=t&&!KF(t)||null!=n&&!KF(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ta(e.getIndex()instanceof fM||e.getIndex()===dM,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Hj(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Gj=function(e){d(n,e);var t=k(n);function n(e,r){return c(this,n),t.call(this,e,r,new wM,!1)}return f(n,[{key:"parent",get:function(){var e=bA(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(qj),Kj=function(){function e(t,n,r){c(this,e),this._node=t,this.ref=n,this._index=r}return f(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new vA(t),r=$j(this.ref,t);return new e(this._node.getChild(n),r,nM)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,$j(n.ref,r),nM))}))}},{key:"hasChild",value:function(e){var t=new vA(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Yj(e,t){return(e=_o(e))._checkNotDeleted("ref"),void 0!==t?$j(e._root,t):e._root}function Qj(e,t){(e=_o(e))._checkNotDeleted("refFromURL");var n=Aj(t,e._repo.repoInfo_.nodeAdmin);tj("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||IO("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Yj(e,n.path.toString())}function $j(e,t){var n,r,i,a;return null===yA((e=_o(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ZF(n,r,i,a)):ZF("child","path",t,!1),new Gj(e._repo,xA(e._path,t))}function Xj(e,t){e=_o(e),ej("push",e._path),YF("push",t,e._path,!0);var n,r=fj(e._repo),i=Fj(r),a=$j(e,i),o=$j(e,i);return n=null!=t?Zj(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Jj(e){return ej("remove",e._path),Zj(e,null)}function Zj(e,t){e=_o(e),ej("set",e._path),YF("set",t,e._path,!1);var n=new ja;return yj(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function eU(e,t){e=_o(e),ej("setPriority",e._path),XF("setPriority",t,!1);var n=new ja;return yj(e._repo,xA(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function tU(e,t,n){if(ej("setWithPriority",e._path),YF("setWithPriority",t,e._path,!1),XF("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new ja;return yj(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function nU(e,t){$F("update",t,e._path,!1);var n=new ja;return function(e,t,n,r){bj(e,"update",{path:t.toString(),value:n});var i=!0,a=hj(e),o={};if(jO(n,(function(n,r){i=!1,o[n]=RF(xA(t,n),lM(r),e.serverSyncTree_,a)})),i)SO("update() called with empty data.  Don't do anything."),xj(0,r,"ok",void 0);else{var s=mj(e),u=rF(e.serverSyncTree_,t,o,s);rj(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||NO("update at "+t+" failed: "+n);var o=iF(e.serverSyncTree_,s,!a),u=o.length>0?Cj(e,t):t;aj(e.eventQueue_,u,o),xj(0,r,n,i)})),jO(n,(function(n){var r=Dj(e,xA(t,n));Cj(e,r)})),aj(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function rU(e){e=_o(e);var t=new Vj((function(){})),n=new iU(t);return function(e,t,n){var r=lF(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=lM(r).withIndex(t._queryParams.getIndex());if(uF(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=aF(e.serverSyncTree_,t._path,a);else{var o=vF(e.serverSyncTree_,t);i=sF(e.serverSyncTree_,t._path,a,o)}return aj(e.eventQueue_,t._path,i),oF(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return bj(e,"get for query "+Za(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new Kj(t,new Gj(e._repo,e._path),e._queryParams.getIndex())}))}var iU=function(){function e(t){c(this,e),this.callbackContext=t}return f(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new jj("value",this,new Kj(e.snapshotNode,new Gj(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Uj(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),aU=function(){function e(t,n){c(this,e),this.eventType=t,this.callbackContext=n}return f(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Uj(this,e,t):null}},{key:"createEvent",value:function(e,t){Ta(null!=e.childName,"Child events should have a childName.");var n=$j(new Gj(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new jj(e.type,this,new Kj(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function oU(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){_j(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Vj(n,a||void 0),c="value"===t?new iU(u):new aU(t,u);return function(e,t,n){var r;r=".info"===yA(t._path)?uF(e.infoSyncTree_,t,n):uF(e.serverSyncTree_,t,n),ij(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return _j(e._repo,e,c)}}function sU(e,t,n,r){return oU(e,"value",t,n,r)}function uU(e,t,n,r){return oU(e,"child_added",t,n,r)}function cU(e,t,n,r){return oU(e,"child_changed",t,n,r)}function lU(e,t,n,r){return oU(e,"child_moved",t,n,r)}function fU(e,t,n,r){return oU(e,"child_removed",t,n,r)}function hU(e,t,n){var r=null,i=n?new Vj(n):null;"value"===t?r=new iU(i):t&&(r=new aU(t,i)),_j(e._repo,e,r)}var dU=f((function e(){c(this,e)})),pU=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){YF("endAt",this._value,e._path,!0);var t=xM(e._queryParams,this._value,this._key);if(Hj(t),Wj(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qj(e._repo,e._path,t,e._orderByCalled)}}]),n}(dU);function vU(e,t){return JF("endAt","key",t,!0),new pU(e,t)}var mU=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){YF("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===UA||n?xM(e,t,n):xM(e,t,PO)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Hj(t),Wj(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new qj(e._repo,e._path,t,e._orderByCalled)}}]),n}(dU);function yU(e,t){return JF("endBefore","key",t,!0),new mU(e,t)}var gU=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){YF("startAt",this._value,e._path,!0);var t=bM(e._queryParams,this._value,this._key);if(Hj(t),Wj(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new qj(e._repo,e._path,t,e._orderByCalled)}}]),n}(dU);function kU(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return JF("startAt","key",t,!0),new gU(e,t)}var _U=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){YF("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===UA||n?bM(e,t,n):bM(e,t,DO)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Hj(t),Wj(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new qj(e._repo,e._path,t,e._orderByCalled)}}]),n}(dU);function wU(e,t){return JF("startAfter","key",t,!0),new _U(e,t)}var bU=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this))._limit=e,r}return f(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new qj(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(dU);function xU(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bU(e)}var EU=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this))._limit=e,r}return f(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new qj(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(dU);function SU(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new EU(e)}var TU=function(e){d(n,e);var t=k(n);function n(e){var r;return c(this,n),(r=t.call(this))._path=e,r}return f(n,[{key:"_apply",value:function(e){zj(e,"orderByChild");var t=new vA(this._path);if(EA(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new fM(t),r=EM(e._queryParams,n);return Wj(r),new qj(e._repo,e._path,r,!0)}}]),n}(dU);function CU(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ZF("orderByChild","path",e,!1),new TU(e)}var IU=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){zj(e,"orderByKey");var t=EM(e._queryParams,UA);return Wj(t),new qj(e._repo,e._path,t,!0)}}]),n}(dU);function NU(){return new IU}var RU=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){zj(e,"orderByPriority");var t=EM(e._queryParams,nM);return Wj(t),new qj(e._repo,e._path,t,!0)}}]),n}(dU);function PU(){return new RU}var DU=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"_apply",value:function(e){zj(e,"orderByValue");var t=EM(e._queryParams,dM);return Wj(t),new qj(e._repo,e._path,t,!0)}}]),n}(dU);function OU(){return new DU}var AU=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this))._value=e,i._key=r,i}return f(n,[{key:"_apply",value:function(e){if(YF("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new pU(this._value,this._key)._apply(new gU(this._value,this._key)._apply(e))}}]),n}(dU);function MU(e,t){return JF("equalTo","key",t,!0),new AU(e,t)}function LU(e){for(var t=_o(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];t=s._apply(t)}return t}!function(e){Ta(!AL,"__referenceConstructor has already been defined"),AL=e}(Gj),function(e){Ta(!BL,"__referenceConstructor has already been defined"),BL=e}(Gj);var FU={},jU=!1;function UU(e,t,n,r){e.repoInfo_=new XO("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function VU(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||IO("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),SO("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=Aj(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/react-firebase-chatting-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=Aj(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new GO(GO.OWNER):new HO(e.name,e.options,t);tj("Invalid Firebase Database URL",s),EA(s.path)||IO("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=FU[t.name];i||(i={},FU[t.name]=i);var a=i[e.toURLString()];a&&IO("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new cj(e,jU,n,r),i[e.toURLString()]=a,a}(u,e,l,new WO(e.name,n));return new BU(f,e)}var BU=function(){function e(t,n){c(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return f(e,[{key:"_repo",get:function(){return this._instanceStarted||(lj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Gj(this._repo,mA())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=FU[t];n&&n[e.key]===e||IO("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),wj(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&IO("Cannot call "+e+" on a deleted database.")}}]),e}();function qU(){lA.IS_TRANSPORT_INITIALIZED&&NO("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function zU(){qU(),oA.forceDisallow()}function WU(){qU(),cA.forceDisallow(),oA.forceAllow()}function HU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=_o(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&IO("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&IO('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new GO(GO.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:Ua(r.mockUserToken,e.app.options.projectId);a=new GO(o)}UU(i,t,n,a)}function GU(e){(e=_o(e))._checkNotDeleted("goOffline"),wj(e._repo)}function KU(e){var t;(e=_o(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(uj)}function YU(e,t){EO(e,t)}var QU={".sv":"timestamp"};var $U=function(){function e(t,n){c(this,e),this.committed=t,this.snapshot=n}return f(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function XU(e,t,n){var r;if(e=_o(e),ej("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new ja,o=sU(e,(function(){}));return function(e,t,n,r,i,a){bj(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:kO(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=Ej(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{QF("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=AF(e.transactionQueueTree_,t),f=MF(l)||[];f.push(o),LF(l,f),"object"===typeof u&&null!==u&&to(u,".priority")?(c=no(u,".priority"),Ta(KF(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(cF(e.serverSyncTree_,t)||uM.EMPTY_NODE).getPriority().val();var h=hj(e),d=lM(u,c),p=PF(d,s,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=mj(e);var v=nF(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);aj(e.eventQueue_,t,v),Sj(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new Kj(r,new Gj(e._repo,e._path),nM),a.resolve(new $U(n,i)))}),o,i),a.promise}AA.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},AA.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){hO(ps),ss(new wo("database",(function(e,t){var n=t.instanceIdentifier;return VU(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),_s(cO,lO,e),_s(cO,lO,"esm2017")}();var JU=new Do("@firebase/database-compat"),ZU=function(e){var t="FIREBASE WARNING: "+e;JU.warn(t)},eV=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(mo(e,t)+"must be a boolean.")},tV=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(mo(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},nV=function(){function e(t){c(this,e),this._delegate=t}return f(e,[{key:"cancel",value:function(e){vo("OnDisconnect.cancel",0,1,arguments.length),yo("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){vo("OnDisconnect.remove",0,1,arguments.length),yo("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){vo("OnDisconnect.set",1,2,arguments.length),yo("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){vo("OnDisconnect.setWithPriority",2,3,arguments.length),yo("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(vo("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ZU("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}yo("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),rV=function(){function e(t,n){c(this,e),this.committed=t,this.snapshot=n}return f(e,[{key:"toJSON",value:function(){return vo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),iV=function(){function e(t,n){c(this,e),this._database=t,this._delegate=n}return f(e,[{key:"val",value:function(){return vo("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return vo("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return vo("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return vo("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return vo("DataSnapshot.child",0,1,arguments.length),t=String(t),ZF("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return vo("DataSnapshot.hasChild",1,1,arguments.length),ZF("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return vo("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return vo("DataSnapshot.forEach",1,1,arguments.length),yo("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return vo("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return vo("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return vo("DataSnapshot.ref",0,0,arguments.length),new oV(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),aV=function(){function e(t,n){c(this,e),this.database=t,this._delegate=n}return f(e,[{key:"on",value:function(t,n,r,i){var a,o=this;vo("Query.on",2,4,arguments.length),yo("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new iV(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return sU(this._delegate,u,c),n;case"child_added":return uU(this._delegate,u,c),n;case"child_removed":return fU(this._delegate,u,c),n;case"child_changed":return cU(this._delegate,u,c),n;case"child_moved":return lU(this._delegate,u,c),n;default:throw new Error(mo("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(vo("Query.off",0,3,arguments.length),tV("Query.off",e,!0),yo("Query.off","callback",t,!0),go("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,hU(this._delegate,e,r)}else hU(this._delegate,e)}},{key:"get",value:function(){var e=this;return rU(this._delegate).then((function(t){return new iV(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;vo("Query.once",1,4,arguments.length),yo("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new ja,u=function(e,t){var r=new iV(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":sU(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":uU(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":fU(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":cU(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":lU(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(mo("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return vo("Query.limitToFirst",1,1,arguments.length),new e(this.database,LU(this._delegate,xU(t)))}},{key:"limitToLast",value:function(t){return vo("Query.limitToLast",1,1,arguments.length),new e(this.database,LU(this._delegate,SU(t)))}},{key:"orderByChild",value:function(t){return vo("Query.orderByChild",1,1,arguments.length),new e(this.database,LU(this._delegate,CU(t)))}},{key:"orderByKey",value:function(){return vo("Query.orderByKey",0,0,arguments.length),new e(this.database,LU(this._delegate,NU()))}},{key:"orderByPriority",value:function(){return vo("Query.orderByPriority",0,0,arguments.length),new e(this.database,LU(this._delegate,PU()))}},{key:"orderByValue",value:function(){return vo("Query.orderByValue",0,0,arguments.length),new e(this.database,LU(this._delegate,OU()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return vo("Query.startAt",0,2,arguments.length),new e(this.database,LU(this._delegate,kU(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return vo("Query.startAfter",0,2,arguments.length),new e(this.database,LU(this._delegate,wU(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return vo("Query.endAt",0,2,arguments.length),new e(this.database,LU(this._delegate,vU(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return vo("Query.endBefore",0,2,arguments.length),new e(this.database,LU(this._delegate,yU(t,n)))}},{key:"equalTo",value:function(t,n){return vo("Query.equalTo",1,2,arguments.length),new e(this.database,LU(this._delegate,MU(t,n)))}},{key:"toString",value:function(){return vo("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return vo("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(vo("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new oV(this.database,new Gj(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,yo(e,"cancel",r.cancel,!0),r.context=n,go(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(mo(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),oV=function(e){d(n,e);var t=k(n);function n(e,r){var i;return c(this,n),(i=t.call(this,e,new qj(r._repo,r._path,new wM,!1))).database=e,i._delegate=r,i}return f(n,[{key:"getKey",value:function(){return vo("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return vo("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,$j(this._delegate,e))}},{key:"getParent",value:function(){vo("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return vo("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){vo("Reference.set",1,2,arguments.length),yo("Reference.set","onComplete",t,!0);var n=Zj(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(vo("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,ZU("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ej("Reference.update",this._delegate._path),yo("Reference.update","onComplete",t,!0);var i=nU(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){vo("Reference.setWithPriority",2,3,arguments.length),yo("Reference.setWithPriority","onComplete",n,!0);var r=tU(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){vo("Reference.remove",0,1,arguments.length),yo("Reference.remove","onComplete",e,!0);var t=Jj(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;vo("Reference.transaction",1,3,arguments.length),yo("Reference.transaction","transactionUpdate",e,!1),yo("Reference.transaction","onComplete",t,!0),eV("Reference.transaction","applyLocally",n,!0);var i=XU(this._delegate,e,{applyLocally:n}).then((function(e){return new rV(e.committed,new iV(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){vo("Reference.setPriority",1,2,arguments.length),yo("Reference.setPriority","onComplete",t,!0);var n=eU(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;vo("Reference.push",0,2,arguments.length),yo("Reference.push","onComplete",t,!0);var i=Xj(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return ej("Reference.onDisconnect",this._delegate._path),new nV(new Bj(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(aV),sV=function(){function e(t,n){var r=this;c(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:zU,forceLongPolling:WU}}return f(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};HU(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(vo("database.ref",0,1,arguments.length),e instanceof oV){var t=Qj(this._delegate,e.toString());return new oV(this,t)}var n=Yj(this._delegate,e);return new oV(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";vo(t,1,1,arguments.length);var n=Qj(this._delegate,e);return new oV(this,n)}},{key:"goOffline",value:function(){return vo("database.goOffline",0,0,arguments.length),GU(this._delegate)}},{key:"goOnline",value:function(){return vo("database.goOnline",0,0,arguments.length),KU(this._delegate)}}]),e}();sV.ServerValue={TIMESTAMP:QU,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var uV=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;hO(r);var u=new xo("auth-internal",new To("database-standalone"));return u.setComponent(new wo("auth-internal",(function(){return i}),"PRIVATE")),{instance:new sV(VU(t,u,void 0,n,s),t),namespace:a}}}),cV=sV.ServerValue;!function(e){e.INTERNAL.registerComponent(new wo("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new sV(i,r)}),"PUBLIC").setServiceProps({Reference:oV,Query:aV,Database:sV,DataSnapshot:iV,enableLogging:YU,INTERNAL:uV,ServerValue:cV}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.3.4")}(Ws);var lV,fV="firebasestorage.googleapis.com",hV=function(e){d(n,e);var t=k(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return c(this,n),(i=t.call(this,dV(e),"Firebase Storage: ".concat(r," (").concat(dV(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(y(i),n.prototype),i}return f(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return dV(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Ya);function dV(e){return"storage/"+e}function pV(){return new hV(lV.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function vV(){return new hV(lV.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function mV(){return new hV(lV.CANCELED,"User canceled the upload/download.")}function yV(){return new hV(lV.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gV(e){return new hV(lV.INVALID_ARGUMENT,e)}function kV(){return new hV(lV.APP_DELETED,"The Firebase app was deleted.")}function _V(e){return new hV(lV.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wV(e,t){return new hV(lV.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function bV(e){throw new hV(lV.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(lV||(lV={}));var xV,EV=function(){function e(t,n){c(this,e),this.bucket=t,this.path_=n}return f(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(kY){return new e(t,"")}if(""===r.path)return r;throw i=t,new hV(lV.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===fV?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new hV(lV.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),SV=function(){function e(t){c(this,e),this.promise_=Promise.reject(t)}return f(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function TV(e){return"string"===typeof e||e instanceof String}function CV(e){return IV()&&e instanceof Blob}function IV(){return"undefined"!==typeof Blob&&!qa()}function NV(e,t,n,r){if(r<t)throw gV("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw gV("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function RV(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function PV(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function DV(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(xV||(xV={}));var OV=function(){function e(t,n,r,i,a,o,s,u,l,f,h){var d=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];c(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=f,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return f(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(kY){i(kY)}else if(null!==a){var s=pV();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?kV():mV());else i(vV())}};this.canceled_?t(0,new AV(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new AV(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===xV.NO_ERROR,a=r.getStatus();if(!n||DV(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===xV.ABORT;t(!1,new AV(!1,null,o))}else{var s=-1!==e.successCodes_.indexOf(a);t(!0,new AV(s,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),AV=f((function e(t,n,r){c(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function MV(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function LV(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function FV(e,t){t&&(e["X-Firebase-GMPID"]=t)}function jV(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function UV(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=PV(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return FV(c,t),MV(c,n),LV(c,a),jV(c,r),new OV(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function VV(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function BV(){for(var e=VV(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(IV())return new Blob(n);throw new hV(lV.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function qV(e){if("undefined"===typeof atob)throw t="base-64",new hV(lV.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var zV={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},WV=f((function e(t,n){c(this,e),this.data=t,this.contentType=n||null}));function HV(e,t){switch(e){case zV.RAW:return new WV(GV(t));case zV.BASE64:case zV.BASE64URL:return new WV(KV(e,t));case zV.DATA_URL:return new WV(function(e){var t=new YV(e);return t.base64?KV(zV.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(kY){throw wV(zV.DATA_URL,"Malformed data URL.")}return GV(t)}(t.rest)}(t),new YV(t).contentType)}throw pV()}function GV(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function KV(e,t){switch(e){case zV.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw wV(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case zV.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw wV(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=qV(t)}catch(kY){if(kY.message.includes("polyfill"))throw kY;throw wV(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var YV=f((function e(t){c(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw wV(zV.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var QV=function(){function e(t,n){c(this,e);var r=0,i="";CV(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return f(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(CV(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(IV()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(BV.apply(null,i))}var a=n.map((function(e){return TV(e)?HV(zV.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function $V(e){var t;try{t=JSON.parse(e)}catch(kY){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function XV(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function JV(e,t){return t}var ZV=f((function e(t,n,r,i){c(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||JV})),eB=null;function tB(){if(eB)return eB;var e=[];e.push(new ZV("bucket")),e.push(new ZV("generation")),e.push(new ZV("metageneration")),e.push(new ZV("name","fullPath",!0));var t=new ZV("name");t.xform=function(e,t){return function(e){return!TV(e)||e.length<2?e:XV(e)}(t)},e.push(t);var n=new ZV("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new ZV("timeCreated")),e.push(new ZV("updated")),e.push(new ZV("md5Hash",null,!0)),e.push(new ZV("cacheControl",null,!0)),e.push(new ZV("contentDisposition",null,!0)),e.push(new ZV("contentEncoding",null,!0)),e.push(new ZV("contentLanguage",null,!0)),e.push(new ZV("contentType",null,!0)),e.push(new ZV("metadata","customMetadata",!0)),eB=e}function nB(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new EV(n,r);return t._makeStorageReference(i)}})}(r,e),r}function rB(e,t,n){var r=$V(t);return null===r?null:nB(e,r,n)}function iB(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function aB(e,t,n){var r=$V(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=cn(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new EV(t,o));r.prefixes.push(s)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var u,c=cn(n.items);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=e._makeStorageReference(new EV(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var oB=f((function e(t,n,r,i){c(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function sB(e){if(!e)throw pV()}function uB(e,t){return function(n,r){var i=rB(e,r,t);return sB(null!==i),i}}function cB(e,t){return function(n,r){var i=rB(e,r,t);return sB(null!==i),function(e,t,n,r){var i=$V(t);if(null===i)return null;if(!TV(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return RV("/b/"+o(i)+"/o/"+o(a),n,r)+PV({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function lB(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new hV(lV.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new hV(lV.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new hV(lV.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new hV(lV.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function fB(e){var t=lB(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new hV(lV.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function hB(e,t,n){var r=RV(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new oB(r,"GET",uB(e,n),i);return a.errorHandler=fB(t),a}function dB(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=RV(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new oB(o,"GET",function(e,t){return function(n,r){var i=aB(e,t,r);return sB(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=lB(t),u}function pB(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function vB(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=pB(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+iB(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=QV.getBlob(c,r,l);if(null===f)throw yV();var h={name:u.fullPath},d=RV(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new oB(d,"POST",uB(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=lB(t),v}var mB=f((function e(t,n,r,i){c(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function yB(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(kY){sB(!1)}return sB(!!n&&-1!==(t||["active"]).indexOf(n)),n}var gB=262144;function kB(e,t,n,r,i,a,o,s){var u=new mB(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new hV(lV.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(f,h);if(null===p)throw yV();var v=t.maxUploadRetryTime,m=new oB(n,"POST",(function(e,n){var i,o=yB(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?uB(t,a)(e,n):null,new mB(s,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=lB(e),m}var _B={STATE_CHANGED:"state_changed"},wB={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bB(e){switch(e){case"running":case"pausing":case"canceling":return wB.RUNNING;case"paused":return wB.PAUSED;case"success":return wB.SUCCESS;case"canceled":return wB.CANCELED;default:return wB.ERROR}}var xB=f((function e(t,n,r){c(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function EB(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var SB=function(){function e(){var t=this;c(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xV.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=xV.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=xV.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return f(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw bV("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw bV("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw bV("cannot .getStatus() before sending");try{return this.xhr_.status}catch(kY){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw bV("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw bV("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),TB=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(SB);function CB(){return new TB}var IB=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=tB(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(lV.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(DV(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=vV()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(lV.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return f(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=b(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=pB(t,r,i),s={name:o.fullPath},u=RV(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=iB(o,n),f=e.maxUploadRetryTime,h=new oB(u,"POST",(function(e){var t;yB(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(kY){sB(!1)}return sB(TV(t)),t}),f);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=lB(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,CB,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new oB(n,"POST",(function(e){var t=yB(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(kY){sB(!1)}n||sB(!1);var i=Number(n);return sB(!isNaN(i)),new mB(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=lB(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,CB,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=gB*this._chunkMultiplier,n=new mB(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=kB(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(kY){return e._error=kY,void e._transition("error")}var s=e._ref.storage._makeRequest(o,CB,i,a,!1);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(gB*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=hB(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,CB,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=vB(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,CB,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=mV(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=bB(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new xB(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(bB(this._state)){case wB.SUCCESS:EB(this._resolve.bind(null,this.snapshot))();break;case wB.CANCELED:case wB.ERROR:EB(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(bB(this._state)){case wB.RUNNING:case wB.PAUSED:e.next&&EB(e.next.bind(e,this.snapshot))();break;case wB.SUCCESS:e.complete&&EB(e.complete.bind(e))();break;default:e.error&&EB(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),NB=function(){function e(t,n){c(this,e),this._service=t,this._location=n instanceof EV?n:EV.makeFromUrl(n,t.host)}return f(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new EV(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return XV(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new EV(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw _V(e)}}]),e}();function RB(e,t,n){return PB.apply(this,arguments)}function PB(){return(PB=Oe(Pe().mark((function e(t,n,r){var i,a,o,s;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,DB(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,u(s.prefixes)),(a=n.items).push.apply(a,u(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,RB(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DB(e,t){null!=t&&"number"===typeof t.maxResults&&NV("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=dB(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,CB)}function OB(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=RV(t.fullServerUrl(),e.host,e._protocol),a=iB(n,r),o=e.maxOperationRetryTime,s=new oB(i,"PATCH",uB(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=fB(t),s}(e.storage,e._location,t,tB());return e.storage.makeRequestWithTokens(n,CB)}function AB(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=RV(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new oB(r,"GET",cB(e,n),i);return a.errorHandler=fB(t),a}(e.storage,e._location,tB());return e.storage.makeRequestWithTokens(t,CB).then((function(e){if(null===e)throw new hV(lV.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function MB(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=RV(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new oB(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=fB(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,CB)}function LB(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new EV(e._location.bucket,n);return new NB(e.storage,r)}function FB(e,t){if(e instanceof BB){var n=e;if(null==n._bucket)throw new hV(lV.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new NB(n,n._bucket);return null!=t?FB(r,t):r}return void 0!==t?LB(e,t):e}function jB(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof BB)return new NB(e,t);throw gV("To use ref(service, url), the first argument must be a Storage instance.")}return FB(e,t)}function UB(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:EV.makeFromBucketSpec(n,e)}function VB(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Ua(i,e.app.options.projectId))}var BB=function(){function e(t,n,r,i,a){c(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=fV,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?EV.makeFromBucketSpec(i,this._host):UB(this._host,this.app.options)}return f(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=EV.makeFromBucketSpec(this._url,e):this._bucket=UB(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){NV("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){NV("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=Oe(Pe().mark((function e(){var t,n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Oe(Pe().mark((function e(){var t,n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new NB(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new SV(kV());var o=UV(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=Oe(Pe().mark((function e(t,n){var r,i,a,o;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=b(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),qB="@firebase/storage",zB="0.11.2",WB="storage";function HB(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new IB(e,new QV(t),n)}(e=_o(e),t,n)}function GB(e){return function(e){e._throwIfRoot("getMetadata");var t=hB(e.storage,e._location,tB());return e.storage.makeRequestWithTokens(t,CB)}(e=_o(e))}function KB(e){return function(e){var t={prefixes:[],items:[]};return RB(e,t).then((function(){return t}))}(e=_o(e))}function YB(e,t){return jB(e=_o(e),t)}function QB(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};VB(e,t,n,r)}function $B(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new BB(r,i,a,n,ps)}ss(new wo(WB,$B,"PUBLIC").setMultipleInstances(!0)),_s(qB,zB,""),_s(qB,zB,"esm2017");var XB=function(){function e(t,n,r){c(this,e),this._delegate=t,this.task=n,this.ref=r}return f(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),JB=function(){function e(t,n){c(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return f(e,[{key:"snapshot",get:function(){return new XB(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new XB(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new XB(e,i,i._ref))}:{next:t.next?function(e){return t.next(new XB(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),ZB=function(){function e(t,n){c(this,e),this._delegate=t,this._service=n}return f(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new eq(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new eq(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),eq=function(){function e(t,n){c(this,e),this._delegate=t,this.storage=n}return f(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return LB(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new JB(HB(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zV.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=HV(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new JB(new IB(this._delegate,new QV(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return KB(this._delegate).then((function(t){return new ZB(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return DB(e=_o(e),t)}(this._delegate,e||void 0).then((function(e){return new ZB(e,t.storage)}))}},{key:"getMetadata",value:function(){return GB(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return OB(e=_o(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return AB(_o(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),MB(_o(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw _V(e)}}]),e}(),tq=function(){function e(t,n){c(this,e),this.app=t,this._delegate=n}return f(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(nq(e))throw gV("ref() expected a child path but got a URL, use refFromURL instead.");return new eq(YB(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!nq(e))throw gV("refFromURL() expected a full URL but got a child path, use ref() instead.");try{EV.makeFromUrl(e,this._delegate.host)}catch(kY){throw gV("refFromUrl() expected a valid full URL but got an invalid one.")}return new eq(YB(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};QB(this._delegate,e,t,n)}}]),e}();function nq(e){return/^[A-Za-z]+:\/\//.test(e)}function rq(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new tq(r,i)}!function(e){var t={TaskState:wB,TaskEvent:_B,StringFormat:zV,Storage:tq,Reference:eq};e.INTERNAL.registerComponent(new wo("storage-compat",rq,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(Ws);Ws.initializeApp({apiKey:"AIzaSyAu0B64bMI0_5PYkGI82_H265lnMk1GGJ4",authDomain:"chat-35caf.firebaseapp.com",databaseURL:"https://chat-35caf-default-rtdb.firebaseio.com",projectId:"chat-35caf",storageBucket:"chat-35caf.appspot.com",messagingSenderId:"398515968462",appId:"1:398515968462:web:59eaedb03bb8b23d60739f",measurementId:"G-0SSE8B61WB"});var iq=Ws,aq="set_user",oq="clear_user",sq="set_photo_url",uq="set_current_chat_room",cq="set_private_chat_room",lq="set_user_posts";var fq=function(){var e=Lt((function(e){return e.user.currentUser})),t=Dt(),n=(0,r.useRef)(),i=function(){var n=Oe(Pe().mark((function n(r){var i,a,o,s;return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=r.target.files[0]){n.next=3;break}return n.abrupt("return");case 3:return a=i.type,n.prev=4,n.next=7,iq.storage().ref().child("user_image/".concat(e.uid)).put(i,a);case 7:return o=n.sent,n.next=10,o.ref.getDownloadURL();case 10:return s=n.sent,n.next=13,iq.auth().currentUser.updateProfile({photoURL:s});case 13:return t({type:sq,payload:s}),n.next=16,iq.database().ref("users").child(e.uid).update({image:s});case 16:n.next=21;break;case 18:n.prev=18,n.t0=n.catch(4),console.log(n.t0);case 21:case"end":return n.stop()}}),n,null,[[4,18]])})));return function(e){return n.apply(this,arguments)}}();return(0,Xr.jsxs)("div",{children:[(0,Xr.jsxs)("h3",{style:{color:"white"},children:[(0,Xr.jsx)(Be,{})," Chat App"]}),(0,Xr.jsxs)("div",{style:{display:"flex",marginBottom:"1rem"},children:[(0,Xr.jsx)(ba,{src:e&&e.photoURL,style:{width:"30px",height:"30px",marginTop:"3px"},roundCircle:!0}),(0,Xr.jsxs)(ya,{children:[(0,Xr.jsx)(ya.Toggle,{style:{background:"transparent",border:"0px"},id:"dropdown-basic",children:e&&e.displayName}),(0,Xr.jsxs)(ya.Menu,{children:[(0,Xr.jsx)(ya.Item,{onClick:function(){n.current.click()},children:"\ud504\ub85c\ud544 \uc0ac\uc9c4 \ubcc0\uacbd"}),(0,Xr.jsx)(ya.Item,{onClick:function(){iq.auth().signOut()},children:"\ub85c\uadf8\uc544\uc6c3"})]})]}),(0,Xr.jsx)("input",{onChange:i,accept:"image/jpeg, image/png",style:{display:"none"},ref:n,type:"file"})]})]})};function hq(e){return Ue({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M423.5 0C339.5.3 272 69.5 272 153.5V224H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48h-48v-71.1c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v80c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-80C576 68 507.5-.3 423.5 0z"}}]})(e)}function dq(e){return Ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(e)}function pq(e){return Ue({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function vq(e){return Ue({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm84-143.4c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.6-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.2-8.4-25.3-7.1-33.8 3.1zM136.5 211c7.7-13.7 19.2-21.6 31.5-21.6s23.8 7.9 31.5 21.6l9.5 17c2.1 3.7 6.2 4.7 9.3 3.7 3.6-1.1 6-4.5 5.7-8.3-3.3-42.1-32.2-71.4-56-71.4s-52.7 29.3-56 71.4c-.3 3.7 2.1 7.2 5.7 8.3 3.4 1.1 7.4-.5 9.3-3.7l9.5-17zM328 152c-23.8 0-52.7 29.3-56 71.4-.3 3.7 2.1 7.2 5.7 8.3 3.5 1.1 7.4-.5 9.3-3.7l9.5-17c7.7-13.7 19.2-21.6 31.5-21.6s23.8 7.9 31.5 21.6l9.5 17c2.1 3.7 6.2 4.7 9.3 3.7 3.6-1.1 6-4.5 5.7-8.3-3.3-42.1-32.2-71.4-56-71.4z"}}]})(e)}function mq(e){return Ue({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm117.8-146.4c-10.2-8.5-25.3-7.1-33.8 3.1-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8zM168 240c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160-60c-25.7 0-55.9 16.9-59.9 42.1-1.7 11.2 11.5 18.2 19.8 10.8l9.5-8.5c14.8-13.2 46.2-13.2 61 0l9.5 8.5c8.5 7.4 21.6.3 19.8-10.8-3.8-25.2-34-42.1-59.7-42.1z"}}]})(e)}function yq(e){return Ue({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z"}}]})(e)}function gq(e){return{type:uq,payload:e}}function kq(e){return{type:cq,payload:e}}function _q(e){return{type:lq,payload:e}}var wq=function(e){d(n,e);var t=k(n);function n(){var e;c(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={favoritedChatRoom:[],usersRef:iq.database().ref("users"),activeChatRoomId:""},e.removeListeners=function(t){e.state.usersRef.child("".concat(t,"/favorited")).off()},e.addListeners=function(t){var n=e.state.usersRef;n.child(t).child("favorited").on("child_added",(function(t){var n=Ut({id:t.key},t.val());e.setState({favoritedChatRoom:[].concat(u(e.state.favoritedChatRoom),[n])})})),n.child(t).child("favorited").on("child_removed",(function(t){var n=Ut({id:t.key},t.val()),r=e.state.favoritedChatRoom.filter((function(e){return e.id!==n.id}));e.setState({favoritedChatRoom:r})}))},e.changeChatRoom=function(t){e.props.dispatch(gq(t)),e.props.dispatch(kq(!1)),e.setState({activeChatRoomId:t.id})},e.renderFavoritedChatRooms=function(t){return t.length>0&&t.map((function(t){return(0,Xr.jsxs)("li",{onClick:function(){return e.changeChatRoom(t)},style:{backgroundColor:t.id===e.state.activeChatRoomId&&"#ffffff45"},children:["# ",t.name]},t.id)}))},e}return f(n,[{key:"componentDidMount",value:function(){this.props.user&&this.addListeners(this.props.user.uid)}},{key:"componentWillUnmount",value:function(){this.props.user&&this.removeListeners(this.props.user.uid)}},{key:"render",value:function(){var e=this.state.favoritedChatRoom;return(0,Xr.jsxs)("div",{children:[(0,Xr.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,Xr.jsx)(vq,{style:{marginRight:"3px"}}),"FAVORITED (",e.length,")"]}),(0,Xr.jsx)("ul",{style:{listStyleType:"none",padding:"0"},children:this.renderFavoritedChatRooms(e)})]})}}]),n}(r.Component),bq=Ct((function(e){return{user:e.user.currentUser}}))(wq),xq=["bsPrefix","bg","pill","text","className","as"],Eq=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.bg,i=e.pill,a=e.text,o=e.className,s=e.as,u=void 0===s?"span":s,c=Vt(e,xq),l=ji(n,"badge");return(0,Xr.jsx)(u,Ut(Ut({ref:t},c),{},{className:qt()(o,l,i&&"rounded-pill",a&&"text-".concat(a),r&&"bg-".concat(r))}))}));Eq.displayName="Badge",Eq.defaultProps={bg:"primary",pill:!1};var Sq,Tq=Eq;function Cq(e){if((!Sq&&0!==Sq||e)&&Ht){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Sq=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Sq}function Iq(e){var t=function(e){var t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((function(){return function(){return t.current()}}),[])}function Nq(e,t){return function(e){var t=Vr(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Rq=/([A-Z])/g;var Pq=/^ms-/;function Dq(e){return function(e){return e.replace(Rq,"-$1").toLowerCase()}(e).replace(Pq,"-ms-")}var Oq=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var Aq=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(Dq(t))||Nq(e).getPropertyValue(Dq(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!Oq.test(e))}(i)?n+=Dq(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(Dq(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function Mq(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=Ur(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function Lq(e,t,n,r){null==n&&(n=function(e){var t=Aq(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=Mq(e,n,r),a=Ur(e,"transitionend",t);return function(){i(),a()}}function Fq(e){void 0===e&&(e=Vr());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(kY){return e.body}}var jq=ki("modal-open"),Uq=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,i=void 0===r||r,a=t.isRTL,o=void 0!==a&&a;c(this,e),this.handleContainerOverflow=i,this.isRTL=o,this.modals=[],this.ownerDocument=n}return f(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=Ft({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(Aq(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(jq,""),Aq(r,t)}},{key:"reset",value:function(){var e=this;u(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(jq),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),Vq=Uq,Bq=function(e,t){return Ht?null==e?(t||Vr()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null};var qq,zq=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Wq(e){var t=Si(),n=e||function(e){return qq||(qq=new Vq({ownerDocument:null==e?void 0:e.document})),qq}(t),i=(0,r.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:function(){return n.add(i.current)},remove:function(){return n.remove(i.current)},isTopModal:function(){return n.isTopModal(i.current)},setDialogRef:(0,r.useCallback)((function(e){i.current.dialog=e}),[]),setBackdropRef:(0,r.useCallback)((function(e){i.current.backdrop=e}),[])})}var Hq=(0,r.forwardRef)((function(e,t){var n=e.show,a=void 0!==n&&n,o=e.role,s=void 0===o?"dialog":o,u=e.className,c=e.style,l=e.children,f=e.backdrop,h=void 0===f||f,d=e.keyboard,p=void 0===d||d,v=e.onBackdropClick,m=e.onEscapeKeyDown,y=e.transition,g=e.backdropTransition,k=e.autoFocus,_=void 0===k||k,w=e.enforceFocus,x=void 0===w||w,E=e.restoreFocus,S=void 0===E||E,T=e.restoreFocusOptions,C=e.renderDialog,I=e.renderBackdrop,N=void 0===I?function(e){return(0,Xr.jsx)("div",Object.assign({},e))}:I,R=e.manager,P=e.container,D=e.onShow,O=e.onHide,A=void 0===O?function(){}:O,M=e.onExit,L=e.onExited,F=e.onExiting,j=e.onEnter,U=e.onEntering,V=e.onEntered,B=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,zq),q=function(e,t){var n=Si(),i=b((0,r.useState)((function(){return Bq(e,null==n?void 0:n.document)})),2),a=i[0],o=i[1];if(!a){var s=Bq(e);s&&o(s)}return(0,r.useEffect)((function(){t&&a&&t(a)}),[t,a]),(0,r.useEffect)((function(){var t=Bq(e);t!==a&&o(t)}),[e,a]),a}(P),z=Wq(R),W=dn(),H=rn(a),G=b((0,r.useState)(!a),2),K=G[0],Y=G[1],Q=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(function(){return z}),[z]),Ht&&!H&&a&&(Q.current=Fq()),y||a||K?a&&K&&Y(!1):Y(!0);var $=on((function(){if(z.add(),ne.current=Ur(document,"keydown",ee),te.current=Ur(document,"focus",(function(){return setTimeout(J)}),!0),D&&D(),_){var e=Fq(document);z.dialog&&e&&!Fr(z.dialog,e)&&(Q.current=e,z.dialog.focus())}})),X=on((function(){var e;(z.remove(),null==ne.current||ne.current(),null==te.current||te.current(),S)&&(null==(e=Q.current)||null==e.focus||e.focus(T),Q.current=null)}));(0,r.useEffect)((function(){a&&q&&$()}),[a,q,$]),(0,r.useEffect)((function(){K&&X()}),[K,X]),Iq((function(){X()}));var J=on((function(){if(x&&W()&&z.isTopModal()){var e=Fq();z.dialog&&e&&!Fr(z.dialog,e)&&z.dialog.focus()}})),Z=on((function(e){e.target===e.currentTarget&&(null==v||v(e),!0===h&&A())})),ee=on((function(e){p&&27===e.keyCode&&z.isTopModal()&&(null==m||m(e),e.defaultPrevented||A())})),te=(0,r.useRef)(),ne=(0,r.useRef)(),re=y;if(!q||!(a||re&&!K))return null;var ie=Object.assign({role:s,ref:z.setDialogRef,"aria-modal":"dialog"===s||void 0},B,{style:c,className:u,tabIndex:-1}),ae=C?C(ie):(0,Xr.jsx)("div",Object.assign({},ie,{children:r.cloneElement(l,{role:"document"})}));re&&(ae=(0,Xr.jsx)(re,{appear:!0,unmountOnExit:!0,in:!!a,onExit:M,onExiting:F,onExited:function(){Y(!0),null==L||L.apply(void 0,arguments)},onEnter:j,onEntering:U,onEntered:V,children:ae}));var oe=null;if(h){var se=g;oe=N({ref:z.setBackdropRef,onClick:Z}),se&&(oe=(0,Xr.jsx)(se,{appear:!0,in:!!a,children:oe}))}return(0,Xr.jsx)(Xr.Fragment,{children:i.createPortal((0,Xr.jsxs)(Xr.Fragment,{children:[oe,ae]}),q)})}));Hq.displayName="Modal";var Gq=Object.assign(Hq,{Manager:Vq});function Kq(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var Yq,Qq=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",$q=".sticky-top",Xq=".navbar-toggler",Jq=function(e){d(n,e);var t=k(n);function n(){return c(this,n),t.apply(this,arguments)}return f(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,Aq(t,Ft({},e,"".concat(parseFloat(Aq(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],Aq(t,Ft({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;Gs(p(n.prototype),"setContainerStyle",this).call(this,e);var r,i,a=this.getElement();if(i="modal-open",(r=a).classList?r.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,i)||("string"===typeof r.className?r.className=r.className+" "+i:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+i)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Wt(a,Qq).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),Wt(a,$q).forEach((function(n){return t.adjustAndStore(s,n,-e.scrollBarWidth)})),Wt(a,Xq).forEach((function(n){return t.adjustAndStore(s,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;Gs(p(n.prototype),"removeContainerStyle",this).call(this,e);var r,i,a=this.getElement();i="modal-open",(r=a).classList?r.classList.remove(i):"string"===typeof r.className?r.className=Kq(r.className,i):r.setAttribute("class",Kq(r.className&&r.className.baseVal||"",i));var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Wt(a,Qq).forEach((function(e){return t.restore(o,e)})),Wt(a,$q).forEach((function(e){return t.restore(s,e)})),Wt(a,Xq).forEach((function(e){return t.restore(s,e)}))}}]),n}(Vq);var Zq=!1,ez=r.createContext(null),tz="unmounted",nz="exited",rz="entering",iz="entered",az="exiting",oz=function(e){var t,n;function a(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=nz,r.appearStatus=rz):i=iz:i=t.unmountOnExit||t.mountOnEnter?tz:nz,r.state={status:i},r.nextCallback=null,r}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n),a.getDerivedStateFromProps=function(e,t){return e.in&&t.status===tz?{status:nz}:null};var o=a.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==rz&&n!==iz&&(t=rz):n!==rz&&n!==iz||(t=az)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===rz){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===nz&&this.setState({status:tz})},o.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[i.findDOMNode(this),r],o=a[0],s=a[1],u=this.getTimeouts(),c=r?u.appear:u.enter;!e&&!n||Zq?this.safeSetState({status:iz},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:rz},(function(){t.props.onEntering(o,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:iz},(function(){t.props.onEntered(o,s)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:i.findDOMNode(this);t&&!Zq?(this.props.onExit(r),this.safeSetState({status:az},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:nz},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:nz},(function(){e.props.onExited(r)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],s=a[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===tz)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,$e(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(ez.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},a}(r.Component);function sz(){}oz.contextType=ez,oz.propTypes={},oz.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:sz,onEntering:sz,onEntered:sz,onExit:sz,onExiting:sz,onExited:sz},oz.UNMOUNTED=tz,oz.EXITED=nz,oz.ENTERING=rz,oz.ENTERED=iz,oz.EXITING=az;var uz=oz;function cz(e,t){var n=Aq(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function lz(e,t){var n=cz(e,"transitionDuration"),r=cz(e,"transitionDelay"),i=Lq(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}function fz(e){e.offsetHeight}var hz,dz=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],pz=r.forwardRef((function(e,t){var n=e.onEnter,a=e.onEntering,o=e.onEntered,s=e.onExit,u=e.onExiting,c=e.onExited,l=e.addEndListener,f=e.children,h=e.childRef,d=Vt(e,dz),p=(0,r.useRef)(null),v=Gi(p,h),m=function(e){var t;v((t=e)&&"setState"in t?i.findDOMNode(t):null!=t?t:null)},y=function(e){return function(t){e&&p.current&&e(p.current,t)}},g=(0,r.useCallback)(y(n),[n]),k=(0,r.useCallback)(y(a),[a]),_=(0,r.useCallback)(y(o),[o]),w=(0,r.useCallback)(y(s),[s]),b=(0,r.useCallback)(y(u),[u]),x=(0,r.useCallback)(y(c),[c]),E=(0,r.useCallback)(y(l),[l]);return(0,Xr.jsx)(uz,Ut(Ut({ref:t},d),{},{onEnter:g,onEntered:_,onEntering:k,onExit:w,onExited:x,onExiting:b,addEndListener:E,nodeRef:p,children:"function"===typeof f?function(e,t){return f(e,Ut(Ut({},t),{},{ref:m}))}:r.cloneElement(f,{ref:m})}))})),vz=pz,mz=["className","children","transitionClasses"],yz=(Ft(hz={},rz,"show"),Ft(hz,iz,"show"),hz),gz=r.forwardRef((function(e,t){var n=e.className,i=e.children,a=e.transitionClasses,o=void 0===a?{}:a,s=Vt(e,mz),u=(0,r.useCallback)((function(e,t){fz(e),null==s.onEnter||s.onEnter(e,t)}),[s]);return(0,Xr.jsx)(vz,Ut(Ut({ref:t,addEndListener:lz},s),{},{onEnter:u,childRef:i.ref,children:function(e,t){return r.cloneElement(i,Ut(Ut({},t),{},{className:qt()("fade",n,i.props.className,yz[e],o[e])}))}}))}));gz.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},gz.displayName="Fade";var kz=gz,_z=fa("modal-body"),wz=r.createContext({onHide:function(){}}),bz=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],xz=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.contentClassName,a=e.centered,o=e.size,s=e.fullscreen,u=e.children,c=e.scrollable,l=Vt(e,bz);n=ji(n,"modal");var f="".concat(n,"-dialog"),h="string"===typeof s?"".concat(n,"-fullscreen-").concat(s):"".concat(n,"-fullscreen");return(0,Xr.jsx)("div",Ut(Ut({},l),{},{ref:t,className:qt()(f,r,o&&"".concat(n,"-").concat(o),a&&"".concat(f,"-centered"),c&&"".concat(f,"-scrollable"),s&&h),children:(0,Xr.jsx)("div",{className:qt()("".concat(n,"-content"),i),children:u})}))}));xz.displayName="ModalDialog";var Ez=xz,Sz=fa("modal-footer"),Tz=["className","variant"],Cz={"aria-label":ka().string,onClick:ka().func,variant:ka().oneOf(["white"])},Iz=r.forwardRef((function(e,t){var n=e.className,r=e.variant,i=Vt(e,Tz);return(0,Xr.jsx)("button",Ut({ref:t,type:"button",className:qt()("btn-close",r&&"btn-close-".concat(r),n)},i))}));Iz.displayName="CloseButton",Iz.propTypes=Cz,Iz.defaultProps={"aria-label":"Close"};var Nz=Iz,Rz=["closeLabel","closeVariant","closeButton","onHide","children"],Pz=r.forwardRef((function(e,t){var n=e.closeLabel,i=e.closeVariant,a=e.closeButton,o=e.onHide,s=e.children,u=Vt(e,Rz),c=(0,r.useContext)(wz),l=on((function(){null==c||c.onHide(),null==o||o()}));return(0,Xr.jsxs)("div",Ut(Ut({ref:t},u),{},{children:[s,a&&(0,Xr.jsx)(Nz,{"aria-label":n,variant:i,onClick:l})]}))}));Pz.defaultProps={closeLabel:"Close",closeButton:!1};var Dz=Pz,Oz=["bsPrefix","className"],Az=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=Vt(e,Oz);return n=ji(n,"modal-header"),(0,Xr.jsx)(Dz,Ut(Ut({ref:t},i),{},{className:qt()(r,n)}))}));Az.displayName="ModalHeader",Az.defaultProps={closeLabel:"Close",closeButton:!1};var Mz=Az,Lz=function(e){return r.forwardRef((function(t,n){return(0,Xr.jsx)("div",Ut(Ut({},t),{},{ref:n,className:qt()(t.className,e)}))}))},Fz=fa("modal-title",{Component:Lz("h4")}),jz=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"],Uz={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:Ez};function Vz(e){return(0,Xr.jsx)(kz,Ut(Ut({},e),{},{timeout:null}))}function Bz(e){return(0,Xr.jsx)(kz,Ut(Ut({},e),{},{timeout:null}))}var qz=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,a=e.style,o=e.dialogClassName,s=e.contentClassName,u=e.children,c=e.dialogAs,l=e["aria-labelledby"],f=e["aria-describedby"],h=e["aria-label"],d=e.show,p=e.animation,v=e.backdrop,m=e.keyboard,y=e.onEscapeKeyDown,g=e.onShow,k=e.onHide,_=e.container,w=e.autoFocus,x=e.enforceFocus,E=e.restoreFocus,S=e.restoreFocusOptions,T=e.onEntered,C=e.onExit,I=e.onExiting,N=e.onEnter,R=e.onEntering,P=e.onExited,D=e.backdropClassName,O=e.manager,A=Vt(e,jz),M=b((0,r.useState)({}),2),L=M[0],F=M[1],j=b((0,r.useState)(!1),2),U=j[0],V=j[1],B=(0,r.useRef)(!1),q=(0,r.useRef)(!1),z=(0,r.useRef)(null),W=b(un(),2),H=W[0],G=W[1],K=Gi(t,G),Y=on(k),Q=Bi();n=ji(n,"modal");var $=(0,r.useMemo)((function(){return{onHide:Y}}),[Y]);function X(){return O||function(e){return Yq||(Yq=new Jq(e)),Yq}({isRTL:Q})}function J(e){if(Ht){var t=X().getScrollbarWidth()>0,n=e.scrollHeight>Vr(e).documentElement.clientHeight;F({paddingRight:t&&!n?Cq():void 0,paddingLeft:!t&&n?Cq():void 0})}}var Z=on((function(){H&&J(H.dialog)}));Iq((function(){jr(window,"resize",Z),null==z.current||z.current()}));var ee=function(){B.current=!0},te=function(e){B.current&&H&&e.target===H.dialog&&(q.current=!0),B.current=!1},ne=function(){V(!0),z.current=Lq(H.dialog,(function(){V(!1)}))},re=function(e){"static"!==v?q.current||e.target!==e.currentTarget?q.current=!1:null==k||k():function(e){e.target===e.currentTarget&&ne()}(e)},ie=(0,r.useCallback)((function(e){return(0,Xr.jsx)("div",Ut(Ut({},e),{},{className:qt()("".concat(n,"-backdrop"),D,!p&&"show")}))}),[p,D,n]),ae=Ut(Ut({},a),L);ae.display="block";return(0,Xr.jsx)(wz.Provider,{value:$,children:(0,Xr.jsx)(Gq,{show:d,ref:K,backdrop:v,container:_,keyboard:!0,autoFocus:w,enforceFocus:x,restoreFocus:E,restoreFocusOptions:S,onEscapeKeyDown:function(e){m||"static"!==v?m&&y&&y(e):(e.preventDefault(),ne())},onShow:g,onHide:k,onEnter:function(e,t){e&&J(e),null==N||N(e,t)},onEntering:function(e,t){null==R||R(e,t),Qt(window,"resize",Z)},onEntered:T,onExit:function(e){null==z.current||z.current(),null==C||C(e)},onExiting:I,onExited:function(e){e&&(e.style.display=""),null==P||P(e),jr(window,"resize",Z)},manager:X(),transition:p?Vz:void 0,backdropTransition:p?Bz:void 0,renderBackdrop:ie,renderDialog:function(e){return(0,Xr.jsx)("div",Ut(Ut({role:"dialog"},e),{},{style:ae,className:qt()(i,n,U&&"".concat(n,"-static")),onClick:v?re:void 0,onMouseUp:te,"aria-label":h,"aria-labelledby":l,"aria-describedby":f,children:(0,Xr.jsx)(c,Ut(Ut({},A),{},{onMouseDown:ee,className:o,contentClassName:s,children:u}))}))}})})}));qz.displayName="Modal",qz.defaultProps=Uz;var zz=Object.assign(qz,{Body:_z,Header:Mz,Title:Fz,Footer:Sz,Dialog:Ez,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Wz=["as","className","type","tooltip"],Hz={type:ka().string,tooltip:ka().bool,as:ka().elementType},Gz=r.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,o=void 0===a?"valid":a,s=e.tooltip,u=void 0!==s&&s,c=Vt(e,Wz);return(0,Xr.jsx)(r,Ut(Ut({},c),{},{ref:t,className:qt()(i,"".concat(o,"-").concat(u?"tooltip":"feedback"))}))}));Gz.displayName="Feedback",Gz.propTypes=Hz;var Kz=Gz,Yz=r.createContext({}),Qz=["id","bsPrefix","className","type","isValid","isInvalid","as"],$z=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,a=e.className,o=e.type,s=void 0===o?"checkbox":o,u=e.isValid,c=void 0!==u&&u,l=e.isInvalid,f=void 0!==l&&l,h=e.as,d=void 0===h?"input":h,p=Vt(e,Qz),v=(0,r.useContext)(Yz).controlId;return i=ji(i,"form-check-input"),(0,Xr.jsx)(d,Ut(Ut({},p),{},{ref:t,type:s,id:n||v,className:qt()(a,i,c&&"is-valid",f&&"is-invalid")}))}));$z.displayName="FormCheckInput";var Xz=$z,Jz=["bsPrefix","className","htmlFor"],Zz=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,a=e.htmlFor,o=Vt(e,Jz),s=(0,r.useContext)(Yz).controlId;return n=ji(n,"form-check-label"),(0,Xr.jsx)("label",Ut(Ut({},o),{},{ref:t,htmlFor:a||s,className:qt()(i,n)}))}));Zz.displayName="FormCheckLabel";var eW=Zz;function tW(e,t){var n=0;return r.Children.map(e,(function(e){return r.isValidElement(e)?t(e,n++):e}))}var nW=["id","bsPrefix","bsSwitchPrefix","inline","reverse","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],rW=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,o=e.inline,s=void 0!==o&&o,u=e.reverse,c=void 0!==u&&u,l=e.disabled,f=void 0!==l&&l,h=e.isValid,d=void 0!==h&&h,p=e.isInvalid,v=void 0!==p&&p,m=e.feedbackTooltip,y=void 0!==m&&m,g=e.feedback,k=e.feedbackType,_=e.className,w=e.style,b=e.title,x=void 0===b?"":b,E=e.type,S=void 0===E?"checkbox":E,T=e.label,C=e.children,I=e.as,N=void 0===I?"input":I,R=Vt(e,nW);i=ji(i,"form-check"),a=ji(a,"form-switch");var P=(0,r.useContext)(Yz).controlId,D=(0,r.useMemo)((function(){return{controlId:n||P}}),[P,n]),O=!C&&null!=T&&!1!==T||function(e,t){return r.Children.toArray(e).some((function(e){return r.isValidElement(e)&&e.type===t}))}(C,eW),A=(0,Xr.jsx)(Xz,Ut(Ut({},R),{},{type:"switch"===S?"checkbox":S,ref:t,isValid:d,isInvalid:v,disabled:f,as:N}));return(0,Xr.jsx)(Yz.Provider,{value:D,children:(0,Xr.jsx)("div",{style:w,className:qt()(_,O&&i,s&&"".concat(i,"-inline"),c&&"".concat(i,"-reverse"),"switch"===S&&a),children:C||(0,Xr.jsxs)(Xr.Fragment,{children:[A,O&&(0,Xr.jsx)(eW,{title:x,children:T}),g&&(0,Xr.jsx)(Kz,{type:k,tooltip:y,children:g})]})})})}));rW.displayName="FormCheck";var iW=Object.assign(rW,{Input:Xz,Label:eW}),aW=["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"],oW=r.forwardRef((function(e,t){var n,i,a=e.bsPrefix,o=e.type,s=e.size,u=e.htmlSize,c=e.id,l=e.className,f=e.isValid,h=void 0!==f&&f,d=e.isInvalid,p=void 0!==d&&d,v=e.plaintext,m=e.readOnly,y=e.as,g=void 0===y?"input":y,k=Vt(e,aW),_=(0,r.useContext)(Yz).controlId;(a=ji(a,"form-control"),v)?n=Ft({},"".concat(a,"-plaintext"),!0):(Ft(i={},a,!0),Ft(i,"".concat(a,"-").concat(s),s),n=i);return(0,Xr.jsx)(g,Ut(Ut({},k),{},{type:o,size:u,ref:t,readOnly:m,id:c||_,className:qt()(l,n,h&&"is-valid",p&&"is-invalid","color"===o&&"".concat(a,"-color"))}))}));oW.displayName="FormControl";var sW=Object.assign(oW,{Feedback:Kz}),uW=fa("form-floating"),cW=["controlId","as"],lW=r.forwardRef((function(e,t){var n=e.controlId,i=e.as,a=void 0===i?"div":i,o=Vt(e,cW),s=(0,r.useMemo)((function(){return{controlId:n}}),[n]);return(0,Xr.jsx)(Yz.Provider,{value:s,children:(0,Xr.jsx)(a,Ut(Ut({},o),{},{ref:t}))})}));lW.displayName="FormGroup";var fW=lW,hW=["as","bsPrefix","className"],dW=["className"];var pW=r.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,i=Vt(e,hW);n=ji(n,"col");var a=Ui(),o=Vi(),s=[],u=[];return a.forEach((function(e){var t,r,a,c=i[e];delete i[e],"object"===typeof c&&null!=c?(t=c.span,r=c.offset,a=c.order):t=c;var l=e!==o?"-".concat(e):"";t&&s.push(!0===t?"".concat(n).concat(l):"".concat(n).concat(l,"-").concat(t)),null!=a&&u.push("order".concat(l,"-").concat(a)),null!=r&&u.push("offset".concat(l,"-").concat(r))})),[Ut(Ut({},i),{},{className:qt().apply(void 0,[r].concat(s,u))}),{as:t,bsPrefix:n,spans:s}]}(e),r=b(n,2),i=r[0],a=i.className,o=Vt(i,dW),s=r[1],u=s.as,c=void 0===u?"div":u,l=s.bsPrefix,f=s.spans;return(0,Xr.jsx)(c,Ut(Ut({},o),{},{ref:t,className:qt()(a,!f.length&&l)}))}));pW.displayName="Col";var vW=pW,mW=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],yW=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"label":n,a=e.bsPrefix,o=e.column,s=e.visuallyHidden,u=e.className,c=e.htmlFor,l=Vt(e,mW),f=(0,r.useContext)(Yz).controlId;a=ji(a,"form-label");var h="col-form-label";"string"===typeof o&&(h="".concat(h," ").concat(h,"-").concat(o));var d=qt()(u,a,s&&"visually-hidden",o&&h);return c=c||f,o?(0,Xr.jsx)(vW,Ut({ref:t,as:"label",className:d,htmlFor:c},l)):(0,Xr.jsx)(i,Ut({ref:t,className:d,htmlFor:c},l))}));yW.displayName="FormLabel",yW.defaultProps={column:!1,visuallyHidden:!1};var gW=yW,kW=["bsPrefix","className","id"],_W=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,a=e.id,o=Vt(e,kW),s=(0,r.useContext)(Yz).controlId;return n=ji(n,"form-range"),(0,Xr.jsx)("input",Ut(Ut({},o),{},{type:"range",ref:t,className:qt()(i,n),id:a||s}))}));_W.displayName="FormRange";var wW=_W,bW=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],xW=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.size,a=e.htmlSize,o=e.className,s=e.isValid,u=void 0!==s&&s,c=e.isInvalid,l=void 0!==c&&c,f=e.id,h=Vt(e,bW),d=(0,r.useContext)(Yz).controlId;return n=ji(n,"form-select"),(0,Xr.jsx)("select",Ut(Ut({},h),{},{size:a,ref:t,className:qt()(o,n,i&&"".concat(n,"-").concat(i),u&&"is-valid",l&&"is-invalid"),id:f||d}))}));xW.displayName="FormSelect";var EW=xW,SW=["bsPrefix","className","as","muted"],TW=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,o=e.muted,s=Vt(e,SW);return n=ji(n,"form-text"),(0,Xr.jsx)(a,Ut(Ut({},s),{},{ref:t,className:qt()(r,n,o&&"text-muted")}))}));TW.displayName="FormText";var CW=TW,IW=r.forwardRef((function(e,t){return(0,Xr.jsx)(iW,Ut(Ut({},e),{},{ref:t,type:"switch"}))}));IW.displayName="Switch";var NW=Object.assign(IW,{Input:iW.Input,Label:iW.Label}),RW=["bsPrefix","className","children","controlId","label"],PW=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,o=e.label,s=Vt(e,RW);return n=ji(n,"form-floating"),(0,Xr.jsxs)(fW,Ut(Ut({ref:t,className:qt()(r,n),controlId:a},s),{},{children:[i,(0,Xr.jsx)("label",{htmlFor:a,children:o})]}))}));PW.displayName="FloatingLabel";var DW=PW,OW=["className","validated","as"],AW={_ref:ka().any,validated:ka().bool,as:ka().elementType},MW=r.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,o=Vt(e,OW);return(0,Xr.jsx)(a,Ut(Ut({},o),{},{ref:t,className:qt()(n,r&&"was-validated")}))}));MW.displayName="Form",MW.propTypes=AW;var LW=Object.assign(MW,{Group:fW,Control:sW,Floating:uW,Check:iW,Switch:NW,Label:gW,Text:CW,Range:wW,Select:EW,FloatingLabel:DW}),FW=function(e){d(n,e);var t=k(n);function n(){var e;c(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={show:!1,name:"",description:"",chatRoomsRef:iq.database().ref("chatRooms"),messagesRef:iq.database().ref("messages"),chatRooms:[],firstLoad:!0,activeChatRoomId:"",notifications:[]},e.setFirstChatRoom=function(){var t=e.state.chatRooms[0];e.state.firstLoad&&e.state.chatRooms.length>0&&(e.props.dispatch(gq(t)),e.setState({activeChatRoomId:t.id})),e.setState({firstLoad:!1})},e.AddChatRoomsListeners=function(){var t=[];e.state.chatRoomsRef.on("child_added",(function(n){t.push(n.val()),e.setState({chatRooms:t},(function(){return e.setFirstChatRoom()})),e.addNotificationListener(n.key)}))},e.addNotificationListener=function(t){e.state.messagesRef.child(t).on("value",(function(n){e.props.chatRoom&&e.handleNotification(t,e.props.chatRoom.id,e.state.notifications,n)}))},e.handleNotification=function(t,n,r,i){var a=r.findIndex((function(e){return e.id===t})),o=0;-1===a?r.push({id:t,total:i.numChildren(),lastKnownTotal:i.numChildren(),count:0}):(t!==n&&(o=r[a].lastKnownTotal,i.numChildren()-o>0&&(r[a].count=i.numChildren()-o)),r[a].total=i.numChildren()),e.setState({notifications:r})},e.handleClose=function(){return e.setState({show:!1})},e.handleShow=function(){return e.setState({show:!0})},e.handleSubmit=function(t){t.preventDefault();var n=e.state,r=n.name,i=n.description;e.isFormValid(r,i)&&e.addChatRoom()},e.addChatRoom=Oe(Pe().mark((function t(){var n,r,i,a,o,s;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.chatRoomsRef.push().key,r=e.state,i=r.name,a=r.description,o=e.props.user,s={id:n,name:i,description:a,createdBy:{name:o.displayName,image:o.photoURL}},t.prev=4,t.next=7,e.state.chatRoomsRef.child(n).update(s);case 7:e.setState({name:"",description:"",show:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),alert(t.t0);case 13:case"end":return t.stop()}}),t,null,[[4,10]])}))),e.isFormValid=function(e,t){return e&&t},e.changeChatRoom=function(t){e.props.dispatch(gq(t)),e.props.dispatch(kq(!1)),e.setState({activeChatRoomId:t.id}),e.clearNotifications()},e.clearNotifications=function(){var t=e.state.notifications.findIndex((function(t){return t.id===e.props.chatRoom.id}));if(-1!==t){var n=u(e.state.notifications);n[t].lastKnownTotal=e.state.notifications[t].total,n[t].count=0,e.setState({notifications:n})}},e.getNotificationCount=function(t){var n=0;if(e.state.notifications.forEach((function(e){e.id===t.id&&(n=e.count)})),n>0)return n},e.renderChatRooms=function(t){return t.length>0&&t.map((function(t){return(0,Xr.jsxs)("li",{style:{backgroundColor:t.id===e.state.activeChatRoomId&&"#ffffff45"},onClick:function(){return e.changeChatRoom(t)},children:["# ",t.name,(0,Xr.jsx)(Tq,{style:{float:"right"},bg:"danger",children:e.getNotificationCount(t)})]},t.id)}))},e}return f(n,[{key:"componentDidMount",value:function(){this.AddChatRoomsListeners()}},{key:"componentWillUnmount",value:function(){var e=this;this.state.chatRoomsRef.off(),this.state.chatRooms.forEach((function(t){e.state.messagesRef.child(t.id).off()}))}},{key:"render",value:function(){var e=this;return(0,Xr.jsxs)("div",{children:[(0,Xr.jsxs)("div",{style:{position:"relative",width:"100%",display:"flex",alignItems:"center"},children:[(0,Xr.jsx)(mq,{style:{marginRight:3}}),"CHAT ROOMS (1)",(0,Xr.jsx)(pq,{style:{position:"absolute",right:0,cursor:"pointer"},onClick:this.handleShow})]}),(0,Xr.jsx)("ul",{style:{listStyleType:"none",padding:0},children:this.renderChatRooms(this.state.chatRooms)}),(0,Xr.jsxs)(zz,{show:this.state.show,onHide:this.handleClose,children:[(0,Xr.jsx)(zz.Header,{closeButton:!0,children:(0,Xr.jsx)(zz.Title,{children:"Create a chat room"})}),(0,Xr.jsx)(zz.Body,{children:(0,Xr.jsxs)(LW,{onSubmit:this.handleSubmit,children:[(0,Xr.jsxs)(LW.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,Xr.jsx)(LW.Label,{children:"\ubc29 \uc774\ub984"}),(0,Xr.jsx)(LW.Control,{onChange:function(t){return e.setState({name:t.target.value})},type:"text",placeholder:"Enter a chat room name"})]}),(0,Xr.jsxs)(LW.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,Xr.jsx)(LW.Label,{children:"\ubc29 \uc124\uba85"}),(0,Xr.jsx)(LW.Control,{onChange:function(t){return e.setState({description:t.target.value})},type:"text",placeholder:"Enter a chat room description"})]})]})}),(0,Xr.jsxs)(zz.Footer,{children:[(0,Xr.jsx)(ia,{variant:"secondary",onClick:this.handleClose,children:"Close"}),(0,Xr.jsx)(ia,{variant:"primary",onClick:this.handleSubmit,children:"Create"})]})]})]})}}]),n}(r.Component),jW=Ct((function(e){return{user:e.user.currentUser,chatRoom:e.chatRoom.currentChatRoom}}))(FW),UW=function(e){d(n,e);var t=k(n);function n(){var e;c(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={usersRef:iq.database().ref("users"),users:[],activeChatRoom:"'"},e.addUserListeners=function(t){var n=e.state.usersRef,r=[];n.on("child_added",(function(n){if(t!==n.key){var i=n.val();i.uid=n.key,i.status="offline",r.push(i),e.setState({users:r})}}))},e.getChatRoomId=function(t){var n=e.props.user.uid;return t>n?"".concat(t,"/").concat(n):"".concat(n,"/").concat(t)},e.changeChatRoom=function(t){var n={id:e.getChatRoomId(t.uid),name:t.name};e.props.dispatch(gq(n)),e.props.dispatch(kq(!0)),e.setActiveChatRoom(t.uid)},e.setActiveChatRoom=function(t){e.setState({activeChatRoom:t})},e.renderDirectMessages=function(t){return t.length>0&&t.map((function(t){return(0,Xr.jsxs)("li",{style:{backgroundColor:t.uid===e.state.activeChatRoom&&"#ffffff45"},onClick:function(){return e.changeChatRoom(t)},children:["# ",t.name]},t.uid)}))},e}return f(n,[{key:"componentDidMount",value:function(){this.props.user&&this.addUserListeners(this.props.user.uid)}},{key:"render",value:function(){var e=this.state.users;return(0,Xr.jsxs)("div",{children:[(0,Xr.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,Xr.jsx)(yq,{style:{marginRight:3}}),"DIRECT MESSAGES (1)"]}),(0,Xr.jsx)("ul",{style:{listStyleType:"none",padding:0},children:this.renderDirectMessages(e)})]})}}]),n}(r.Component),VW=Ct((function(e){return{user:e.user.currentUser}}))(UW);var BW=function(){return(0,Xr.jsxs)("div",{style:{backgroundColor:"#7b83eb",padding:"2rem",minHeight:"100vh",color:"white",minWidth:"275px"},children:[(0,Xr.jsx)(fq,{}),(0,Xr.jsx)(bq,{}),(0,Xr.jsx)(jW,{}),(0,Xr.jsx)(VW,{})]})};function qW(e,t){return Array.isArray(e)?e.includes(t):e===t}var zW=r.createContext({});zW.displayName="AccordionContext";var WW=zW,HW=r.createContext({eventKey:""});HW.displayName="AccordionItemContext";var GW=HW,KW=["as","bsPrefix","className","onClick"];function YW(e,t){var n=(0,r.useContext)(WW),i=n.activeEventKey,a=n.onSelect,o=n.alwaysOpen;return function(n){var r=e===i?null:e;o&&(r=Array.isArray(i)?i.includes(e)?i.filter((function(t){return t!==e})):[].concat(u(i),[e]):[e]),null==a||a(r,n),null==t||t(n)}}var QW=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"button":n,a=e.bsPrefix,o=e.className,s=e.onClick,u=Vt(e,KW);a=ji(a,"accordion-button");var c=(0,r.useContext)(GW).eventKey,l=YW(c,s),f=(0,r.useContext)(WW).activeEventKey;return"button"===i&&(u.type="button"),(0,Xr.jsx)(i,Ut(Ut({ref:t,onClick:l},u),{},{"aria-expanded":c===f,className:qt()(o,a,!qW(f,c)&&"collapsed")}))}));QW.displayName="AccordionButton";var $W=QW,XW=["bsPrefix","fluid","as","className"],JW=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,a=void 0===i?"div":i,o=e.className,s=Vt(e,XW),u=ji(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,Xr.jsx)(a,Ut(Ut({ref:t},s),{},{className:qt()(o,r?"".concat(u).concat(c):u)}))}));JW.displayName="Container",JW.defaultProps={fluid:!1};var ZW=JW,eH=["bsPrefix","className","as"],tH=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"div":i,o=Vt(e,eH),s=ji(n,"row"),u=Ui(),c=Vi(),l="".concat(s,"-cols"),f=[];return u.forEach((function(e){var t,n=o[e];delete o[e],t=null!=n&&"object"===typeof n?n.cols:n;var r=e!==c?"-".concat(e):"";null!=t&&f.push("".concat(l).concat(r,"-").concat(t))})),(0,Xr.jsx)(a,Ut(Ut({ref:t},o),{},{className:qt().apply(void 0,[r,s].concat(f))}))}));tH.displayName="Row";var nH=tH,rH=["bsPrefix","size","hasValidation","className","as"],iH=fa("input-group-text",{Component:"span"}),aH=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.size,a=e.hasValidation,o=e.className,s=e.as,u=void 0===s?"div":s,c=Vt(e,rH);n=ji(n,"input-group");var l=(0,r.useMemo)((function(){return{}}),[]);return(0,Xr.jsx)(Yi.Provider,{value:l,children:(0,Xr.jsx)(u,Ut(Ut({ref:t},c),{},{className:qt()(o,n,i&&"".concat(n,"-").concat(i),a&&"has-validation")}))})}));aH.displayName="InputGroup";var oH=Object.assign(aH,{Text:iH,Radio:function(e){return(0,Xr.jsx)(iH,{children:(0,Xr.jsx)(Xz,Ut({type:"radio"},e))})},Checkbox:function(e){return(0,Xr.jsx)(iH,{children:(0,Xr.jsx)(Xz,Ut({type:"checkbox"},e))})}});var sH,uH=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)},cH=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],lH={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function fH(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=lH[e];return n+parseInt(Aq(t,r[0]),10)+parseInt(Aq(t,r[1]),10)}var hH=(Ft(sH={},nz,"collapse"),Ft(sH,az,"collapsing"),Ft(sH,rz,"collapsing"),Ft(sH,iz,"collapse show"),sH),dH={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:fH},pH=r.forwardRef((function(e,t){var n=e.onEnter,i=e.onEntering,a=e.onEntered,o=e.onExit,s=e.onExiting,u=e.className,c=e.children,l=e.dimension,f=void 0===l?"height":l,h=e.getDimensionValue,d=void 0===h?fH:h,p=Vt(e,cH),v="function"===typeof f?f():f,m=(0,r.useMemo)((function(){return uH((function(e){e.style[v]="0"}),n)}),[v,n]),y=(0,r.useMemo)((function(){return uH((function(e){var t="scroll".concat(v[0].toUpperCase()).concat(v.slice(1));e.style[v]="".concat(e[t],"px")}),i)}),[v,i]),g=(0,r.useMemo)((function(){return uH((function(e){e.style[v]=null}),a)}),[v,a]),k=(0,r.useMemo)((function(){return uH((function(e){e.style[v]="".concat(d(v,e),"px"),fz(e)}),o)}),[o,d,v]),_=(0,r.useMemo)((function(){return uH((function(e){e.style[v]=null}),s)}),[v,s]);return(0,Xr.jsx)(vz,Ut(Ut({ref:t,addEndListener:lz},p),{},{"aria-expanded":p.role?p.in:null,onEnter:m,onEntering:y,onEntered:g,onExit:k,onExiting:_,childRef:c.ref,children:function(e,t){return r.cloneElement(c,Ut(Ut({},t),{},{className:qt()(u,c.props.className,hH[e],"width"===v&&"collapse-horizontal")}))}}))}));pH.defaultProps=dH;var vH=pH,mH=["as","bsPrefix","className","children","eventKey"],yH=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"div":n,a=e.bsPrefix,o=e.className,s=e.children,u=e.eventKey,c=Vt(e,mH),l=(0,r.useContext)(WW).activeEventKey;return a=ji(a,"accordion-collapse"),(0,Xr.jsx)(vH,Ut(Ut({ref:t,in:qW(l,u)},c),{},{className:qt()(o,a),children:(0,Xr.jsx)(i,{children:r.Children.only(s)})}))}));yH.displayName="AccordionCollapse";var gH=yH,kH=["as","bsPrefix","className"],_H=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"div":n,a=e.bsPrefix,o=e.className,s=Vt(e,kH);a=ji(a,"accordion-body");var u=(0,r.useContext)(GW).eventKey;return(0,Xr.jsx)(gH,{eventKey:u,children:(0,Xr.jsx)(i,Ut(Ut({ref:t},s),{},{className:qt()(o,a)}))})}));_H.displayName="AccordionBody";var wH=_H,bH=["as","bsPrefix","className","children","onClick"],xH=r.forwardRef((function(e,t){var n=e.as,r=void 0===n?"h2":n,i=e.bsPrefix,a=e.className,o=e.children,s=e.onClick,u=Vt(e,bH);return i=ji(i,"accordion-header"),(0,Xr.jsx)(r,Ut(Ut({ref:t},u),{},{className:qt()(a,i),children:(0,Xr.jsx)($W,{onClick:s,children:o})}))}));xH.displayName="AccordionHeader";var EH=xH,SH=["as","bsPrefix","className","eventKey"],TH=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"div":n,a=e.bsPrefix,o=e.className,s=e.eventKey,u=Vt(e,SH);a=ji(a,"accordion-item");var c=(0,r.useMemo)((function(){return{eventKey:s}}),[s]);return(0,Xr.jsx)(GW.Provider,{value:c,children:(0,Xr.jsx)(i,Ut(Ut({ref:t},u),{},{className:qt()(o,a)}))})}));TH.displayName="AccordionItem";var CH=TH,IH=["as","activeKey","bsPrefix","className","onSelect","flush","alwaysOpen"],NH=r.forwardRef((function(e,t){var n=Zt(e,{activeKey:"onSelect"}),i=n.as,a=void 0===i?"div":i,o=n.activeKey,s=n.bsPrefix,u=n.className,c=n.onSelect,l=n.flush,f=n.alwaysOpen,h=Vt(n,IH),d=ji(s,"accordion"),p=(0,r.useMemo)((function(){return{activeEventKey:o,onSelect:c,alwaysOpen:f}}),[o,c,f]);return(0,Xr.jsx)(WW.Provider,{value:p,children:(0,Xr.jsx)(a,Ut(Ut({ref:t},h),{},{className:qt()(u,d,l&&"".concat(d,"-flush"))}))})}));NH.displayName="Accordion";var RH=Object.assign(NH,{Button:$W,Collapse:gH,Item:CH,Header:EH,Body:wH}),PH=["bsPrefix","className","variant","as"],DH=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.variant,a=e.as,o=void 0===a?"img":a,s=Vt(e,PH),u=ji(n,"card-img");return(0,Xr.jsx)(o,Ut({ref:t,className:qt()(i?"".concat(u,"-").concat(i):u,r)},s))}));DH.displayName="CardImg";var OH=DH,AH=r.createContext(null);AH.displayName="CardHeaderContext";var MH=AH,LH=["bsPrefix","className","as"],FH=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,a=e.as,o=void 0===a?"div":a,s=Vt(e,LH),u=ji(n,"card-header"),c=(0,r.useMemo)((function(){return{cardHeaderBsPrefix:u}}),[u]);return(0,Xr.jsx)(MH.Provider,{value:c,children:(0,Xr.jsx)(o,Ut(Ut({ref:t},s),{},{className:qt()(i,u)}))})}));FH.displayName="CardHeader";var jH=FH,UH=["bsPrefix","className","bg","text","border","body","children","as"],VH=Lz("h5"),BH=Lz("h6"),qH=fa("card-body"),zH=fa("card-title",{Component:VH}),WH=fa("card-subtitle",{Component:BH}),HH=fa("card-link",{Component:"a"}),GH=fa("card-text",{Component:"p"}),KH=fa("card-footer"),YH=fa("card-img-overlay"),QH=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.bg,a=e.text,o=e.border,s=e.body,u=e.children,c=e.as,l=void 0===c?"div":c,f=Vt(e,UH),h=ji(n,"card");return(0,Xr.jsx)(l,Ut(Ut({ref:t},f),{},{className:qt()(r,h,i&&"bg-".concat(i),a&&"text-".concat(a),o&&"border-".concat(o)),children:s?(0,Xr.jsx)(qH,{children:u}):u}))}));QH.displayName="Card",QH.defaultProps={body:!1};var $H=Object.assign(QH,{Img:OH,Title:zH,Subtitle:WH,Body:qH,Link:HH,Text:GH,Header:jH,Footer:KH,ImgOverlay:YH});function XH(e){return Ue({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}}]})(e)}function JH(e){return Ue({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}}]})(e)}function ZH(e){return Ue({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]})(e)}var eG=function(e){var t=e.handleSearchChange,n=Lt((function(e){return e.chatRoom.currentChatRoom})),i=Lt((function(e){return e.chatRoom.isPrivateChatRoom})),a=b((0,r.useState)(!1),2),o=a[0],s=a[1],u=iq.database().ref("users"),c=Lt((function(e){return e.user.currentUser})),l=Lt((function(e){return e.chatRoom.userPosts}));(0,r.useEffect)((function(){n&&c&&f(n.id,c.uid)}),[]);var f=function(e,t){u.child(t).child("favorited").once("value").then((function(t){if(null!==t.val()){var n=Object.keys(t.val()).includes(e);s(n)}}))};function h(e){var t=e.children,n=YW(e.eventKey,(function(){return console.log("totally custom!")}));return(0,Xr.jsx)(ia,{style:{backgroundColor:"transparent",color:"#0E61E2",border:"none"},onClick:n,children:t})}return(0,Xr.jsx)("div",{style:{width:"100%",height:"170px",border:".2rem solid #ececec",borderRadius:"4px",padding:"1rem",marginBottom:"1rem"},children:(0,Xr.jsxs)(ZW,{children:[(0,Xr.jsxs)(nH,{children:[(0,Xr.jsx)(vW,{children:(0,Xr.jsxs)("h2",{children:[i?(0,Xr.jsx)(dq,{style:{marginBottom:"10px"}}):(0,Xr.jsx)(hq,{style:{marginBottom:"10px"}})," ",n&&n.name,!i&&(0,Xr.jsx)("span",{style:{cursor:"pointer"},onClick:function(){o?(u.child("".concat(c.uid,"/favorited")).child(n.id).remove((function(e){null!==e&&console.error(e)})),s((function(e){return!e}))):(u.child("".concat(c.uid,"/favorited")).update(Ft({},n.id,{name:n.name,description:n.description,createdBy:{name:n.createdBy.name,image:n.createdBy.image}})),s((function(e){return!e})))},children:o?(0,Xr.jsx)(JH,{style:{marginBottom:"10px"}}):(0,Xr.jsx)(XH,{style:{marginBottom:"10px"}})})]})}),(0,Xr.jsx)(vW,{children:(0,Xr.jsxs)(oH,{className:"mb-3",children:[(0,Xr.jsx)(oH.Text,{id:"basic-addon1",children:(0,Xr.jsx)(ZH,{})}),(0,Xr.jsx)(sW,{onChange:t,placeholder:"Search Messages","aria-label":"Search","aria-describedby":"basic-addon1"})]})})]}),!i&&(0,Xr.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,Xr.jsxs)("p",{children:[(0,Xr.jsx)(ba,{src:n&&n.createdBy.image,roundedCircle:!0,style:{width:"30px",height:"30px"}})," ",n&&n.createdBy.name]})}),(0,Xr.jsxs)(nH,{children:[(0,Xr.jsx)(vW,{children:(0,Xr.jsx)(RH,{children:(0,Xr.jsxs)($H,{children:[(0,Xr.jsx)($H.Header,{style:{padding:"0 1rem"},children:(0,Xr.jsx)(h,{eventKey:"0",children:"Description"})}),(0,Xr.jsx)(RH.Collapse,{eventKey:"0",children:(0,Xr.jsx)($H.Body,{children:n&&n.description})})]})})}),(0,Xr.jsx)(vW,{children:(0,Xr.jsx)(RH,{children:(0,Xr.jsxs)($H,{children:[(0,Xr.jsx)($H.Header,{style:{padding:"0 1rem"},children:(0,Xr.jsx)(h,{eventKey:"0",children:"Posts Count"})}),(0,Xr.jsx)(RH.Collapse,{eventKey:"0",children:(0,Xr.jsx)($H.Body,{children:l&&function(e){return Object.entries(e).sort((function(e,t){return t[1].count-e[1].count})).map((function(e,t){var n=b(e,2),r=n[0],i=n[1];return(0,Xr.jsxs)("div",{style:{display:"flex"},children:[(0,Xr.jsx)("img",{style:{borderRadius:25},width:48,height:48,className:"mr-3",src:i.image,alt:i.name}),(0,Xr.jsxs)("div",{children:[(0,Xr.jsx)("h6",{children:r}),(0,Xr.jsxs)("p",{children:[i.count," \uac1c"]})]})]},t)}))}(l)})})]})})})]})]})})},tG=n(426),nG=n.n(tG);var rG=function(e){var t,n=e.message,r=e.user;return(0,Xr.jsxs)("div",{style:{marginBottom:"3px",display:"flex"},children:[(0,Xr.jsx)("img",{style:{borderRadius:"10px"},width:48,height:48,className:"mr-3",src:n.user.image,alt:n.user.name}),(0,Xr.jsxs)("div",{style:{backgroundColor:function(e,t){if(t)return e.user.id===t.uid}(n,r)&&"#ECECEC",width:"100%"},children:[(0,Xr.jsxs)("h6",{children:[n.user.name," ",(0,Xr.jsx)("span",{style:{fontSize:"10px",color:"gray"},children:(t=n.timestamp,nG()(t).fromNow())})]}),function(e){return e.hasOwnProperty("image")&&!e.hasOwnProperty("content")}(n)?(0,Xr.jsx)("img",{style:{maxWidth:"300px"},alt:"\uc774\ubbf8\uc9c0",src:n.image}):(0,Xr.jsx)("p",{children:n.content})]})]})},iG=["min","now","max","label","visuallyHidden","striped","animated","className","style","variant","bsPrefix"],aG=["isChild"],oG=["min","now","max","label","visuallyHidden","striped","animated","bsPrefix","variant","className","children"];function sG(e,t,n){var r=(e-t)/(n-t)*100;return Math.round(1e3*r)/1e3}function uG(e,t){var n,r=e.min,i=e.now,a=e.max,o=e.label,s=e.visuallyHidden,u=e.striped,c=e.animated,l=e.className,f=e.style,h=e.variant,d=e.bsPrefix,p=Vt(e,iG);return(0,Xr.jsx)("div",Ut(Ut({ref:t},p),{},{role:"progressbar",className:qt()(l,"".concat(d,"-bar"),(n={},Ft(n,"bg-".concat(h),h),Ft(n,"".concat(d,"-bar-animated"),c),Ft(n,"".concat(d,"-bar-striped"),c||u),n)),style:Ut({width:"".concat(sG(i,r,a),"%")},f),"aria-valuenow":i,"aria-valuemin":r,"aria-valuemax":a,children:s?(0,Xr.jsx)("span",{className:"visually-hidden",children:o}):o}))}var cG=r.forwardRef((function(e,t){var n=e.isChild,i=Vt(e,aG);if(i.bsPrefix=ji(i.bsPrefix,"progress"),n)return uG(i,t);var a=i.min,o=i.now,s=i.max,u=i.label,c=i.visuallyHidden,l=i.striped,f=i.animated,h=i.bsPrefix,d=i.variant,p=i.className,v=i.children,m=Vt(i,oG);return(0,Xr.jsx)("div",Ut(Ut({ref:t},m),{},{className:qt()(p,h),children:v?tW(v,(function(e){return(0,r.cloneElement)(e,{isChild:!0})})):uG({min:a,now:o,max:s,label:u,visuallyHidden:c,striped:l,animated:f,bsPrefix:h,variant:d},t)}))}));cG.displayName="ProgressBar",cG.defaultProps={min:0,max:100,animated:!1,isChild:!1,visuallyHidden:!1,striped:!1};var lG=cG;var fG=function(){var e=Lt((function(e){return e.chatRoom.currentChatRoom})),t=Lt((function(e){return e.user.currentUser})),n=Lt((function(e){return e.chatRoom.isPrivateChatRoom})),i=b((0,r.useState)(""),2),a=i[0],o=i[1],s=b((0,r.useState)([]),2),u=s[0],c=s[1],l=b((0,r.useState)(!1),2),f=l[0],h=l[1],d=b((0,r.useState)(0),2),p=d[0],v=d[1],m=iq.database().ref("messages"),y=(0,r.useRef)(),g=iq.storage().ref(),k=iq.database().ref("typing"),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n={timestamp:iq.database.ServerValue.TIMESTAMP,user:{id:t.uid,name:t.displayName,image:t.photoURL}};return null!==e?n.image=e:n.content=a,n},w=function(){var n=Oe(Pe().mark((function n(){return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a){n.next=3;break}return c((function(e){return e.concat("Type contents first")})),n.abrupt("return");case 3:return h(!0),n.prev=4,n.next=7,m.child(e.id).push().set(_());case 7:k.child(e.id).child(t.id).remove(),o(""),c([]),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(4),c((function(e){return e.concat(n.t0.message)})),h(!1),setTimeout((function(){c([])}),5e3);case 17:case"end":return n.stop()}}),n,null,[[4,12]])})));return function(){return n.apply(this,arguments)}}();return(0,Xr.jsxs)("div",{children:[(0,Xr.jsx)(LW,{onSubmit:w,children:(0,Xr.jsx)(LW.Group,{controlId:"exampleForm.ControlTextarea1",children:(0,Xr.jsx)(LW.Control,{onKeyDown:function(n){n.ctrlKey&&13===n.keyCode&&w(),a?k.child(e.id).child(t.uid).set(t.displayName):k.child(e.id).child(t.uid).remove()},value:a,onChange:function(e){o(e.target.value)},as:"textarea",rows:3})})}),!(0===p||100===p)&&(0,Xr.jsx)(lG,{variant:"warning",label:"".concat(p,"%"),now:p}),(0,Xr.jsx)("div",{children:u.map((function(e){return(0,Xr.jsx)("p",{style:{color:"red"},children:e},e)}))}),(0,Xr.jsxs)(nH,{children:[(0,Xr.jsx)(vW,{children:(0,Xr.jsx)("button",{onClick:w,className:"message-form-button",style:{width:"100%"},disabled:!!f,children:"SEND"})}),(0,Xr.jsx)(vW,{children:(0,Xr.jsx)("button",{onClick:function(){y.current.click()},className:"message-form-button",style:{width:"100%"},disabled:!!f,children:"UPLOAD"})})]}),(0,Xr.jsx)("input",{style:{display:"none"},type:"file",ref:y,onChange:function(t){var r=t.target.files[0];if(r){var i="".concat(n?"/message/private/".concat(e.id):"/message/public/","/").concat(r.name),a=r.type;h(!0);try{var o=g.child(i).put(r,a);o.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);v(t)}),(function(e){console.log(e),h(!1)}),(function(){o.snapshot.ref.getDownloadURL().then((function(t){m.child(e.id).push().set(_(t)),h(!1)}))}))}catch(CO){alert(CO)}}},accept:"image/jpeg, image/png"})]})};var hG=function(){return(0,Xr.jsxs)("div",{className:"skeleton",children:[(0,Xr.jsx)("div",{className:"skeleton-avatar"}),(0,Xr.jsx)("div",{className:"skeleton-author"}),(0,Xr.jsx)("div",{className:"skeleton-description"})]})},dG=function(e){d(n,e);var t=k(n);function n(){var e;c(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).messageEndRef=r.createRef(),e.state={messages:[],messagesRef:iq.database().ref("messages"),messagesLoading:!0,searchTerm:"",searchResults:[],searchLoading:!1,typingRef:iq.database().ref("typing"),typingUsers:[],listenerLists:[]},e.removeListeners=function(e){e.forEach((function(e){e.ref.child(e.id).off(e.event)}))},e.addTypingListeners=function(t){var n=[];e.state.typingRef.child(t).on("child_added",(function(t){t.key!==e.props.user.uid&&(n=n.concat({id:t.key,name:t.val()}),e.setState({typingUsers:n}))})),e.addToListenerLists(t,e.state.typingRef,"child_added"),e.state.typingRef.child(t).on("child_removed",(function(t){-1!==n.findIndex((function(e){return e.uid===t.key}))&&(n=n.filter((function(e){return e.id!==t.key})),e.setState({typingUsers:n}))})),e.addToListenerLists(t,e.state.typingRef,"child_removed")},e.addToListenerLists=function(t,n,r){if(-1===e.state.listenerLists.findIndex((function(e){return e.id===t&&e.ref===n&&e.event===r}))){var i={id:t,ref:n,event:r};e.setState({listenerLists:e.state.listenerLists.concat(i)})}},e.handleSearchMessages=function(){var t=u(e.state.messages),n=new RegExp(e.state.searchTerm,"gi"),r=t.reduce((function(e,t){return(t.content&&t.content.match(n)||t.user.name.match(n))&&e.push(t),e}),[]);e.setState({searchResults:r})},e.handleSearchChange=function(t){e.setState({searchTerm:t.target.value,searchLoading:!0},(function(){return e.handleSearchMessages()}))},e.addMessagesListeners=function(t){var n=[];e.state.messagesRef.child(t).on("child_added",(function(t){n.push(t.val()),e.setState({messages:n,messagesLoading:!1})})),e.userPostsCount(n)},e.userPostsCount=function(t){var n=t.reduce((function(e,t){return t.user.name in e?e[t.user.name].count+=1:e[t.user.name]={image:t.user.image,count:1},e}),{});e.props.dispatch(_q(n))},e.renderMessages=function(t){return t.length>0&&t.map((function(t){return(0,Xr.jsx)(rG,{message:t,user:e.props.user},t.timestamp)}))},e.renderTypingUsers=function(e){return e.length>0&&e.map((function(e){return(0,Xr.jsxs)("span",{children:[e.name,"\ub2d8\uc774 \ucc44\ud305\uc744 \uc785\ub825\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4."]})}))},e.renderMessageSkeleton=function(e){return e&&(0,Xr.jsx)(Xr.Fragment,{children:u(Array(10)).map((function(e,t){return(0,Xr.jsx)(hG,{},t)}))})},e}return f(n,[{key:"componentDidMount",value:function(){var e=this.props.chatRoom;e&&(this.addMessagesListeners(e.id),this.addTypingListeners(e.id))}},{key:"componentDidUpdate",value:function(){this.messageEndRef&&this.messageEndRef.scrollIntoView({behavior:"smooth"})}},{key:"componentWillUnmount",value:function(){this.state.messagesRef.off(),this.removeListeners(this.state.listenerLists)}},{key:"render",value:function(){var e=this,t=this.state,n=t.messages,r=t.searchTerm,i=t.searchResults,a=t.typingUsers,o=t.messagesLoading;return(0,Xr.jsxs)("div",{style:{padding:"2rem 2rem 0 2rem"},children:[(0,Xr.jsx)(eG,{handleSearchChange:this.handleSearchChange}),(0,Xr.jsxs)("div",{style:{width:"100%",height:"450px",border:".2rem solid #ececec",borderRadius:"4px",padding:"1rem",marginBottom:"1rem",overflowY:"auto"},children:[this.renderMessageSkeleton(o),r?this.renderMessages(i):this.renderMessages(n),this.renderTypingUsers(a),(0,Xr.jsx)("div",{ref:function(t){return e.messageEndRef=t}})]}),(0,Xr.jsx)(fG,{})]})}}]),n}(r.Component),pG=Ct((function(e){return{user:e.user.currentUser,chatRoom:e.chatRoom.currentChatRoom}}))(dG);var vG=function(){var e=Lt((function(e){return e.user.currentUser})),t=Lt((function(e){return e.chatRoom.currentChatRoom}));return(0,Xr.jsxs)("div",{style:{display:"flex"},children:[(0,Xr.jsx)("div",{style:{width:"300px"},children:(0,Xr.jsx)(BW,{},e&&e.uid)}),(0,Xr.jsx)("div",{style:{width:"100%"},children:(0,Xr.jsx)(pG,{},t&&t.id)})]})};function mG(){return mG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mG.apply(this,arguments)}function yG(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var gG=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function kG(e){var t=e.basename,n=e.children,i=e.window,a=r.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),D((function(e,t){var n=e.location;return N("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:R(t)}),null,e)}({window:i,v5Compat:!0}));var o=a.current,s=b(r.useState({action:o.action,location:o.location}),2),u=s[0],c=s[1];return r.useLayoutEffect((function(){return o.listen(c)}),[o]),r.createElement(Ce,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:o})}var _G=r.forwardRef((function(e,t){var n=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,s=e.state,u=e.target,c=e.to,l=e.preventScrollReset,f=yG(e,gG),h=function(e,t){var n=(void 0===t?{}:t).relative;de()||B(!1);var i=r.useContext(ce),a=i.basename,o=i.navigator,s=ye(e,{relative:n}),u=s.hash,c=s.pathname,l=s.search,f=c;return"/"!==a&&(f="/"===c?a:H([a,c])),o.createHref({pathname:f,search:l,hash:u})}(c,{relative:i}),d=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,s=n.preventScrollReset,u=n.relative,c=me(),l=pe(),f=ye(e,{relative:u});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:R(l)===R(f);c(e,{replace:n,state:o,preventScrollReset:s,relative:u})}}),[l,c,f,a,o,i,e,s,u])}(c,{replace:o,state:s,target:u,preventScrollReset:l,relative:i});return r.createElement("a",mG({},f,{href:h,onClick:a?n:function(e){n&&n(e),e.defaultPrevented||d(e)},ref:t,target:u}))}));var wG,bG;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(wG||(wG={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(bG||(bG={}));var xG=["name"],EG=["_f"],SG=["_f"],TG=function(e){return"checkbox"===e.type},CG=function(e){return e instanceof Date},IG=function(e){return null==e},NG=function(e){return"object"===typeof e},RG=function(e){return!IG(e)&&!Array.isArray(e)&&NG(e)&&!CG(e)},PG=function(e){return RG(e)&&e.target?TG(e.target)?e.target.checked:e.target.value:e},DG=function(e,t){return e.has(function(e){return e.substring(0,e.search(/\.\d+(\.|$)/))||e}(t))},OG=function(e){return Array.isArray(e)?e.filter(Boolean):[]},AG=function(e){return void 0===e},MG=function(e,t,n){if(!t||!RG(e))return n;var r=OG(t.split(/[,[\].]+?/)).reduce((function(e,t){return IG(e)?e:e[t]}),e);return AG(r)||r===e?AG(e[t])?n:e[t]:r},LG="blur",FG="focusout",jG="onBlur",UG="onChange",VG="onSubmit",BG="onTouched",qG="all",zG="max",WG="min",HG="maxLength",GG="minLength",KG="pattern",YG="required",QG="validate",$G=(r.createContext(null),function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i={defaultValues:t._defaultValues},a=function(a){Object.defineProperty(i,a,{get:function(){var i=a;return t._proxyFormState[i]!==qG&&(t._proxyFormState[i]=!r||qG),n&&(n[i]=!0),e[i]}})};for(var o in e)a(o);return i}),XG=function(e){return RG(e)&&!Object.keys(e).length},JG=function(e,t,n){e.name;var r=Vt(e,xG);return XG(r)||Object.keys(r).length>=Object.keys(t).length||Object.keys(r).find((function(e){return t[e]===(!n||qG)}))},ZG=function(e){return Array.isArray(e)?e:[e]};function eK(e){var t=r.useRef(e);t.current=e,r.useEffect((function(){var n=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return function(){n&&n.unsubscribe()}}),[e.disabled])}var tK=function(e){return"string"===typeof e},nK=function(e,t,n,r){var i=Array.isArray(e);return tK(e)?(r&&t.watch.add(e),MG(n,e)):i?e.map((function(e){return r&&t.watch.add(e),MG(n,e)})):(r&&(t.watchAll=!0),n)},rK=function(e){return"function"===typeof e},iK=function(e){for(var t in e)if(rK(e[t]))return!0;return!1};var aK=function(e,t,n,r,i){return t?Ut(Ut({},n[e]),{},{types:Ut(Ut({},n[e]&&n[e].types?n[e].types:{}),{},Ft({},r,i||!0))}):{}},oK=function(e){return/^\w*$/.test(e)},sK=function(e){return OG(e.replace(/["|']|\]/g,"").split(/\.|\[/))};function uK(e,t,n){for(var r=-1,i=oK(t)?[t]:sK(t),a=i.length,o=a-1;++r<a;){var s=i[r],u=n;if(r!==o){var c=e[s];u=RG(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}e[s]=u,e=e[s]}return e}var cK=function e(t,n,r){var i,a=cn(r||Object.keys(t));try{for(a.s();!(i=a.n()).done;){var o=i.value,s=MG(t,o);if(s){var u=s._f,c=Vt(s,EG);if(u&&n(u.name)){if(u.ref.focus){u.ref.focus();break}if(u.refs&&u.refs[0].focus){u.refs[0].focus();break}}else RG(c)&&e(c,n)}}}catch(l){a.e(l)}finally{a.f()}},lK=function(e,t,n){return!n&&(t.watchAll||t.watch.has(e)||u(t.watch).some((function(t){return e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))})))},fK=function(e,t,n){var r=OG(MG(e,n));return uK(r,"root",t[n]),uK(e,n,r),e},hK=function(e){return"boolean"===typeof e},dK=function(e){return"file"===e.type},pK=function(e){return tK(e)||r.isValidElement(e)},vK=function(e){return"radio"===e.type},mK=function(e){return e instanceof RegExp},yK={value:!1,isValid:!1},gK={value:!0,isValid:!0},kK=function(e){if(Array.isArray(e)){if(e.length>1){var t=e.filter((function(e){return e&&e.checked&&!e.disabled})).map((function(e){return e.value}));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!AG(e[0].attributes.value)?AG(e[0].value)||""===e[0].value?gK:{value:e[0].value,isValid:!0}:gK:yK}return yK},_K={isValid:!1,value:null},wK=function(e){return Array.isArray(e)?e.reduce((function(e,t){return t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e}),_K):_K};function bK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(pK(e)||Array.isArray(e)&&e.every(pK)||hK(e)&&!e)return{type:n,message:pK(e)?e:"",ref:t}}var xK=function(e){return RG(e)&&!mK(e)?e:{value:e,message:""}},EK=function(){var e=Oe(Pe().mark((function e(t,n,r,i,a){var o,s,u,c,l,f,h,d,p,v,m,y,g,k,_,w,b,x,E,S,T,C,I,N,R,P,D,O,A,M,L,F,j,U,V,B,q,z,W,H,G,K,Y,Q,$,X,J;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t._f,s=o.ref,u=o.refs,c=o.required,l=o.maxLength,f=o.minLength,h=o.min,d=o.max,p=o.pattern,v=o.validate,m=o.name,y=o.valueAsNumber,g=o.mount,k=o.disabled,g&&!k){e.next=3;break}return e.abrupt("return",{});case 3:if(_=u?u[0]:s,w=function(e){i&&_.reportValidity&&(_.setCustomValidity(hK(e)?"":e||" "),_.reportValidity())},b={},x=vK(s),E=TG(s),S=x||E,T=(y||dK(s))&&!s.value||""===n||Array.isArray(n)&&!n.length,C=aK.bind(null,m,r,b),I=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:HG,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:GG,a=e?t:n;b[m]=Ut({type:e?r:i,message:a,ref:s},C(e?r:i,a))},!(a?!Array.isArray(n)||!n.length:c&&(!S&&(T||IG(n))||hK(n)&&!n||E&&!kK(u).isValid||x&&!wK(u).isValid))){e.next=19;break}if(N=pK(c)?{value:!!c,message:c}:xK(c),R=N.value,P=N.message,!R){e.next=19;break}if(b[m]=Ut({type:YG,message:P,ref:_},C(YG,P)),r){e.next=19;break}return w(P),e.abrupt("return",b);case 19:if(T||IG(h)&&IG(d)){e.next=28;break}if(A=xK(d),M=xK(h),IG(n)||isNaN(n)?(F=s.valueAsDate||new Date(n),j=function(e){return new Date((new Date).toDateString()+" "+e)},U="time"==s.type,V="week"==s.type,tK(A.value)&&n&&(D=U?j(n)>j(A.value):V?n>A.value:F>new Date(A.value)),tK(M.value)&&n&&(O=U?j(n)<j(M.value):V?n<M.value:F<new Date(M.value))):(L=s.valueAsNumber||(n?+n:n),IG(A.value)||(D=L>A.value),IG(M.value)||(O=L<M.value)),!D&&!O){e.next=28;break}if(I(!!D,A.message,M.message,zG,WG),r){e.next=28;break}return w(b[m].message),e.abrupt("return",b);case 28:if(!l&&!f||T||!(tK(n)||a&&Array.isArray(n))){e.next=38;break}if(B=xK(l),q=xK(f),z=!IG(B.value)&&n.length>B.value,W=!IG(q.value)&&n.length<q.value,!z&&!W){e.next=38;break}if(I(z,B.message,q.message),r){e.next=38;break}return w(b[m].message),e.abrupt("return",b);case 38:if(!p||T||!tK(n)){e.next=45;break}if(H=xK(p),G=H.value,K=H.message,!mK(G)||n.match(G)){e.next=45;break}if(b[m]=Ut({type:KG,message:K,ref:s},C(KG,K)),r){e.next=45;break}return w(K),e.abrupt("return",b);case 45:if(!v){e.next=79;break}if(!rK(v)){e.next=58;break}return e.next=49,v(n);case 49:if(Y=e.sent,!(Q=bK(Y,_))){e.next=56;break}if(b[m]=Ut(Ut({},Q),C(QG,Q.message)),r){e.next=56;break}return w(Q.message),e.abrupt("return",b);case 56:e.next=79;break;case 58:if(!RG(v)){e.next=79;break}$={},e.t0=Pe().keys(v);case 61:if((e.t1=e.t0()).done){e.next=75;break}if(X=e.t1.value,XG($)||r){e.next=65;break}return e.abrupt("break",75);case 65:return e.t2=bK,e.next=68,v[X](n);case 68:e.t3=e.sent,e.t4=_,e.t5=X,(J=(0,e.t2)(e.t3,e.t4,e.t5))&&($=Ut(Ut({},J),C(X,J.message)),w(J.message),r&&(b[m]=$)),e.next=61;break;case 75:if(XG($)){e.next=79;break}if(b[m]=Ut({ref:_},$),r){e.next=79;break}return e.abrupt("return",b);case 79:return w(!0),e.abrupt("return",b);case 81:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}();var SK="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function TK(e){var t,n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(SK&&(e instanceof Blob||e instanceof FileList)||!n&&!RG(e))return e;if(t=n?[]:{},Array.isArray(e)||function(e){var t=e.constructor&&e.constructor.prototype;return RG(t)&&t.hasOwnProperty("isPrototypeOf")}(e))for(var r in e)t[r]=TK(e[r]);else t=e}return t}var CK=function(e){return{isOnSubmit:!e||e===VG,isOnBlur:e===jG,isOnChange:e===UG,isOnAll:e===qG,isOnTouch:e===BG}};function IK(e){for(var t in e)if(!AG(e[t]))return!1;return!0}function NK(e,t){var n,r=oK(t)?[t]:sK(t),i=1==r.length?e:function(e,t){for(var n=t.slice(0,-1).length,r=0;r<n;)e=AG(e)?r++:e[t[r++]];return e}(e,r),a=r[r.length-1];i&&delete i[a];for(var o=0;o<r.slice(0,-1).length;o++){var s=-1,u=void 0,c=r.slice(0,-(o+1)),l=c.length-1;for(o>0&&(n=e);++s<c.length;){var f=c[s];u=u?u[f]:e[f],l===s&&(RG(u)&&XG(u)||Array.isArray(u)&&IK(u))&&(n?delete n[f]:delete e[f]),n=u}}return e}function RK(){var e=[];return{get observers(){return e},next:function(t){var n,r=cn(e);try{for(r.s();!(n=r.n()).done;){n.value.next(t)}}catch(i){r.e(i)}finally{r.f()}},subscribe:function(t){return e.push(t),{unsubscribe:function(){e=e.filter((function(e){return e!==t}))}}},unsubscribe:function(){e=[]}}}var PK=function(e){return IG(e)||!NG(e)};function DK(e,t){if(PK(e)||PK(t))return e===t;if(CG(e)&&CG(t))return e.getTime()===t.getTime();var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0,a=n;i<a.length;i++){var o=a[i],s=e[o];if(!r.includes(o))return!1;if("ref"!==o){var u=t[o];if(CG(s)&&CG(u)||RG(s)&&RG(u)||Array.isArray(s)&&Array.isArray(u)?!DK(s,u):s!==u)return!1}}return!0}var OK=function(e){var t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},AK=function(e){return"select-multiple"===e.type},MK=function(e){return vK(e)||TG(e)},LK=function(e){return OK(e)&&e.isConnected};function FK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e);if(RG(e)||n)for(var r in e)Array.isArray(e[r])||RG(e[r])&&!iK(e[r])?(t[r]=Array.isArray(e[r])?[]:{},FK(e[r],t[r])):IG(e[r])||(t[r]=!0);return t}function jK(e,t,n){var r=Array.isArray(e);if(RG(e)||r)for(var i in e)Array.isArray(e[i])||RG(e[i])&&!iK(e[i])?AG(t)||PK(n[i])?n[i]=Array.isArray(e[i])?FK(e[i],[]):Ut({},FK(e[i])):jK(e[i],IG(t)?{}:t[i],n[i]):n[i]=!DK(e[i],t[i]);return n}var UK=function(e,t){return jK(e,t,FK(t))},VK=function(e,t){var n=t.valueAsNumber,r=t.valueAsDate,i=t.setValueAs;return AG(e)?e:n?""===e?NaN:e?+e:e:r&&tK(e)?new Date(e):i?i(e):e};function BK(e){var t=e.ref;if(!(e.refs?e.refs.every((function(e){return e.disabled})):t.disabled))return dK(t)?t.files:vK(t)?wK(e.refs).value:AK(t)?u(t.selectedOptions).map((function(e){return e.value})):TG(t)?kK(e.refs).value:VK(AG(t.value)?e.ref.value:t.value,e)}var qK=function(e,t,n,r){var i,a={},o=cn(e);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=MG(t,s);c&&uK(a,s,c._f)}}catch(l){o.e(l)}finally{o.f()}return{criteriaMode:n,names:u(e),fields:a,shouldUseNativeValidation:r}},zK=function(e){return AG(e)?void 0:mK(e)?e.source:RG(e)?mK(e.value)?e.value.source:e.value:e},WK=function(e){return e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate)};function HK(e,t,n){var r=MG(e,n);if(r||oK(n))return{error:r,name:n};for(var i=n.split(".");i.length;){var a=i.join("."),o=MG(t,a),s=MG(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(s&&s.type)return{name:a,error:s};i.pop()}return{name:n}}var GK=function(e,t,n,r,i){return!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e)},KK=function(e,t){return!OG(MG(e,t)).length&&NK(e,t)},YK={mode:VG,reValidateMode:UG,shouldFocusError:!0};function QK(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Ut(Ut({},YK),t),r={submitCount:0,isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},i={},a=TK(n.defaultValues)||{},o=n.shouldUnregister?{}:TK(a),s={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l=0,f={},h={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={watch:RK(),array:RK(),state:RK()},p=CK(n.mode),v=CK(n.reValidateMode),m=n.criteriaMode===qG,y=function(e){return function(t){clearTimeout(l),l=window.setTimeout(e,t)}},g=function(){var e=Oe(Pe().mark((function e(t){var a;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!1,!h.isValid){e.next=15;break}if(!n.resolver){e.next=10;break}return e.t1=XG,e.next=6,E();case 6:e.t2=e.sent.errors,e.t0=(0,e.t1)(e.t2),e.next=13;break;case 10:return e.next=12,T(i,!0);case 12:e.t0=e.sent;case 13:a=e.t0,t||a===r.isValid||(r.isValid=a,d.state.next({isValid:a}));case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,c=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(u&&n){if(s.action=!0,l&&Array.isArray(MG(i,e))){var f=n(MG(i,e),u.argA,u.argB);c&&uK(i,e,f)}if(h.errors&&l&&Array.isArray(MG(r.errors,e))){var p=n(MG(r.errors,e),u.argA,u.argB);c&&uK(r.errors,e,p),KK(r.errors,e)}if(h.touchedFields&&l&&Array.isArray(MG(r.touchedFields,e))){var v=n(MG(r.touchedFields,e),u.argA,u.argB);c&&uK(r.touchedFields,e,v)}h.dirtyFields&&(r.dirtyFields=UK(a,o)),d.state.next({isDirty:I(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else uK(o,e,t)},_=function(e,t){uK(r.errors,e,t),d.state.next({errors:r.errors})},w=function(e,t,n,r){var u=MG(i,e);if(u){var c=MG(o,e,AG(n)?MG(a,e):n);AG(c)||r&&r.defaultChecked||t?uK(o,e,t?c:BK(u._f)):P(e,c),s.mount&&g()}},b=function(e,t,n,i,o){var s=!1,u={name:e},c=MG(r.touchedFields,e);if(h.isDirty){var l=r.isDirty;r.isDirty=u.isDirty=I(),s=l!==u.isDirty}if(h.dirtyFields&&(!n||i)){var f=MG(r.dirtyFields,e);DK(MG(a,e),t)?NK(r.dirtyFields,e):uK(r.dirtyFields,e,!0),u.dirtyFields=r.dirtyFields,s=s||f!==MG(r.dirtyFields,e)}return n&&!c&&(uK(r.touchedFields,e,n),u.touchedFields=r.touchedFields,s=s||h.touchedFields&&c!==n),s&&o&&d.state.next(u),s?u:{}},x=function(){var n=Oe(Pe().mark((function n(i,a,o,s){var u,c,p;return Pe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u=MG(r.errors,i),c=h.isValid&&r.isValid!==a,t.delayError&&o?(e=y((function(){return _(i,o)})))(t.delayError):(clearTimeout(l),e=null,o?uK(r.errors,i,o):NK(r.errors,i)),(o?DK(u,o):!u)&&XG(s)&&!c||(p=Ut(Ut(Ut({},s),c?{isValid:a}:{}),{},{errors:r.errors,name:i}),r=Ut(Ut({},r),p),d.state.next(p)),f[i]--,h.isValidating&&!Object.values(f).some((function(e){return e}))&&(d.state.next({isValidating:!1}),f={});case 6:case"end":return n.stop()}}),n)})));return function(e,t,r,i){return n.apply(this,arguments)}}(),E=function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.resolver){e.next=6;break}return e.next=3,n.resolver(Ut({},o),n.context,qK(t||c.mount,i,n.criteriaMode,n.shouldUseNativeValidation));case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0={};case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Oe(Pe().mark((function e(t){var n,i,a,o,s,u;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:if(n=e.sent,i=n.errors,t){a=cn(t);try{for(a.s();!(o=a.n()).done;)s=o.value,(u=MG(i,s))?uK(r.errors,s,u):NK(r.errors,s)}catch(c){a.e(c)}finally{a.f()}}else r.errors=i;return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Oe(Pe().mark((function e(t,i){var a,s,u,l,f,h,d,p=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=p.length>2&&void 0!==p[2]?p[2]:{valid:!0},e.t0=Pe().keys(t);case 2:if((e.t1=e.t0()).done){e.next=23;break}if(s=e.t1.value,!(u=t[s])){e.next=21;break}if(l=u._f,f=Vt(u,SG),!l){e.next=17;break}return h=c.array.has(l.name),e.next=11,EK(u,MG(o,l.name),m,n.shouldUseNativeValidation,h);case 11:if(!(d=e.sent)[l.name]){e.next=16;break}if(a.valid=!1,!i){e.next=16;break}return e.abrupt("break",23);case 16:!i&&(MG(d,l.name)?h?fK(r.errors,d,l.name):uK(r.errors,l.name,d[l.name]):NK(r.errors,l.name));case 17:if(e.t2=f,!e.t2){e.next=21;break}return e.next=21,T(f,i,a);case 21:e.next=2;break;case 23:return e.abrupt("return",a.valid);case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e,t=cn(c.unMount);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=MG(i,n);r&&(r._f.refs?r._f.refs.every((function(e){return!LK(e)})):!LK(r._f.ref))&&B(n)}}catch(a){t.e(a)}finally{t.f()}c.unMount=new Set},I=function(e,t){return e&&t&&uK(o,e,t),!DK(L(),a)},N=function(e,t,n){var r=Ut({},s.mount?o:AG(t)?a:tK(e)?Ft({},e,t):t);return nK(e,c,r,n)},R=function(e){return OG(MG(s.mount?o:a,e,t.shouldUnregister?MG(a,e,[]):[]))},P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=MG(i,e),a=t;if(r){var s=r._f;s&&(!s.disabled&&uK(o,e,VK(t,s)),a=SK&&OK(s.ref)&&IG(t)?"":t,AK(s.ref)?u(s.ref.options).forEach((function(e){return e.selected=a.includes(e.value)})):s.refs?TG(s.ref)?s.refs.length>1?s.refs.forEach((function(e){return(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(a)?!!a.find((function(t){return t===e.value})):a===e.value)})):s.refs[0]&&(s.refs[0].checked=!!a):s.refs.forEach((function(e){return e.checked=e.value===a})):dK(s.ref)?s.ref.value="":(s.ref.value=a,s.ref.type||d.watch.next({name:e})))}(n.shouldDirty||n.shouldTouch)&&b(e,a,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&M(e)},D=function e(t,n,r){for(var a in n){var o=n[a],s="".concat(t,".").concat(a),u=MG(i,s);!c.array.has(t)&&PK(o)&&(!u||u._f)||CG(o)?P(s,o,r):e(s,o,r)}},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=MG(i,e),u=c.array.has(e),l=TK(t);uK(o,e,l),u?(d.array.next({name:e,values:o}),(h.isDirty||h.dirtyFields)&&n.shouldDirty&&(r.dirtyFields=UK(a,o),d.state.next({name:e,dirtyFields:r.dirtyFields,isDirty:I(e,l)}))):!s||s._f||IG(l)?P(e,l,n):D(e,l,n),lK(e,c)&&d.state.next({}),d.watch.next({name:e})},A=function(){var t=Oe(Pe().mark((function t(a){var s,u,l,h,y,k,_,w,S,T,C,I,N,R,P;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=a.target,u=s.name,!(l=MG(i,u))){t.next=39;break}if(k=s.type?BK(l._f):PG(a),_=a.type===LG||a.type===FG,w=!WK(l._f)&&!n.resolver&&!MG(r.errors,u)&&!l._f.deps||GK(_,MG(r.touchedFields,u),r.isSubmitted,v,p),S=lK(u,c,_),uK(o,u,k),_?(l._f.onBlur&&l._f.onBlur(a),e&&e(0)):l._f.onChange&&l._f.onChange(a),T=b(u,k,_,!1),C=!XG(T)||S,!_&&d.watch.next({name:u,type:a.type}),!w){t.next=15;break}return t.abrupt("return",C&&d.state.next(Ut({name:u},S?{}:T)));case 15:if(!_&&S&&d.state.next({}),f[u]=(f[u],1),d.state.next({isValidating:!0}),!n.resolver){t.next=30;break}return t.next=21,E([u]);case 21:I=t.sent,N=I.errors,R=HK(r.errors,i,u),P=HK(N,i,R.name||u),h=P.error,u=P.name,y=XG(N),t.next=37;break;case 30:return t.next=32,EK(l,MG(o,u),m,n.shouldUseNativeValidation);case 32:return t.t0=u,h=t.sent[t.t0],t.next=36,g(!0);case 36:y=t.sent;case 37:l._f.deps&&M(l._f.deps),x(u,y,h,T);case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(){var e=Oe(Pe().mark((function e(t){var a,o,s,u,l,f=arguments;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=f.length>1&&void 0!==f[1]?f[1]:{},u=ZG(t),d.state.next({isValidating:!0}),!n.resolver){e.next=11;break}return e.next=6,S(AG(t)?t:u);case 6:l=e.sent,o=XG(l),s=t?!u.some((function(e){return MG(l,e)})):o,e.next=21;break;case 11:if(!t){e.next=18;break}return e.next=14,Promise.all(u.map(function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=MG(i,t),e.next=3,T(n&&n._f?Ft({},t,n):n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:((s=e.sent.every(Boolean))||r.isValid)&&g(),e.next=21;break;case 18:return e.next=20,T(i);case 20:s=o=e.sent;case 21:return d.state.next(Ut(Ut(Ut({},!tK(t)||h.isValid&&o!==r.isValid?{}:{name:t}),n.resolver||!t?{isValid:o}:{}),{},{errors:r.errors,isValidating:!1})),a.shouldFocus&&!s&&cK(i,(function(e){return e&&MG(r.errors,e)}),t?u:c.mount),e.abrupt("return",s);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=Ut(Ut({},a),s.mount?o:{});return AG(e)?t:tK(e)?MG(t,e):e.map((function(e){return MG(t,e)}))},F=function(e,t){return{invalid:!!MG((t||r).errors,e),isDirty:!!MG((t||r).dirtyFields,e),isTouched:!!MG((t||r).touchedFields,e),error:MG((t||r).errors,e)}},j=function(e){e?ZG(e).forEach((function(e){return NK(r.errors,e)})):r.errors={},d.state.next({errors:r.errors})},U=function(e,t,n){var a=(MG(i,e,{_f:{}})._f||{}).ref;uK(r.errors,e,Ut(Ut({},t),{},{ref:a})),d.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&a&&a.focus&&a.focus()},V=function(e,t){return rK(e)?d.watch.subscribe({next:function(n){return e(N(void 0,t),n)}}):N(e,t,!0)},B=function(e){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=cn(e?ZG(e):c.mount);try{for(u.s();!(t=u.n()).done;){var l=t.value;c.mount.delete(l),c.array.delete(l),MG(i,l)&&(s.keepValue||(NK(i,l),NK(o,l)),!s.keepError&&NK(r.errors,l),!s.keepDirty&&NK(r.dirtyFields,l),!s.keepTouched&&NK(r.touchedFields,l),!n.shouldUnregister&&!s.keepDefaultValue&&NK(a,l))}}catch(f){u.e(f)}finally{u.f()}d.watch.next({}),d.state.next(Ut(Ut({},r),s.keepDirty?{isDirty:I()}:{})),!s.keepIsValid&&g()},q=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=MG(i,t),f=hK(r.disabled);return uK(i,t,Ut(Ut({},l||{}),{},{_f:Ut(Ut({},l&&l._f?l._f:{ref:{name:t}}),{},{name:t,mount:!0},r)})),c.mount.add(t),l?f&&uK(o,t,r.disabled?void 0:MG(o,t,BK(l._f))):w(t,!0,r.value),Ut(Ut(Ut({},f?{disabled:r.disabled}:{}),n.shouldUseNativeValidation?{required:!!r.required,min:zK(r.min),max:zK(r.max),minLength:zK(r.minLength),maxLength:zK(r.maxLength),pattern:zK(r.pattern)}:{}),{},{name:t,onChange:A,onBlur:A,ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(o){if(o){e(t,r),l=MG(i,t);var f=AG(o.value)&&o.querySelectorAll&&o.querySelectorAll("input,select,textarea")[0]||o,h=MK(f),d=l._f.refs||[];if(h?d.find((function(e){return e===f})):f===l._f.ref)return;uK(i,t,{_f:Ut(Ut({},l._f),h?{refs:[].concat(u(d.filter(LK)),[f],u(Array.isArray(MG(a,t))?[{}]:[])),ref:{type:f.type,name:t}}:{ref:f})}),w(t,!1,void 0,f)}else(l=MG(i,t,{}))._f&&(l._f.mount=!1),(n.shouldUnregister||r.shouldUnregister)&&(!DG(c.array,t)||!s.action)&&c.unMount.add(t)}))})},z=function(){return n.shouldFocusError&&cK(i,(function(e){return e&&MG(r.errors,e)}),c.mount)},W=function(e,t){return function(){var a=Oe(Pe().mark((function a(s){var u,c,l,f,h;return Pe().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist()),u=!0,c=TK(o),d.state.next({isSubmitting:!0}),a.prev=4,!n.resolver){a.next=15;break}return a.next=8,E();case 8:l=a.sent,f=l.errors,h=l.values,r.errors=f,c=h,a.next=17;break;case 15:return a.next=17,T(i);case 17:if(!XG(r.errors)){a.next=23;break}return d.state.next({errors:{},isSubmitting:!0}),a.next=21,e(c,s);case 21:a.next=27;break;case 23:if(!t){a.next=26;break}return a.next=26,t(Ut({},r.errors),s);case 26:z();case 27:a.next=33;break;case 29:throw a.prev=29,a.t0=a.catch(4),u=!1,a.t0;case 33:return a.prev=33,r.isSubmitted=!0,d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:XG(r.errors)&&u,submitCount:r.submitCount+1,errors:r.errors}),a.finish(33);case 37:case"end":return a.stop()}}),a,null,[[4,29,33,37]])})));return function(e){return a.apply(this,arguments)}}()},H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};MG(i,e)&&(AG(t.defaultValue)?O(e,MG(a,e)):(O(e,t.defaultValue),uK(a,e,t.defaultValue)),t.keepTouched||NK(r.touchedFields,e),t.keepDirty||(NK(r.dirtyFields,e),r.isDirty=t.defaultValue?I(e,MG(a,e)):I()),t.keepError||(NK(r.errors,e),h.isValid&&g()),d.state.next(Ut({},r)))},G=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=e||a,l=TK(u),f=e&&!XG(e)?l:a;if(n.keepDefaultValues||(a=u),!n.keepValues){if(n.keepDirtyValues){var p,v=cn(c.mount);try{for(v.s();!(p=v.n()).done;){var m=p.value;MG(r.dirtyFields,m)?uK(f,m,MG(o,m)):O(m,MG(f,m))}}catch(b){v.e(b)}finally{v.f()}}else{if(SK&&AG(e)){var y,g=cn(c.mount);try{for(g.s();!(y=g.n()).done;){var k=y.value,_=MG(i,k);if(_&&_._f){var w=Array.isArray(_._f.refs)?_._f.refs[0]:_._f.ref;try{if(OK(w)){w.closest("form").reset();break}}catch(nR){}}}}catch(b){g.e(b)}finally{g.f()}}i={}}o=t.shouldUnregister?n.keepDefaultValues?TK(a):{}:l,d.array.next({values:f}),d.watch.next({values:f})}c={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!h.isValid||!!n.keepIsValid,s.watch=!!t.shouldUnregister,d.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty||n.keepDirtyValues?r.isDirty:!(!n.keepDefaultValues||DK(e,a)),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:n.keepDirty||n.keepDirtyValues?r.dirtyFields:n.keepDefaultValues&&e?UK(a,e):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},K=function(e,t){return G(rK(e)?e(o):e,t)},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=MG(i,e),r=n&&n._f;if(r){var a=r.refs?r.refs[0]:r.ref;a.focus&&(a.focus(),t.shouldSelect&&a.select())}};return{control:{register:q,unregister:B,getFieldState:F,_executeSchema:E,_focusError:z,_getWatch:N,_getDirty:I,_updateValid:g,_removeUnmounted:C,_updateFieldArray:k,_getFieldArray:R,_subjects:d,_proxyFormState:h,get _fields(){return i},get _formValues(){return o},get _stateFlags(){return s},set _stateFlags(e){s=e},get _defaultValues(){return a},get _names(){return c},set _names(e){c=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n=Ut(Ut({},n),e)}},trigger:M,register:q,handleSubmit:W,watch:V,setValue:O,getValues:L,reset:K,resetField:H,clearErrors:j,unregister:B,setError:U,setFocus:Y,getFieldState:F}}function $K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.useRef(),n=r.useState({isDirty:!1,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:e.defaultValues}),i=b(n,2),a=i[0],o=i[1];t.current||(t.current=Ut(Ut({},QK(e)),{},{formState:a}));var s=t.current.control;return s._options=e,eK({subject:s._subjects.state,callback:r.useCallback((function(e){JG(e,s._proxyFormState,!0)&&(s._formState=Ut(Ut({},s._formState),e),o(Ut({},s._formState)))}),[s])}),r.useEffect((function(){s._stateFlags.mount||(s._proxyFormState.isValid&&s._updateValid(),s._stateFlags.mount=!0),s._stateFlags.watch&&(s._stateFlags.watch=!1,s._subjects.state.next({})),s._removeUnmounted()})),r.useEffect((function(){a.submitCount&&s._focusError()}),[s,a.submitCount]),t.current.formState=$G(a,s),t.current}var XK=function(){var e=$K(),t=e.register,n=e.handleSubmit,i=e.formState.errors,a=b((0,r.useState)(""),2),o=(a[0],a[1]),s=b((0,r.useState)(!1),2),u=s[0],c=s[1],l=function(){var e=Oe(Pe().mark((function e(t){return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,iq.auth().signInWithEmailAndPassword(t.email,t.password);case 4:c(!1),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),o(e.t0.message),c(!1),setTimeout((function(){o("")}),5e3);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,Xr.jsxs)("div",{className:"auth-wrapper",children:[(0,Xr.jsx)("div",{style:{textAlign:"center"},children:(0,Xr.jsx)("h3",{children:"Login"})}),(0,Xr.jsxs)("form",{onSubmit:n(l),children:[(0,Xr.jsx)("label",{children:"Email"}),(0,Xr.jsx)("input",Ut({name:"email",type:"email"},t("email",{required:!0,pattern:/^\S+@\S+$/i}))),i.email&&(0,Xr.jsx)("span",{children:"This field is required"}),(0,Xr.jsx)("label",{children:"Password"}),(0,Xr.jsx)("input",Ut({name:"password",type:"password"},t("password",{required:!0,minLength:6}))),i.password&&"required"===i.password.type&&(0,Xr.jsx)("p",{children:" This password field is required"}),i.password&&"minLength"===i.password.type&&(0,Xr.jsx)("p",{children:" Password must have at least 6 characters"}),(0,Xr.jsx)("input",{type:"submit",disabled:u}),(0,Xr.jsx)(_G,{style:{color:"gray",textDecoration:"none"},to:"/register",children:"\uc544\uc9c1 \uc544\uc774\ub514\uac00 \uc5c6\ub2e4\uba74..."})]})]})},JK=n(329),ZK=n.n(JK);var eY=function(){var e=$K(),t=e.register,n=e.handleSubmit,i=e.watch,a=e.formState.errors,o=b((0,r.useState)(""),2),s=o[0],u=o[1],c=b((0,r.useState)(!1),2),l=c[0],f=c[1],h=(0,r.useRef)();h.current=i("password");var d=function(){var e=Oe(Pe().mark((function e(t){var n;return Pe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,iq.auth().createUserWithEmailAndPassword(t.email,t.password);case 4:return n=e.sent,console.log(n),e.next=8,n.user.updateProfile({displayName:t.name,photoURL:"http://gravatar.com/avatar/".concat(ZK()(n.user.email),"?d=identicon")});case 8:return e.next=10,iq.database().ref("users").child(n.user.uid).set({name:n.user.displayName,image:n.user.photoURL});case 10:f(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),u(e.t0.message),f(!1),setTimeout((function(){u("")}),5e3);case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,Xr.jsxs)("div",{className:"auth-wrapper",children:[(0,Xr.jsx)("div",{style:{textAlign:"center"},children:(0,Xr.jsx)("h3",{children:"Register"})}),(0,Xr.jsxs)("form",{onSubmit:n(d),children:[(0,Xr.jsx)("label",{children:"Email"}),(0,Xr.jsx)("input",Ut({name:"email",type:"email"},t("email",{required:!0,pattern:/^\S+@\S+$/i}))),a.email&&(0,Xr.jsx)("span",{children:"This field is required"}),(0,Xr.jsx)("label",{children:"Name"}),(0,Xr.jsx)("input",Ut({name:"name"},t("name",{required:!0,maxLength:10}))),a.name&&"required"===a.name.type&&(0,Xr.jsx)("p",{children:" This name field is required"}),a.name&&"maxLength"===a.name.type&&(0,Xr.jsx)("p",{children:" This input exceed maximum length"}),(0,Xr.jsx)("label",{children:"Password"}),(0,Xr.jsx)("input",Ut({name:"password",type:"password"},t("password",{required:!0,minLength:6}))),a.password&&"required"===a.password.type&&(0,Xr.jsx)("p",{children:" This password field is required"}),a.password&&"minLength"===a.password.type&&(0,Xr.jsx)("p",{children:" Password must have at least 6 characters"}),(0,Xr.jsx)("label",{children:"Password Confirm"}),(0,Xr.jsx)("input",Ut({name:"password_confirm",type:"password"},t("password_confirm",{required:!0,validate:function(e){return e===h.current}}))),a.password_confirm&&"required"===a.password_confirm.type&&(0,Xr.jsx)("p",{children:" This password confirm field is required"}),a.password_confirm&&"validate"===a.password_confirm.type&&(0,Xr.jsx)("p",{children:" The passwords do not match"}),s&&(0,Xr.jsx)("p",{children:s}),(0,Xr.jsx)("input",{type:"submit",disabled:l}),(0,Xr.jsx)(_G,{style:{color:"gray",textDecoration:"none"},to:"/login",children:"\uc774\ubbf8 \uc544\uc774\ub514\uac00 \uc788\ub2e4\uba74..."})]})]})};var tY=function(e){var t=me(),n=Dt();return Lt((function(e){return e.user.isLoading})),(0,r.useEffect)((function(){iq.auth().onAuthStateChanged((function(e){console.log(e),e?(t("/"),n(function(e){return{type:aq,payload:e}}(e))):t("/login")}))}),[]),(0,Xr.jsxs)(Ie,{children:[(0,Xr.jsx)(Te,{path:"/",element:(0,Xr.jsx)(vG,{})}),(0,Xr.jsx)(Te,{path:"/login",element:(0,Xr.jsx)(XK,{})}),(0,Xr.jsx)(Te,{path:"/register",element:(0,Xr.jsx)(eY,{})})]})},nY=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};function rY(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var iY="function"===typeof Symbol&&Symbol.observable||"@@observable",aY=function(){return Math.random().toString(36).substring(7).split("").join(".")},oY={INIT:"@@redux/INIT"+aY(),REPLACE:"@@redux/REPLACE"+aY(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+aY()}};function sY(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function uY(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(rY(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(rY(1));return n(uY)(e,t)}if("function"!==typeof e)throw new Error(rY(2));var i=e,a=t,o=[],s=o,u=!1;function c(){s===o&&(s=o.slice())}function l(){if(u)throw new Error(rY(3));return a}function f(e){if("function"!==typeof e)throw new Error(rY(4));if(u)throw new Error(rY(5));var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error(rY(6));t=!1,c();var n=s.indexOf(e);s.splice(n,1),o=null}}}function h(e){if(!sY(e))throw new Error(rY(7));if("undefined"===typeof e.type)throw new Error(rY(8));if(u)throw new Error(rY(9));try{u=!0,a=i(a,e)}finally{u=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}function d(e){if("function"!==typeof e)throw new Error(rY(10));i=e,h({type:oY.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(rY(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[iY]=function(){return this},e}return h({type:oY.INIT}),(r={dispatch:h,subscribe:f,getState:l,replaceReducer:d})[iY]=p,r}function cY(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var lY=n(975);function fY(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var hY=fY();hY.withExtraArgument=fY;var dY=hY,pY={currentUser:null,isLoading:!0};var vY={currentChatRoom:null,isPrivateChatRoom:!1};var mY=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:oY.INIT}))throw new Error(rY(12));if("undefined"===typeof n(void 0,{type:oY.PROBE_UNKNOWN_ACTION()}))throw new Error(rY(13))}))}(n)}catch(kY){a=kY}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var u=o[s],c=n[u],l=e[u],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(rY(14))}i[u]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pY,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case aq:return Ut(Ut({},e),{},{currentUser:t.payload,isLoading:!1});case oq:return Ut(Ut({},e),{},{currentUser:null,isLoading:!1});case sq:return Ut(Ut({},e),{},{currentUser:Ut(Ut({},e.currentUser),{},{photoURL:t.payload}),isLoading:!1});default:return e}},chatRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vY,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case uq:return Ut(Ut({},e),{},{currentChatRoom:t.payload});case cq:return Ut(Ut({},e),{},{isPrivateChatRoom:t.payload});case lq:return Ut(Ut({},e),{},{userPosts:t.payload});default:return e}}}),yY=mY,gY=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(rY(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=cY.apply(void 0,a)(n.dispatch),Ut(Ut({},n),{},{dispatch:r})}}}(lY.Z,dY)(uY);i.render((0,Xr.jsx)(r.StrictMode,{children:(0,Xr.jsx)(Ye,{store:gY(yY,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),children:(0,Xr.jsx)(kG,{children:(0,Xr.jsx)(tY,{})})})}),document.getElementById("root")),nY()}()}();
//# sourceMappingURL=main.d36e3561.js.map